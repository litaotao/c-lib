<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!-- saved from url=(0041)http://blog.sae.sina.com.cn/archives/5465 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<title>Python 代码性能优化技巧 | Sina App Engine Blog</title>
<meta name="description" content="无处不在 触手可及">

<link rel="alternate" type="application/rss+xml" title="Sina App Engine Blog RSS Feed" href="http://blog.sae.sina.com.cn/feed">
<link rel="alternate" type="application/atom+xml" title="Sina App Engine Blog Atom Feed" href="http://blog.sae.sina.com.cn/feed/atom"> 
<link rel="pingback" href="http://blog.sae.sina.com.cn/xmlrpc.php">


<link rel="stylesheet" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/style.css" type="text/css">
<link rel="stylesheet" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/comment-style.css" type="text/css">
<link rel="stylesheet" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/style(1).css" type="text/css">


 
<link rel="stylesheet" id="crayon-css" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-twilight-css" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/twilight.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/monaco.css" type="text/css" media="all">
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/jquery.js"></script><style type="text/css"></style>
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/jquery-migrate.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"2.4.3","is_admin":"0","ajaxurl":"http:\/\/blog.sae.sina.com.cn\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/crayon.min.js"></script>
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/comment-reply.min.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.sae.sina.com.cn/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.sae.sina.com.cn/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="从MVC框架看MVC架构的设计" href="http://blog.sae.sina.com.cn/archives/5459">
<link rel="next" title="kmp算法实现原理及简单示例" href="http://blog.sae.sina.com.cn/archives/5477">
<meta name="generator" content="WordPress 3.8">
<link rel="canonical" href="./Python 代码性能优化技巧   Sina App Engine Blog_files/Python 代码性能优化技巧   Sina App Engine Blog.htm">
<link rel="shortlink" href="http://blog.sae.sina.com.cn/?p=5465">
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/rollover.js"></script>
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/jscript.js"></script>
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/scroll.js"></script>
<script type="text/javascript" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/comment.js"></script>

<!--[if IE 7]>
<link rel="stylesheet" href="http://blog.sae.sina.com.cn/wp-content/themes/cubic/ie7.css" type="text/css" />
<![endif]-->


</head>
<body class="default no_global_menu">

 <div id="header">

  <!-- logo -->
  <h1 id="logo"><a href="http://blog.sae.sina.com.cn/">Sina App Engine Blog</a></h1>

  <!-- social button -->
    <ul id="social_link" class="cf">
      <li><a class="target_blank" href="http://blog.sae.sina.com.cn/feed" target="_blank"><img src="./Python 代码性能优化技巧   Sina App Engine Blog_files/rss.png" alt="rss" title="rss" class="rollover"></a></li>
      <li><a class="target_blank" href="http://weibo.com/saet" target="_blank"><img src="./Python 代码性能优化技巧   Sina App Engine Blog_files/weibo.png" alt="weibo" title="weibo" class="rollover"></a></li>
      <li><a class="target_blank" href="http://twitter.com/sina_app_engine" target="_blank"><img src="./Python 代码性能优化技巧   Sina App Engine Blog_files/twitter.png" alt="twitter" title="twitter" class="rollover"></a></li>
        </ul>
  
  <!-- header menu -->
  
  <!-- search area -->
    <div class="search_area">
      <form method="get" id="searchform" action="http://blog.sae.sina.com.cn/">
    <div><input id="search_button" class="rollover" type="image" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/search_button.png" alt="SEARCH" title="SEARCH"></div>
    <div><input id="search_input" type="text" value="SEARCH" name="s" onfocus="if (this.value == &#39;SEARCH&#39;) this.value = &#39;&#39;;" onblur="if (this.value == &#39;&#39;) this.value = &#39;SEARCH&#39;;"></div>
   </form>
     </div>
  
 </div><!-- END #header -->

 <div id="content">


  <!-- global menu -->
  
  <div id="main_content" class="cf">
<div id="left_col">

 
 <div class="post first_post">
  <h2 class="title">Python 代码性能优化技巧</h2>
    <ul class="meta1 cf">
   <li class="post_date">09/16. 2014</li>
     </ul>
    <div class="post_content cf">
   <p>选择了脚本语言就要忍受其速度，这句话在某种程度上说明了 python 作为脚本的一个不足之处，那就是执行效率和性能不够理想，特别是在 performance 较差的机器上，因此有必要进行一定的代码优化来提高程序的执行效率。如何进行 Python 性能优化，是本文探讨的主要问题。本文会涉及常见的代码优化方法，性能优化工具的使用以及如何诊断代码的性能瓶颈等内容，希望可以给 Python 开发人员一定的参考。</p>
<p><strong>Python 代码优化常见技巧</strong></p>
<p>代码优化能够让程序运行更快，它是在不改变程序运行结果的情况下使得程序的运行效率更高，根据 80/20 原则，实现程序的重构、优化、扩展以及文档相关的事情通常需要消耗 80% 的工作量。优化通常包含两方面的内容：减小代码的体积，提高代码的运行效率。<br>
<span id="more-5465"></span><br>
<strong>一、改进算法，选择合适的数据结构</strong></p>
<p>一个良好的算法能够对性能起到关键作用，因此性能改进的首要点是对算法的改进。在算法的时间复杂度排序上依次是：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93cb2879211315" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">O(1) -&gt; O(lg n) -&gt; O(n lg n) -&gt; O(n^2) -&gt; O(n^3) -&gt; O(n^k) -&gt; O(k^n) -&gt; O(n!)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93cb2879211315-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93cb2879211315-1"><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">lg</span><span class="crayon-h"> </span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-h"> </span><span class="crayon-i">lg</span><span class="crayon-h"> </span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-o">^</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-o">^</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-o">^</span><span class="crayon-i">k</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">k</span><span class="crayon-o">^</span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">O</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-o">!</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0026 seconds] -->
<p>因此如果能够在时间复杂度上对算法进行一定的改进，对性能的提高不言而喻。但对具体算法的改进不属于本文讨论的范围，读者可以自行参考这方面资料。下面的内容将集中讨论数据结构的选择。</p>
<ul>
<li>字典 (dictionary) 与列表 (list)</li>
</ul>
<p>Python 字典中使用了 hash table，因此查找操作的复杂度为 O(1)，而 list 实际是个数组，在 list 中，查找需要遍历整个 list，其复杂度为 O(n)，因此对成员的查找访问等操作字典要比 list 更快。</p>
<p><strong>清单 1. 代码 dict.py</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93cc3876943614" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
list = ['a','b','is','python','jason','hello','hill','with','phone','test',
'dfdf','apple','pddf','ind','basic','none','baecr','var','bana','dd','wrd']
#list = dict.fromkeys(list,True)
print list
filter = []
for i in range (1000000):
for find in ['is','hat','new','list','old','.']:
if find not in list:
filter.append(find)
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cc3876943614-2">2</div><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cc3876943614-4">4</div><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cc3876943614-6">6</div><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cc3876943614-8">8</div><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cc3876943614-10">10</div><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cc3876943614-12">12</div><div class="crayon-num" data-line="crayon-5489271b93cc3876943614-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93cc3876943614-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cc3876943614-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93cc3876943614-3"><span class="crayon-v">list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'a'</span><span class="crayon-sy">,</span><span class="crayon-s">'b'</span><span class="crayon-sy">,</span><span class="crayon-s">'is'</span><span class="crayon-sy">,</span><span class="crayon-s">'python'</span><span class="crayon-sy">,</span><span class="crayon-s">'jason'</span><span class="crayon-sy">,</span><span class="crayon-s">'hello'</span><span class="crayon-sy">,</span><span class="crayon-s">'hill'</span><span class="crayon-sy">,</span><span class="crayon-s">'with'</span><span class="crayon-sy">,</span><span class="crayon-s">'phone'</span><span class="crayon-sy">,</span><span class="crayon-s">'test'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cc3876943614-4"><span class="crayon-s">'dfdf'</span><span class="crayon-sy">,</span><span class="crayon-s">'apple'</span><span class="crayon-sy">,</span><span class="crayon-s">'pddf'</span><span class="crayon-sy">,</span><span class="crayon-s">'ind'</span><span class="crayon-sy">,</span><span class="crayon-s">'basic'</span><span class="crayon-sy">,</span><span class="crayon-s">'none'</span><span class="crayon-sy">,</span><span class="crayon-s">'baecr'</span><span class="crayon-sy">,</span><span class="crayon-s">'var'</span><span class="crayon-sy">,</span><span class="crayon-s">'bana'</span><span class="crayon-sy">,</span><span class="crayon-s">'dd'</span><span class="crayon-sy">,</span><span class="crayon-s">'wrd'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93cc3876943614-5"><span class="crayon-p">#list = dict.fromkeys(list,True)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cc3876943614-6"><span class="crayon-e">print </span><span class="crayon-e">list</span></div><div class="crayon-line" id="crayon-5489271b93cc3876943614-7"><span class="crayon-v">filter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cc3876943614-8"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93cc3876943614-9"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">find </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'is'</span><span class="crayon-sy">,</span><span class="crayon-s">'hat'</span><span class="crayon-sy">,</span><span class="crayon-s">'new'</span><span class="crayon-sy">,</span><span class="crayon-s">'list'</span><span class="crayon-sy">,</span><span class="crayon-s">'old'</span><span class="crayon-sy">,</span><span class="crayon-s">'.'</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cc3876943614-10"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">find </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">list</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93cc3876943614-11"><span class="crayon-v">filter</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-i">find</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cc3876943614-12"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line" id="crayon-5489271b93cc3876943614-13"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0042 seconds] -->
<p>&nbsp;</p>
<p><span style="line-height: 1.5em;">上述代码运行大概需要 16.09seconds。如果去掉行 #list = dict.fromkeys(list,True) 的注释，将 list 转换为字典之后再运行，时间大约为 8.375 seconds，效率大概提高了一半。因此在需要多数据成员进行频繁的查找或者访问的时候，使用 dict 而不是 list 是一个较好的选择。</span></p>
<ul>
<li>集合 (set) 与列表 (list)</li>
</ul>
<p>set 的 union， intersection，difference 操作要比 list 的迭代要快。因此如果涉及到求 list 交集，并集或者差的问题可以转换为 set 来操作。</p>
<p><strong>清单 2. 求 list 的交集：</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93ccf851247738" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
lista=[1,2,3,4,5,6,7,8,9,13,34,53,42,44]
listb=[2,4,6,9,23]
intersection=[]
for i in range (1000000):
for a in lista:
for b in listb:
if a == b:
intersection.append(a)

print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ccf851247738-2">2</div><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ccf851247738-4">4</div><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ccf851247738-6">6</div><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ccf851247738-8">8</div><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ccf851247738-10">10</div><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ccf851247738-12">12</div><div class="crayon-num" data-line="crayon-5489271b93ccf851247738-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93ccf851247738-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ccf851247738-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93ccf851247738-3"><span class="crayon-v">lista</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-cn">8</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">34</span><span class="crayon-sy">,</span><span class="crayon-cn">53</span><span class="crayon-sy">,</span><span class="crayon-cn">42</span><span class="crayon-sy">,</span><span class="crayon-cn">44</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ccf851247738-4"><span class="crayon-v">listb</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">23</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93ccf851247738-5"><span class="crayon-v">intersection</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ccf851247738-6"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93ccf851247738-7"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">lista</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ccf851247738-8"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">listb</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93ccf851247738-9"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-i">b</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ccf851247738-10"><span class="crayon-v">intersection</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-i">a</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93ccf851247738-11">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ccf851247738-12"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line" id="crayon-5489271b93ccf851247738-13"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0040 seconds] -->
<p>&nbsp;</p>
<p>上述程序的运行时间大概为：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93cd9966543472" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">total run time:
38.4070000648</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93cd9966543472-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cd9966543472-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93cd9966543472-1"><span class="crayon-e">total </span><span class="crayon-e">run </span><span class="crayon-i">time</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cd9966543472-2"><span class="crayon-cn">38.4070000648</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0008 seconds] -->
<p><strong><span style="line-height: 1.5em;">清单 3. 使用 set 求交集</span></strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93ce3758310844" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
lista=[1,2,3,4,5,6,7,8,9,13,34,53,42,44]
listb=[2,4,6,9,23]
intersection=[]
for i in range (1000000):
list(set(lista)&amp;set(listb))
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93ce3758310844-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ce3758310844-2">2</div><div class="crayon-num" data-line="crayon-5489271b93ce3758310844-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ce3758310844-4">4</div><div class="crayon-num" data-line="crayon-5489271b93ce3758310844-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ce3758310844-6">6</div><div class="crayon-num" data-line="crayon-5489271b93ce3758310844-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ce3758310844-8">8</div><div class="crayon-num" data-line="crayon-5489271b93ce3758310844-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93ce3758310844-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ce3758310844-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93ce3758310844-3"><span class="crayon-v">lista</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-cn">8</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">13</span><span class="crayon-sy">,</span><span class="crayon-cn">34</span><span class="crayon-sy">,</span><span class="crayon-cn">53</span><span class="crayon-sy">,</span><span class="crayon-cn">42</span><span class="crayon-sy">,</span><span class="crayon-cn">44</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ce3758310844-4"><span class="crayon-v">listb</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">23</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93ce3758310844-5"><span class="crayon-v">intersection</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ce3758310844-6"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93ce3758310844-7"><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-e">set</span><span class="crayon-sy">(</span><span class="crayon-i">lista</span><span class="crayon-sy">)</span><span class="crayon-o">&amp;</span><span class="crayon-e">set</span><span class="crayon-sy">(</span><span class="crayon-i">listb</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ce3758310844-8"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line" id="crayon-5489271b93ce3758310844-9"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>改为 set 后程序的运行时间缩减为 8.75，提高了 4 倍多，运行时间大大缩短。读者可以自行使用表 1 其他的操作进行测试。</p>
<p><strong>表 1. set 常见用法</strong></p>
<table summary="" border="0" cellspacing="0" cellpadding="0">
<thead>
<tr>
<th><strong>语法</strong></th>
<th><strong>操作</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>set(list1) | set(list2)</td>
<td>union</td>
<td>包含 list1 和 list2 所有数据的新集合</td>
</tr>
<tr>
<td>set(list1) &amp; set(list2)</td>
<td>intersection</td>
<td>包含 list1 和 list2 中共同元素的新集合</td>
</tr>
<tr>
<td>set(list1) – set(list2)</td>
<td>difference</td>
<td>在 list1 中出现但不在 list2 中出现的元素的集合</td>
</tr>
</tbody>
</table>
<p><strong>二、对循环的优化</strong></p>
<p>对循环的优化所遵循的原则是尽量减少循环过程中的计算量，有多重循环的尽量将内层的计算提到上一层。 下面通过实例来对比循环优化后所带来的性能的提高。程序清单 4 中，如果不进行循环优化，其大概的运行时间约为 132.375。</p>
<p><strong>清单 4. 为进行循环优化前</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93cef773722939" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
lista = [1,2,3,4,5,6,7,8,9,10]
listb =[0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,0.01]
for i in range (1000000):
for a in range(len(lista)):
for b in range(len(listb)):
x=lista[a]+listb[b]
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93cef773722939-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cef773722939-2">2</div><div class="crayon-num" data-line="crayon-5489271b93cef773722939-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cef773722939-4">4</div><div class="crayon-num" data-line="crayon-5489271b93cef773722939-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cef773722939-6">6</div><div class="crayon-num" data-line="crayon-5489271b93cef773722939-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cef773722939-8">8</div><div class="crayon-num" data-line="crayon-5489271b93cef773722939-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cef773722939-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93cef773722939-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cef773722939-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93cef773722939-3"><span class="crayon-v">lista</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-cn">8</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">10</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cef773722939-4"><span class="crayon-v">listb</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">0.1</span><span class="crayon-sy">,</span><span class="crayon-cn">0.2</span><span class="crayon-sy">,</span><span class="crayon-cn">0.3</span><span class="crayon-sy">,</span><span class="crayon-cn">0.4</span><span class="crayon-sy">,</span><span class="crayon-cn">0.5</span><span class="crayon-sy">,</span><span class="crayon-cn">0.6</span><span class="crayon-sy">,</span><span class="crayon-cn">0.7</span><span class="crayon-sy">,</span><span class="crayon-cn">0.8</span><span class="crayon-sy">,</span><span class="crayon-cn">0.9</span><span class="crayon-sy">,</span><span class="crayon-cn">0.01</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93cef773722939-5"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cef773722939-6"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-i">lista</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93cef773722939-7"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-i">listb</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cef773722939-8"><span class="crayon-v">x</span><span class="crayon-o">=</span><span class="crayon-v">lista</span><span class="crayon-sy">[</span><span class="crayon-i">a</span><span class="crayon-sy">]</span><span class="crayon-o">+</span><span class="crayon-v">listb</span><span class="crayon-sy">[</span><span class="crayon-i">b</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93cef773722939-9"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cef773722939-10"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0041 seconds] -->
<p>现在进行如下优化，将长度计算提到循环外，range 用 xrange 代替，同时将第三层的计算 lista[a] 提到循环的第二层。</p>
<p><strong>清单 5. 循环优化后</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93cf9065007444" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
lista = [1,2,3,4,5,6,7,8,9,10]
listb =[0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,0.01]
len1=len(lista)
len2=len(listb)
for i in xrange (1000000):
for a in xrange(len1):
temp=lista[a]
for b in xrange(len2):
x=temp+listb[b]
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cf9065007444-2">2</div><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cf9065007444-4">4</div><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cf9065007444-6">6</div><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cf9065007444-8">8</div><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cf9065007444-10">10</div><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93cf9065007444-12">12</div><div class="crayon-num" data-line="crayon-5489271b93cf9065007444-13">13</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93cf9065007444-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cf9065007444-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93cf9065007444-3"><span class="crayon-v">lista</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-cn">8</span><span class="crayon-sy">,</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-cn">10</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cf9065007444-4"><span class="crayon-v">listb</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">0.1</span><span class="crayon-sy">,</span><span class="crayon-cn">0.2</span><span class="crayon-sy">,</span><span class="crayon-cn">0.3</span><span class="crayon-sy">,</span><span class="crayon-cn">0.4</span><span class="crayon-sy">,</span><span class="crayon-cn">0.5</span><span class="crayon-sy">,</span><span class="crayon-cn">0.6</span><span class="crayon-sy">,</span><span class="crayon-cn">0.7</span><span class="crayon-sy">,</span><span class="crayon-cn">0.8</span><span class="crayon-sy">,</span><span class="crayon-cn">0.9</span><span class="crayon-sy">,</span><span class="crayon-cn">0.01</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93cf9065007444-5"><span class="crayon-v">len1</span><span class="crayon-o">=</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-i">lista</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cf9065007444-6"><span class="crayon-v">len2</span><span class="crayon-o">=</span><span class="crayon-e">len</span><span class="crayon-sy">(</span><span class="crayon-i">listb</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93cf9065007444-7"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">xrange</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cf9065007444-8"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">xrange</span><span class="crayon-sy">(</span><span class="crayon-i">len1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93cf9065007444-9"><span class="crayon-v">temp</span><span class="crayon-o">=</span><span class="crayon-v">lista</span><span class="crayon-sy">[</span><span class="crayon-i">a</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cf9065007444-10"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">xrange</span><span class="crayon-sy">(</span><span class="crayon-i">len2</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93cf9065007444-11"><span class="crayon-v">x</span><span class="crayon-o">=</span><span class="crayon-i">temp</span><span class="crayon-o">+</span><span class="crayon-v">listb</span><span class="crayon-sy">[</span><span class="crayon-i">b</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93cf9065007444-12"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line" id="crayon-5489271b93cf9065007444-13"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0064 seconds] -->
<p><span style="line-height: 1.5em;">上述优化后的程序其运行时间缩短为 102.171999931。在清单 4 中 lista[a] 被计算的次数为 1000000*10*10，而在优化后的代码中被计算的次数为 1000000*10，计算次数大幅度缩短，因此性能有所提升。</span></p>
<p><strong>三、充分利用 Lazy if-evaluation 的特性</strong></p>
<p>python 中条件表达式是 lazy evaluation 的，也就是说如果存在条件表达式 if x and y，在 x 为 false 的情况下 y 表达式的值将不再计算。因此可以利用该特性在一定程度上提高程序效率。</p>
<p><strong>清单 6. 利用 Lazy if-evaluation 的特性</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d04361345026" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
abbreviations = ['cf.', 'e.g.', 'ex.', 'etc.', 'fig.', 'i.e.', 'Mr.', 'vs.']
for i in range (1000000):
for w in ('Mr.', 'Hat', 'is', 'chasing', 'the', 'black', 'cat', '.'):
if w in abbreviations:
#if w[-1] == '.' and w in abbreviations:
pass
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d04361345026-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d04361345026-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d04361345026-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d04361345026-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d04361345026-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d04361345026-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d04361345026-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d04361345026-8">8</div><div class="crayon-num" data-line="crayon-5489271b93d04361345026-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d04361345026-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d04361345026-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d04361345026-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93d04361345026-3"><span class="crayon-v">abbreviations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'cf.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'e.g.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'ex.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'etc.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'fig.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'i.e.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Mr.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'vs.'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d04361345026-4"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d04361345026-5"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">w</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">'Mr.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Hat'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'is'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'chasing'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'the'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'black'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'cat'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'.'</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d04361345026-6"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">w</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">abbreviations</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d04361345026-7"><span class="crayon-p">#if w[-1] == '.' and w in abbreviations:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d04361345026-8"><span class="crayon-e">pass</span></div><div class="crayon-line" id="crayon-5489271b93d04361345026-9"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d04361345026-10"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0039 seconds] -->
<p>在未进行优化之前程序的运行时间大概为 8.84，如果使用注释行代替第一个 if，运行的时间大概为 6.17。</p>
<p><strong>四、字符串的优化</strong></p>
<p>python 中的字符串对象是不可改变的，因此对任何字符串的操作如拼接，修改等都将产生一个新的字符串对象，而不是基于原字符串，因此这种持续的 copy 会在一定程度上影响 python 的性能。对字符串的优化也是改善性能的一个重要的方面，特别是在处理文本较多的情况下。字符串的优化主要集中在以下几个方面：</p>
<p>在字符串连接的使用尽量使用 join() 而不是 +：在代码清单 7 中使用 + 进行字符串连接大概需要 0.125 s，而使用 join 缩短为 0.016s。因此在字符的操作上 join 比 + 要快，因此要尽量使用 join 而不是 +。<br>
<strong>清单 7. 使用 join 而不是 + 连接字符串</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d10151853829" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time

t = time()
s = ""
list = ['a','b','b','d','e','f','g','h','i','j','k','l','m','n']
for i in range (10000):
for substr in list:
s+= substr
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d10151853829-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d10151853829-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d10151853829-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d10151853829-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d10151853829-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d10151853829-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d10151853829-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d10151853829-8">8</div><div class="crayon-num" data-line="crayon-5489271b93d10151853829-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d10151853829-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d10151853829-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d10151853829-2">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d10151853829-3"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d10151853829-4"><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span></div><div class="crayon-line" id="crayon-5489271b93d10151853829-5"><span class="crayon-v">list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'a'</span><span class="crayon-sy">,</span><span class="crayon-s">'b'</span><span class="crayon-sy">,</span><span class="crayon-s">'b'</span><span class="crayon-sy">,</span><span class="crayon-s">'d'</span><span class="crayon-sy">,</span><span class="crayon-s">'e'</span><span class="crayon-sy">,</span><span class="crayon-s">'f'</span><span class="crayon-sy">,</span><span class="crayon-s">'g'</span><span class="crayon-sy">,</span><span class="crayon-s">'h'</span><span class="crayon-sy">,</span><span class="crayon-s">'i'</span><span class="crayon-sy">,</span><span class="crayon-s">'j'</span><span class="crayon-sy">,</span><span class="crayon-s">'k'</span><span class="crayon-sy">,</span><span class="crayon-s">'l'</span><span class="crayon-sy">,</span><span class="crayon-s">'m'</span><span class="crayon-sy">,</span><span class="crayon-s">'n'</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d10151853829-6"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">10000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d10151853829-7"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">substr </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">list</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d10151853829-8"><span class="crayon-i">s</span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">substr</span></div><div class="crayon-line" id="crayon-5489271b93d10151853829-9"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d10151853829-10"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>&nbsp;</p>
<p>同时要避免：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d19561104679" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">s = ""
for x in list:
s += func(x)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d19561104679-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d19561104679-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d19561104679-3">3</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d19561104679-1"><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d19561104679-2"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">list</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d19561104679-3"><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">func</span><span class="crayon-sy">(</span><span class="crayon-i">x</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p>而是要使用：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d23069056025" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">slist = [func(elt) for elt in somelist]
s = "".join(slist)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d23069056025-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d23069056025-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d23069056025-1"><span class="crayon-v">slist</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">func</span><span class="crayon-sy">(</span><span class="crayon-i">elt</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">elt </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">somelist</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d23069056025-2"><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-i">slist</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>当对字符串可以使用正则表达式或者内置函数来处理的时候，选择内置函数。如 str.isalpha()，str.isdigit()，str.startswith((‘x’, ‘yz’))，str.endswith((‘x’, ‘yz’))<br>
对字符进行格式化比直接串联读取要快，因此要使用</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d2c639208095" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">out = "%s%s%s%s" % (head, prologue, query, tail)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d2c639208095-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d2c639208095-1"><span class="crayon-v">out</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"%s%s%s%s"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">head</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">prologue</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">query</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">tail</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p><span style="line-height: 1.5em;">而避免</span></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d35579496561" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">out = "" + head + prologue + query + tail + ""</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d35579496561-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d35579496561-1"><span class="crayon-v">out</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">head</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">prologue</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">query</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-i">tail</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">""</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p><strong>五、使用列表解析（list comprehension）和生成器表达式（generator expression）</strong></p>
<p>列表解析要比在循环中重新构建一个新的 list 更为高效，因此我们可以利用这一特性来提高运行的效率。</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d3f361335014" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
t = time()
list = ['a','b','is','python','jason','hello','hill','with','phone','test',
'dfdf','apple','pddf','ind','basic','none','baecr','var','bana','dd','wrd']
total=[]
for i in range (1000000):
for w in list:
total.append(w)
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d3f361335014-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d3f361335014-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d3f361335014-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d3f361335014-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d3f361335014-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d3f361335014-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d3f361335014-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d3f361335014-8">8</div><div class="crayon-num" data-line="crayon-5489271b93d3f361335014-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d3f361335014-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d3f361335014-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-i">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d3f361335014-2"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93d3f361335014-3"><span class="crayon-v">list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'a'</span><span class="crayon-sy">,</span><span class="crayon-s">'b'</span><span class="crayon-sy">,</span><span class="crayon-s">'is'</span><span class="crayon-sy">,</span><span class="crayon-s">'python'</span><span class="crayon-sy">,</span><span class="crayon-s">'jason'</span><span class="crayon-sy">,</span><span class="crayon-s">'hello'</span><span class="crayon-sy">,</span><span class="crayon-s">'hill'</span><span class="crayon-sy">,</span><span class="crayon-s">'with'</span><span class="crayon-sy">,</span><span class="crayon-s">'phone'</span><span class="crayon-sy">,</span><span class="crayon-s">'test'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d3f361335014-4"><span class="crayon-s">'dfdf'</span><span class="crayon-sy">,</span><span class="crayon-s">'apple'</span><span class="crayon-sy">,</span><span class="crayon-s">'pddf'</span><span class="crayon-sy">,</span><span class="crayon-s">'ind'</span><span class="crayon-sy">,</span><span class="crayon-s">'basic'</span><span class="crayon-sy">,</span><span class="crayon-s">'none'</span><span class="crayon-sy">,</span><span class="crayon-s">'baecr'</span><span class="crayon-sy">,</span><span class="crayon-s">'var'</span><span class="crayon-sy">,</span><span class="crayon-s">'bana'</span><span class="crayon-sy">,</span><span class="crayon-s">'dd'</span><span class="crayon-sy">,</span><span class="crayon-s">'wrd'</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93d3f361335014-5"><span class="crayon-v">total</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d3f361335014-6"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d3f361335014-7"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">w</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">list</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d3f361335014-8"><span class="crayon-v">total</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-i">w</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93d3f361335014-9"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d3f361335014-10"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0033 seconds] -->
<p>使用列表解析：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d49255301425" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">for i in range (1000000):
a = [w for w in list]</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d49255301425-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d49255301425-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d49255301425-1"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1000000</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d49255301425-2"><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">w</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">w</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-i">list</span><span class="crayon-sy">]</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>上述代码直接运行大概需要 17s，而改为使用列表解析后 ，运行时间缩短为 9.29s。将近提高了一半。生成器表达式则是在 2.4 中引入的新内容，语法和列表解析类似，但是在大数据量处理时，生成器表达式的优势较为明显，它并不创建一个列表，只是返回一个生成器，因此效率较高。在上述例子上中代码 a = [w for w in list] 修改为 a = (w for w in list)，运行时间进一步减少，缩短约为 2.98s。</p>
<p><strong>六、其他优化技巧</strong></p>
<p>1.如果需要交换两个变量的值使用 a,b=b,a 而不是借助中间变量 t=a;a=b;b=t；</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d53303198702" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">&gt;&gt;&gt; from timeit import Timer
&gt;&gt;&gt; Timer("t=a;a=b;b=t","a=1;b=2").timeit()
0.25154118749729365
&gt;&gt;&gt; Timer("a,b=b,a","a=1;b=2").timeit()
0.17156677734181258
&gt;&gt;&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d53303198702-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d53303198702-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d53303198702-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d53303198702-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d53303198702-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d53303198702-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d53303198702-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">from </span><span class="crayon-e">timeit </span><span class="crayon-e">import </span><span class="crayon-i">Timer</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d53303198702-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">Timer</span><span class="crayon-sy">(</span><span class="crayon-s">"t=a;a=b;b=t"</span><span class="crayon-sy">,</span><span class="crayon-s">"a=1;b=2"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">timeit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93d53303198702-3"><span class="crayon-cn">0.25154118749729365</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d53303198702-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">Timer</span><span class="crayon-sy">(</span><span class="crayon-s">"a,b=b,a"</span><span class="crayon-sy">,</span><span class="crayon-s">"a=1;b=2"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">timeit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93d53303198702-5"><span class="crayon-cn">0.17156677734181258</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d53303198702-6"><span class="crayon-o">&gt;&gt;&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0015 seconds] -->
<p>2.在循环的时候使用 xrange 而不是 range；使用 xrange 可以节省大量的系统内存，因为 xrange() 在序列中每次调用只产生一个整数元素。而 range() 將直接返回完整的元素列表，用于循环时会有不必要的开销。在 python3 中 xrange 不再存在，里面 range 提供一个可以遍历任意长度的范围的 iterator。<br>
3.使用局部变量，避免”global” 关键字。python 访问局部变量会比全局变量要快得多，因 此可以利用这一特性提升性能。<br>
4.if done is not None 比语句 if done != None 更快，读者可以自行验证；<br>
5.在耗时较多的循环中，可以把函数的调用改为内联的方式；<br>
6.使用级联比较 “x &lt; y &lt; z” 而不是 “x &lt; y and y &lt; z”；</p>
<p>7.while 1 要比 while True 更快（当然后者的可读性更好）；</p>
<p>8.build in 函数通常较快，add(a,b) 要优于 a+b。</p>
<p><strong>七、定位程序性能瓶颈 </strong></p>
<p>对代码优化的前提是需要了解性能瓶颈在什么地方，程序运行的主要时间是消耗在哪里，对于比较复杂的代码可以借助一些工具来定位，python 内置了丰富的性能分析工具，如 profile,cProfile 与 hotshot 等。其中 Profiler 是 python 自带的一组程序，能够描述程序运行时候的性能，并提供各种统计帮助用户定位程序的性能瓶颈。Python 标准模块提供三种 profilers:cProfile,profile 以及 hotshot。</p>
<p>profile 的使用非常简单，只需要在使用之前进行 import 即可。</p>
<p>具体实例如下：</p>
<p><strong>清单 8. 使用 profile 进行性能分析</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d5f991937010" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">import profile

def profileTest():

Total =1;

for i in range(10):

Total=Total*(i+1)

print Total

return Total

if __name__ == "__main__":

profile.run("profileTest()")</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-8">8</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-10">10</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-12">12</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-14">14</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d5f991937010-16">16</div><div class="crayon-num" data-line="crayon-5489271b93d5f991937010-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d5f991937010-1"><span class="crayon-e">import </span><span class="crayon-e">profile</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-2">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-3"><span class="crayon-e">def </span><span class="crayon-e">profileTest</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-4">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-5"><span class="crayon-v">Total</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-6">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-7"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-8">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-9"><span class="crayon-v">Total</span><span class="crayon-o">=</span><span class="crayon-e ">Total*</span><span class="crayon-sy">(</span><span class="crayon-i">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-10">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-11"><span class="crayon-e">print </span><span class="crayon-e">Total</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-12">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-13"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">Total</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-14">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-15"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d5f991937010-16">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d5f991937010-17"><span class="crayon-v">profile</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-s">"profileTest()"</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0021 seconds] -->
<p>&nbsp;</p>
<p>程序的运行结果如下：</p>
<p><strong>图 1. 性能分析结果 </strong></p>
<p><a href="./Python 代码性能优化技巧   Sina App Engine Blog_files/image001.png"><img class="alignnone size-full wp-image-5466" alt="image001" src="./Python 代码性能优化技巧   Sina App Engine Blog_files/image001.png" width="572" height="334"></a></p>
<p>其中输出每列的具体解释如下：</p>
<p>ncalls：表示函数调用的次数；</p>
<p>tottime：表示指定函数的总的运行时间，除掉函数中调用子函数的运行时间；</p>
<p>percall：（第一个 percall）等于 tottime/ncalls；</p>
<p>cumtime：表示该函数及其所有子函数的调用运行的时间，即函数开始调用到返回的时间；</p>
<p>percall：（第二个 percall）即函数运行一次的平均时间，等于 cumtime/ncalls；</p>
<p>filename:lineno(function)：每个函数调用的具体信息； 如果需要将输出以日志的形式保存，只需要在调用的时候加入另外一个参数。如 profile.run(“profileTest()”,”testprof”)。 对于 profile 的剖析数据，如果以二进制文件的时候保存结果的时候，可以通过 pstats 模块进行文本报表分析，它支持多种形式的报表输出，是文本界面下一个较为实用的工具。</p>
<p>使用非常简单：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d6a213162801" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">import pstats

p = pstats.Stats('testprof')

p.sort_stats("name").print_stats()</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d6a213162801-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d6a213162801-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d6a213162801-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d6a213162801-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d6a213162801-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d6a213162801-1"><span class="crayon-e">import </span><span class="crayon-i">pstats</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d6a213162801-2">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d6a213162801-3"><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pstats</span><span class="crayon-sy">.</span><span class="crayon-e">Stats</span><span class="crayon-sy">(</span><span class="crayon-s">'testprof'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d6a213162801-4">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d6a213162801-5"><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-e">sort_stats</span><span class="crayon-sy">(</span><span class="crayon-s">"name"</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">print_stats</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0012 seconds] -->
<p>&nbsp;</p>
<p>其中 sort_stats() 方法能够对剖分数据进行排序， 可以接受多个排序字段，如 sort_stats(‘name’, ‘file’) 将首先按照函数名称进行排序，然后再按照文件名进行排序。常见的排序字段有 calls( 被调用的次数 )，time（函数内部运行时间），cumulative（运行的总时间）等。此外 pstats 也提供了命令行交互工具，执行 python – m pstats 后可以通过 help 了解更多使用方式。</p>
<p>对于大型应用程序，如果能够将性能分析的结果以图形的方式呈现，将会非常实用和直观，常见的可视化工具有 Gprof2Dot，visualpytune，KCacheGrind 等，读者可以自行查阅相关官网，本文不做详细讨论。</p>
<p><strong>八、Python 性能优化工具</strong></p>
<p><strong></strong> Python 性能优化除了改进算法，选用合适的数据结构之外，还有几种关键的技术，比如将关键 python 代码部分重写成 C 扩展模块，或者选用在性能上更为优化的解释器等，这些在本文中统称为优化工具。python 有很多自带的优化工具，如 Psyco，Pypy，Cython，Pyrex 等，这些优化工具各有千秋，本节选择几种进行介绍。</p>
<p><strong> Psyco </strong></p>
<p>psyco 是一个 just-in-time 的编译器，它能够在不改变源代码的情况下提高一定的性能，Psyco 将操作编译成有点优化的机器码，其操作分成三个不同的级别，有”运行时”、”编译时”和”虚拟时”变量。并根据需要提高和降低变量的级别。运行时变量只是常规 Python 解释器处理的原始字节码和对象结构。一旦 Psyco 将操作编译成机器码，那么编译时变量就会在机器寄存器和可直接访问的内存位置中表示。同时 python 能高速缓存已编译的机器码以备今后重用，这样能节省一点时间。但 Psyco 也有其缺点，其本身运行所占内存较大。目前 psyco 已经不在 python2.7 中支持，而且不再提供维护和更新了，对其感兴趣的可以参考 http://psyco.sourceforge.net/</p>
<p><strong>Pypy </strong></p>
<p>PyPy 表示 “用 Python 实现的 Python”，但实际上它是使用一个称为 RPython 的 Python 子集实现的，能够将 Python 代码转成 C， .NET， Java 等语言和平台的代码。PyPy 集成了一种即时 (JIT) 编译器。和许多编译器，解释器不同，它不关心 Python 代码的词法分析和语法树。 因为它是用 Python 语言写的，所以它直接利用 Python 语言的 Code Object.。 Code Object 是 Python 字节码的表示，也就是说， PyPy 直接分析 Python 代码所对应的字节码 ,，这些字节码即不是以字符形式也不是以某种二进制格式保存在文件中， 而在 Python 运行环境中。目前版本是 1.8. 支持不同的平台安装，windows 上安装 Pypy 需要先下载 https://bitbucket.org/pypy/pypy/downloads/pypy-1.8-win32.zip，然后解压到相关的目录，并将解压后的路径添加到环境变量 path 中即可。在命令行运行 pypy，如果出现如下错误：”没有找到 MSVCR100.dll, 因此这个应用程序未能启动，重新安装应用程序可能会修复此问题”，则还需要在微软的官网上下载 VS 2010 runtime libraries 解决该问题。具体地址为http://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;id=5555</p>
<p>安装成功后在命令行里运行 pypy，输出结果如下：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d79357978104" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">C:\Documents and Settings\Administrator&gt;pypy
Python 2.7.2 (0e28b379d8b3, Feb 09 2012, 18:31:47)
[PyPy 1.8.0 with MSC v.1500 32 bit] on win32
Type "help", "copyright", "credits" or "license" for more information.
And now for something completely different: ``PyPy is vast, and contains
multitudes''
&gt;&gt;&gt;&gt;</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d79357978104-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d79357978104-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d79357978104-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d79357978104-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d79357978104-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d79357978104-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d79357978104-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d79357978104-1"><span class="crayon-i">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-e">Documents </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-i">Settings</span><span class="crayon-sy">\</span><span class="crayon-i">Administrator</span><span class="crayon-o">&gt;</span><span class="crayon-e">pypy</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d79357978104-2"><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0e28b379d8b3</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">Feb</span><span class="crayon-h"> </span><span class="crayon-cn">09</span><span class="crayon-h"> </span><span class="crayon-cn">2012</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">18</span><span class="crayon-o">:</span><span class="crayon-cn">31</span><span class="crayon-o">:</span><span class="crayon-cn">47</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93d79357978104-3"><span class="crayon-sy">[</span><span class="crayon-i">PyPy</span><span class="crayon-h"> </span><span class="crayon-cn">1.8.0</span><span class="crayon-h"> </span><span class="crayon-e">with </span><span class="crayon-i">MSC</span><span class="crayon-h"> </span><span class="crayon-v">v</span><span class="crayon-sy">.</span><span class="crayon-cn">1500</span><span class="crayon-h"> </span><span class="crayon-cn">32</span><span class="crayon-h"> </span><span class="crayon-i">bit</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">on </span><span class="crayon-e">win32</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d79357978104-4"><span class="crayon-i">Type</span><span class="crayon-h"> </span><span class="crayon-s">"help"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"copyright"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"credits"</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-s">"license"</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">more </span><span class="crayon-v">information</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93d79357978104-5"><span class="crayon-st">And</span><span class="crayon-h"> </span><span class="crayon-e">now </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">something </span><span class="crayon-e">completely </span><span class="crayon-i">different</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-sy">`</span><span class="crayon-e">PyPy </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-i">vast</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">contains</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d79357978104-6"><span class="crayon-i">multitudes</span><span class="crayon-s">''</span></div><div class="crayon-line" id="crayon-5489271b93d79357978104-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-o">&gt;</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0041 seconds] -->
<p>以清单 5 的循环为例子，使用 python 和 pypy 分别运行，得到的运行结果分别如下：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d83517675566" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">C:\Documents and Settings\Administrator\ 桌面 \doc\python&gt;pypy loop.py
total run time:
8.42199993134

C:\Documents and Settings\Administrator\ 桌面 \doc\python&gt;python loop.py
total run time:
106.391000032</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d83517675566-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d83517675566-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d83517675566-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d83517675566-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d83517675566-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d83517675566-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d83517675566-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d83517675566-1"><span class="crayon-i">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-e">Documents </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-i">Settings</span><span class="crayon-sy">\</span><span class="crayon-i">Administrator</span><span class="crayon-sy">\</span><span class="crayon-h"> </span>桌面<span class="crayon-h"> </span><span class="crayon-sy">\</span><span class="crayon-i">doc</span><span class="crayon-sy">\</span><span class="crayon-i">python</span><span class="crayon-o">&gt;</span><span class="crayon-e">pypy </span><span class="crayon-v">loop</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d83517675566-2"><span class="crayon-e">total </span><span class="crayon-e">run </span><span class="crayon-i">time</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d83517675566-3"><span class="crayon-cn">8.42199993134</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d83517675566-4">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d83517675566-5"><span class="crayon-i">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-e">Documents </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-i">Settings</span><span class="crayon-sy">\</span><span class="crayon-i">Administrator</span><span class="crayon-sy">\</span><span class="crayon-h"> </span>桌面<span class="crayon-h"> </span><span class="crayon-sy">\</span><span class="crayon-i">doc</span><span class="crayon-sy">\</span><span class="crayon-i">python</span><span class="crayon-o">&gt;</span><span class="crayon-e">python </span><span class="crayon-v">loop</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d83517675566-6"><span class="crayon-e">total </span><span class="crayon-e">run </span><span class="crayon-i">time</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93d83517675566-7"><span class="crayon-cn">106.391000032</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0029 seconds] -->
<p>&nbsp;</p>
<p>可见使用 pypy 来编译和运行程序，其效率大大的提高。</p>
<p><strong>Cython</strong></p>
<p>Cython 是用 python 实现的一种语言，可以用来写 python 扩展，用它写出来的库都可以通过 import 来载入，性能上比 python 的快。cython 里可以载入 python 扩展 ( 比如 import math)，也可以载入 c 的库的头文件 ( 比如 :cdef extern from “math.h”)，另外也可以用它来写 python 代码。将关键部分重写成 C 扩展模块</p>
<p>Linux Cpython 的安装：</p>
<p><strong>第一步：下载</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d8d273724123" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[root@v5254085f259 cpython]# wget -N http://cython.org/release/Cython-0.15.1.zip
--2012-04-16 22:08:35-- http://cython.org/release/Cython-0.15.1.zip
Resolving cython.org... 128.208.160.197
Connecting to cython.org|128.208.160.197|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 2200299 (2.1M) [application/zip]
Saving to: `Cython-0.15.1.zip'

100%[======================================&gt;] 2,200,299 1.96M/s in 1.1s

2012-04-16 22:08:37 (1.96 MB/s) - `Cython-0.15.1.zip' saved [2200299/2200299]</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d8d273724123-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d8d273724123-2">2</div><div class="crayon-num" data-line="crayon-5489271b93d8d273724123-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d8d273724123-4">4</div><div class="crayon-num" data-line="crayon-5489271b93d8d273724123-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d8d273724123-6">6</div><div class="crayon-num" data-line="crayon-5489271b93d8d273724123-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d8d273724123-8">8</div><div class="crayon-num" data-line="crayon-5489271b93d8d273724123-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93d8d273724123-10">10</div><div class="crayon-num" data-line="crayon-5489271b93d8d273724123-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d8d273724123-1"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">cpython</span><span class="crayon-sy">]</span><span class="crayon-p"># wget -N http://cython.org/release/Cython-0.15.1.zip</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d8d273724123-2"><span class="crayon-o">--</span><span class="crayon-cn">2012</span><span class="crayon-o">-</span><span class="crayon-cn">04</span><span class="crayon-o">-</span><span class="crayon-cn">16</span><span class="crayon-h"> </span><span class="crayon-cn">22</span><span class="crayon-o">:</span><span class="crayon-cn">08</span><span class="crayon-o">:</span><span class="crayon-cn">35</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">http</span><span class="crayon-o">:</span><span class="crayon-c">//cython.org/release/Cython-0.15.1.zip</span></div><div class="crayon-line" id="crayon-5489271b93d8d273724123-3"><span class="crayon-e">Resolving </span><span class="crayon-v">cython</span><span class="crayon-sy">.</span><span class="crayon-v">org</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-cn">128.208.160.197</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d8d273724123-4"><span class="crayon-e">Connecting </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">cython</span><span class="crayon-sy">.</span><span class="crayon-i">org</span><span class="crayon-o">|</span><span class="crayon-cn">128.208.160.197</span><span class="crayon-o">|</span><span class="crayon-o">:</span><span class="crayon-cn">80...</span><span class="crayon-h"> </span><span class="crayon-v">connected</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93d8d273724123-5"><span class="crayon-e">HTTP </span><span class="crayon-e">request </span><span class="crayon-i">sent</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">awaiting </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-h"> </span><span class="crayon-e">OK</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d8d273724123-6"><span class="crayon-i">Length</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">2200299</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">2.1M</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">application</span><span class="crayon-o">/</span><span class="crayon-i">zip</span><span class="crayon-sy">]</span></div><div class="crayon-line" id="crayon-5489271b93d8d273724123-7"><span class="crayon-e">Saving </span><span class="crayon-st">to</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">`</span><span class="crayon-i">Cython</span><span class="crayon-o">-</span><span class="crayon-cn">0.15.1.zip</span><span class="crayon-s">'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d8d273724123-8">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d8d273724123-9"><span class="crayon-s">100%[======================================&gt;] 2,200,299 1.96M/s in 1.1s</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93d8d273724123-10">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93d8d273724123-11"><span class="crayon-s">2012-04-16 22:08:37 (1.96 MB/s) - `Cython-0.15.1.zip'</span><span class="crayon-h"> </span><span class="crayon-v">saved</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">2200299</span><span class="crayon-o">/</span><span class="crayon-cn">2200299</span><span class="crayon-sy">]</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0036 seconds] -->
<p>&nbsp;</p>
<p><strong>第二步：解压</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93d98369540363" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[root@v5254085f259 cpython]# unzip -o Cython-0.15.1.zip</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93d98369540363-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93d98369540363-1"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">cpython</span><span class="crayon-sy">]</span><span class="crayon-p"># unzip -o Cython-0.15.1.zip</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0006 seconds] -->
<p>&nbsp;</p>
<p><strong style="line-height: 1.5em;">第三步：安装</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93da2131185148" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">python setup.py install</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93da2131185148-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93da2131185148-1"><span class="crayon-e">python </span><span class="crayon-v">setup</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-i">install</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p><span style="line-height: 1.5em;">安装完成后直接输入 cython，如果出现如下内容则表明安装成功。</span></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93dab119051856" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[root@v5254085f259 Cython-0.15.1]# cython
Cython (http://cython.org) is a compiler for code written in the
Cython language. Cython is based on Pyrex by Greg Ewing.

Usage: cython [options] sourcefile.{pyx,py} ...

Options:
-V, --version Display version number of cython compiler
-l, --create-listing Write error messages to a listing file
-I, --include-dir Search for include files in named directory
(multiple include directories are allowed).
-o, --output-file Specify name of generated C file
-t, --timestamps Only compile newer source files
-f, --force Compile all source files (overrides implied -t)
-q, --quiet Don't print module names in recursive mode
-v, --verbose Be verbose, print file names on multiple compil ation
-p, --embed-positions If specified, the positions in Cython files of each
function definition is embedded in its docstring.
--cleanup
Release interned objects on python exit, for memory debugging.
Level indicates aggressiveness, default 0 releases nothing.
-w, --working
Sets the working directory for Cython (the directory modules are searched from)
--gdb Output debug information for cygdb
-D, --no-docstrings
Strip docstrings from the compiled module.
-a, --annotate
Produce a colorized HTML version of the source.
--line-directives
Produce #line directives pointing to the .pyx source
--cplus
Output a C++ rather than C file.
--embed[=&lt;method_name&gt;]
Generate a main() function that embeds the Python interpreter.
-2 Compile based on Python-2 syntax and code seman tics.
-3 Compile based on Python-3 syntax and code seman tics.
--fast-fail Abort the compilation on the first error
--warning-error, -Werror Make all warnings into errors
--warning-extra, -Wextra Enable extra warnings
-X, --directive =
[,&lt;name=value,...] overrides="" a="" compiler="" directive=""</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93dab119051856-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-2">2</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-4">4</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-6">6</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-8">8</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-10">10</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-12">12</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-14">14</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-16">16</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-18">18</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-20">20</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-22">22</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-24">24</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-26">26</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-28">28</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-30">30</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-32">32</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-34">34</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-36">36</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-38">38</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dab119051856-40">40</div><div class="crayon-num" data-line="crayon-5489271b93dab119051856-41">41</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93dab119051856-1"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">Cython</span><span class="crayon-o">-</span><span class="crayon-cn">0.15.1</span><span class="crayon-sy">]</span><span class="crayon-p"># cython</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-2"><span class="crayon-e">Cython</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">http</span><span class="crayon-o">:</span><span class="crayon-c">//cython.org) is a compiler for code written in the</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-3"><span class="crayon-e">Cython </span><span class="crayon-v">language</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Cython </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">based </span><span class="crayon-e">on </span><span class="crayon-e">Pyrex </span><span class="crayon-e">by </span><span class="crayon-e">Greg </span><span class="crayon-v">Ewing</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-4">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93dab119051856-5"><span class="crayon-i">Usage</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">cython</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">options</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">sourcefile</span><span class="crayon-sy">.</span><span class="crayon-sy">{</span><span class="crayon-i">pyx</span><span class="crayon-sy">,</span><span class="crayon-i">py</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-6">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93dab119051856-7"><span class="crayon-i">Options</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-8"><span class="crayon-o">-</span><span class="crayon-i">V</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">version </span><span class="crayon-e">Display </span><span class="crayon-e">version </span><span class="crayon-e">number </span><span class="crayon-e">of </span><span class="crayon-e">cython </span><span class="crayon-i">compiler</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-9"><span class="crayon-o">-</span><span class="crayon-i">l</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">create</span><span class="crayon-o">-</span><span class="crayon-e">listing </span><span class="crayon-e">Write </span><span class="crayon-e">error </span><span class="crayon-e">messages </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">listing </span><span class="crayon-i">file</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-10"><span class="crayon-o">-</span><span class="crayon-i">I</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">include</span><span class="crayon-o">-</span><span class="crayon-e">dir </span><span class="crayon-e">Search </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">include </span><span class="crayon-e">files </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">named </span><span class="crayon-e">directory</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-11"><span class="crayon-sy">(</span><span class="crayon-e">multiple </span><span class="crayon-e">include </span><span class="crayon-e">directories </span><span class="crayon-e">are </span><span class="crayon-i">allowed</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-12"><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">output</span><span class="crayon-o">-</span><span class="crayon-e">file </span><span class="crayon-e">Specify </span><span class="crayon-e">name </span><span class="crayon-e">of </span><span class="crayon-i">generated</span><span class="crayon-h"> </span><span class="crayon-i">C</span><span class="crayon-h"> </span><span class="crayon-i">file</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-13"><span class="crayon-o">-</span><span class="crayon-i">t</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">timestamps </span><span class="crayon-e">Only </span><span class="crayon-e">compile </span><span class="crayon-e">newer </span><span class="crayon-e">source </span><span class="crayon-i">files</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-14"><span class="crayon-o">-</span><span class="crayon-i">f</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">force </span><span class="crayon-e">Compile </span><span class="crayon-e">all </span><span class="crayon-e">source </span><span class="crayon-e">files</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">overrides </span><span class="crayon-i">implied</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">t</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-15"><span class="crayon-o">-</span><span class="crayon-i">q</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">quiet </span><span class="crayon-i">Don</span>'<span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-e">print </span><span class="crayon-e">module </span><span class="crayon-e">names </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">recursive </span><span class="crayon-i">mode</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-16"><span class="crayon-o">-</span><span class="crayon-i">v</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">verbose </span><span class="crayon-e">Be </span><span class="crayon-i">verbose</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">print </span><span class="crayon-e">file </span><span class="crayon-e">names </span><span class="crayon-e">on </span><span class="crayon-e">multiple </span><span class="crayon-e">compil </span><span class="crayon-i">ation</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-17"><span class="crayon-o">-</span><span class="crayon-i">p</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">embed</span><span class="crayon-o">-</span><span class="crayon-e">positions </span><span class="crayon-st">If</span><span class="crayon-h"> </span><span class="crayon-i">specified</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">the </span><span class="crayon-e">positions </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">Cython </span><span class="crayon-e">files </span><span class="crayon-e">of </span><span class="crayon-st">each</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-18"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">definition </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">embedded </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">its </span><span class="crayon-v">docstring</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-19"><span class="crayon-o">--</span><span class="crayon-e">cleanup</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-20"><span class="crayon-e">Release </span><span class="crayon-e">interned </span><span class="crayon-e">objects </span><span class="crayon-e">on </span><span class="crayon-e">python </span><span class="crayon-i">exit</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">memory </span><span class="crayon-v">debugging</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-21"><span class="crayon-e">Level </span><span class="crayon-e">indicates </span><span class="crayon-i">aggressiveness</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">default</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">releases </span><span class="crayon-v">nothing</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-22"><span class="crayon-o">-</span><span class="crayon-i">w</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">working</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-23"><span class="crayon-e">Sets </span><span class="crayon-e">the </span><span class="crayon-e">working </span><span class="crayon-e">directory </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">Cython</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">the </span><span class="crayon-e">directory </span><span class="crayon-e">modules </span><span class="crayon-e">are </span><span class="crayon-e">searched </span><span class="crayon-i">from</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-24"><span class="crayon-o">--</span><span class="crayon-e">gdb </span><span class="crayon-e">Output </span><span class="crayon-e">debug </span><span class="crayon-e">information </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">cygdb</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-25"><span class="crayon-o">-</span><span class="crayon-i">D</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-i">no</span><span class="crayon-o">-</span><span class="crayon-e">docstrings</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-26"><span class="crayon-e">Strip </span><span class="crayon-e">docstrings </span><span class="crayon-e">from </span><span class="crayon-e">the </span><span class="crayon-e">compiled </span><span class="crayon-v">module</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-27"><span class="crayon-o">-</span><span class="crayon-i">a</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">annotate</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-28"><span class="crayon-i">Produce</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">colorized </span><span class="crayon-e">HTML </span><span class="crayon-e">version </span><span class="crayon-e">of </span><span class="crayon-e">the </span><span class="crayon-v">source</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-29"><span class="crayon-o">--</span><span class="crayon-i">line</span><span class="crayon-o">-</span><span class="crayon-e">directives</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-30"><span class="crayon-i">Produce</span><span class="crayon-h"> </span><span class="crayon-p">#line directives pointing to the .pyx source</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-31"><span class="crayon-o">--</span><span class="crayon-e">cplus</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-32"><span class="crayon-i">Output</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-i">C</span><span class="crayon-o">++</span><span class="crayon-h"> </span><span class="crayon-e">rather </span><span class="crayon-i">than</span><span class="crayon-h"> </span><span class="crayon-i">C</span><span class="crayon-h"> </span><span class="crayon-v">file</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-33"><span class="crayon-o">--</span><span class="crayon-v">embed</span><span class="crayon-sy">[</span><span class="crayon-o">=</span><span class="crayon-o">&lt;</span><span class="crayon-i">method_name</span><span class="crayon-o">&gt;</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-34"><span class="crayon-i">Generate</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">that </span><span class="crayon-e">embeds </span><span class="crayon-e">the </span><span class="crayon-e">Python </span><span class="crayon-v">interpreter</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-35"><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">Compile </span><span class="crayon-e">based </span><span class="crayon-e">on </span><span class="crayon-i">Python</span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">syntax </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">code </span><span class="crayon-e">seman </span><span class="crayon-v">tics</span><span class="crayon-sy">.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-36"><span class="crayon-o">-</span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">Compile </span><span class="crayon-e">based </span><span class="crayon-e">on </span><span class="crayon-i">Python</span><span class="crayon-o">-</span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">syntax </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">code </span><span class="crayon-e">seman </span><span class="crayon-v">tics</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-37"><span class="crayon-o">--</span><span class="crayon-i">fast</span><span class="crayon-o">-</span><span class="crayon-e">fail </span><span class="crayon-e">Abort </span><span class="crayon-e">the </span><span class="crayon-e">compilation </span><span class="crayon-e">on </span><span class="crayon-e">the </span><span class="crayon-e">first </span><span class="crayon-i">error</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-38"><span class="crayon-o">--</span><span class="crayon-i">warning</span><span class="crayon-o">-</span><span class="crayon-i">error</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">Werror </span><span class="crayon-e">Make </span><span class="crayon-e">all </span><span class="crayon-e">warnings </span><span class="crayon-e">into </span><span class="crayon-i">errors</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-39"><span class="crayon-o">--</span><span class="crayon-i">warning</span><span class="crayon-o">-</span><span class="crayon-i">extra</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">Wextra </span><span class="crayon-e">Enable </span><span class="crayon-e">extra </span><span class="crayon-i">warnings</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dab119051856-40"><span class="crayon-o">-</span><span class="crayon-i">X</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">directive</span><span class="crayon-h"> </span><span class="crayon-o">=</span></div><div class="crayon-line" id="crayon-5489271b93dab119051856-41"><span class="crayon-sy">[</span><span class="crayon-sy">,</span><span class="crayon-o">&lt;</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-i">value</span><span class="crayon-sy">,</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">overrides</span><span class="crayon-o">=</span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-o">=</span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-v">compiler</span><span class="crayon-o">=</span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-v">directive</span><span class="crayon-o">=</span><span class="crayon-s">""</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0181 seconds] -->
<p>其他平台上的安装可以参考文档：http://docs.cython.org/src/quickstart/install.html<br>
Cython 代码与 python 不同，必须先编译，编译一般需要经过两个阶段，将 pyx 文件编译为 .c 文件，再将 .c 文件编译为 .so 文件。编译有多种方法：</p>
<ul>
<li>通过命令行编译：</li>
</ul>
<p>假设有如下测试代码，使用命令行编译为 .c 文件。</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93db8703357005" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">def sum(int a,int b): 
print a+b

[root@v5254085f259 test]# cython sum.pyx 
[root@v5254085f259 test]# ls 
total 76 
4 drwxr-xr-x 2 root root 4096 Apr 17 02:45 . 
4 drwxr-xr-x 4 root root 4096 Apr 16 22:20 .. 
4 -rw-r--r-- 1 root root 35 Apr 17 02:45 1 
60 -rw-r--r-- 1 root root 55169 Apr 17 02:45 sum.c 
4 -rw-r--r-- 1 root root 35 Apr 17 02:45 sum.pyx</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93db8703357005-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93db8703357005-2">2</div><div class="crayon-num" data-line="crayon-5489271b93db8703357005-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93db8703357005-4">4</div><div class="crayon-num" data-line="crayon-5489271b93db8703357005-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93db8703357005-6">6</div><div class="crayon-num" data-line="crayon-5489271b93db8703357005-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93db8703357005-8">8</div><div class="crayon-num" data-line="crayon-5489271b93db8703357005-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93db8703357005-10">10</div><div class="crayon-num" data-line="crayon-5489271b93db8703357005-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93db8703357005-1"><span class="crayon-e">def </span><span class="crayon-e">sum</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-sy">,</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-i">b</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93db8703357005-2"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-o">+</span><span class="crayon-v">b</span></div><div class="crayon-line" id="crayon-5489271b93db8703357005-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93db8703357005-4"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># cython sum.pyx </span></div><div class="crayon-line" id="crayon-5489271b93db8703357005-5"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># ls </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93db8703357005-6"><span class="crayon-i">total</span><span class="crayon-h"> </span><span class="crayon-cn">76</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93db8703357005-7"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-i">drwxr</span><span class="crayon-o">-</span><span class="crayon-i">xr</span><span class="crayon-o">-</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">4096</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93db8703357005-8"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-i">drwxr</span><span class="crayon-o">-</span><span class="crayon-i">xr</span><span class="crayon-o">-</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">4096</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">16</span><span class="crayon-h"> </span><span class="crayon-cn">22</span><span class="crayon-o">:</span><span class="crayon-cn">20</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93db8703357005-9"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rw</span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">35</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93db8703357005-10"><span class="crayon-cn">60</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rw</span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">55169</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">c</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93db8703357005-11"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rw</span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">35</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">pyx</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0064 seconds] -->
<p>&nbsp;</p>
<p>在 linux 上利用 gcc 编译为 .so 文件：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93dc3491719809" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[root@v5254085f259 test]# gcc -shared -pthread -fPIC -fwrapv -O2 
-Wall -fno-strict-aliasing -I/usr/include/python2.4 -o sum.so sum.c 
[root@v5254085f259 test]# ls 
total 96 
4 drwxr-xr-x 2 root root 4096 Apr 17 02:47 . 
4 drwxr-xr-x 4 root root 4096 Apr 16 22:20 .. 
4 -rw-r--r-- 1 root root 35 Apr 17 02:45 1 
60 -rw-r--r-- 1 root root 55169 Apr 17 02:45 sum.c 
4 -rw-r--r-- 1 root root 35 Apr 17 02:45 sum.pyx 
20 -rwxr-xr-x 1 root root 20307 Apr 17 02:47 sum.so</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93dc3491719809-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dc3491719809-2">2</div><div class="crayon-num" data-line="crayon-5489271b93dc3491719809-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dc3491719809-4">4</div><div class="crayon-num" data-line="crayon-5489271b93dc3491719809-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dc3491719809-6">6</div><div class="crayon-num" data-line="crayon-5489271b93dc3491719809-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dc3491719809-8">8</div><div class="crayon-num" data-line="crayon-5489271b93dc3491719809-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dc3491719809-10">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93dc3491719809-1"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># gcc -shared -pthread -fPIC -fwrapv -O2 </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dc3491719809-2"><span class="crayon-o">-</span><span class="crayon-i">Wall</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">fno</span><span class="crayon-o">-</span><span class="crayon-i">strict</span><span class="crayon-o">-</span><span class="crayon-i">aliasing</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">I</span><span class="crayon-o">/</span><span class="crayon-i">usr</span><span class="crayon-o">/</span><span class="crayon-i">include</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-sy">.</span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-e">so </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-v">c</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dc3491719809-3"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># ls </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dc3491719809-4"><span class="crayon-i">total</span><span class="crayon-h"> </span><span class="crayon-cn">96</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dc3491719809-5"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-i">drwxr</span><span class="crayon-o">-</span><span class="crayon-i">xr</span><span class="crayon-o">-</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">4096</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">47</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dc3491719809-6"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-i">drwxr</span><span class="crayon-o">-</span><span class="crayon-i">xr</span><span class="crayon-o">-</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">4096</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">16</span><span class="crayon-h"> </span><span class="crayon-cn">22</span><span class="crayon-o">:</span><span class="crayon-cn">20</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dc3491719809-7"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rw</span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">35</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dc3491719809-8"><span class="crayon-cn">60</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rw</span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">55169</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">c</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dc3491719809-9"><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rw</span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-i">r</span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">35</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">45</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">pyx</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dc3491719809-10"><span class="crayon-cn">20</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">rwxr</span><span class="crayon-o">-</span><span class="crayon-i">xr</span><span class="crayon-o">-</span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-e">root </span><span class="crayon-i">root</span><span class="crayon-h"> </span><span class="crayon-cn">20307</span><span class="crayon-h"> </span><span class="crayon-i">Apr</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-h"> </span><span class="crayon-cn">02</span><span class="crayon-o">:</span><span class="crayon-cn">47</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">so</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0079 seconds] -->
<p>&nbsp;</p>
<p>&nbsp;</p>
<ul>
<li>使用 distutils 编译</li>
</ul>
<p>建立一个 setup.py 的脚本：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93dce709508029" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from distutils.core import setup 
from distutils.extension import Extension 
from Cython.Distutils import build_ext

ext_modules = [Extension("sum", ["sum.pyx"])]

setup( 
name = 'sum app', 
cmdclass = {'build_ext': build_ext}, 
ext_modules = ext_modules 
)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93dce709508029-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dce709508029-2">2</div><div class="crayon-num" data-line="crayon-5489271b93dce709508029-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dce709508029-4">4</div><div class="crayon-num" data-line="crayon-5489271b93dce709508029-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dce709508029-6">6</div><div class="crayon-num" data-line="crayon-5489271b93dce709508029-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dce709508029-8">8</div><div class="crayon-num" data-line="crayon-5489271b93dce709508029-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dce709508029-10">10</div><div class="crayon-num" data-line="crayon-5489271b93dce709508029-11">11</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93dce709508029-1"><span class="crayon-e">from </span><span class="crayon-v">distutils</span><span class="crayon-sy">.</span><span class="crayon-e">core </span><span class="crayon-e">import </span><span class="crayon-e">setup </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dce709508029-2"><span class="crayon-e">from </span><span class="crayon-v">distutils</span><span class="crayon-sy">.</span><span class="crayon-e">extension </span><span class="crayon-e">import </span><span class="crayon-e">Extension </span></div><div class="crayon-line" id="crayon-5489271b93dce709508029-3"><span class="crayon-e">from </span><span class="crayon-v">Cython</span><span class="crayon-sy">.</span><span class="crayon-e">Distutils </span><span class="crayon-e">import </span><span class="crayon-e">build_ext</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dce709508029-4">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93dce709508029-5"><span class="crayon-v">ext_modules</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-e">Extension</span><span class="crayon-sy">(</span><span class="crayon-s">"sum"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"sum.pyx"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dce709508029-6">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93dce709508029-7"><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dce709508029-8"><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'sum app'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dce709508029-9"><span class="crayon-v">cmdclass</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">'build_ext'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">build_ext</span><span class="crayon-sy">}</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dce709508029-10"><span class="crayon-v">ext_modules</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">ext_modules</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dce709508029-11"><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0027 seconds] -->
<p>&nbsp;</p>
<p>&nbsp;</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93dd8340902767" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[root@v5254085f259 test]# python setup.py build_ext --inplace 
running build_ext 
cythoning sum.pyx to sum.c 
building 'sum' extension 
gcc -pthread -fno-strict-aliasing -fPIC -g -O2 -DNDEBUG -g -fwrapv -O3 
-Wall -Wstrict-prototypes -fPIC -I/opt/ActivePython-2.7/include/python2.7 
-c sum.c -o build/temp.linux-x86_64-2.7/sum.o 
gcc -pthread -shared build/temp.linux-x86_64-2.7/sum.o 
-o /root/cpython/test/sum.so</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93dd8340902767-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dd8340902767-2">2</div><div class="crayon-num" data-line="crayon-5489271b93dd8340902767-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dd8340902767-4">4</div><div class="crayon-num" data-line="crayon-5489271b93dd8340902767-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dd8340902767-6">6</div><div class="crayon-num" data-line="crayon-5489271b93dd8340902767-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93dd8340902767-8">8</div><div class="crayon-num" data-line="crayon-5489271b93dd8340902767-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93dd8340902767-1"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># python setup.py build_ext --inplace </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dd8340902767-2"><span class="crayon-e">running </span><span class="crayon-e">build_ext </span></div><div class="crayon-line" id="crayon-5489271b93dd8340902767-3"><span class="crayon-e">cythoning </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-e">pyx </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">c</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dd8340902767-4"><span class="crayon-i">building</span><span class="crayon-h"> </span><span class="crayon-s">'sum'</span><span class="crayon-h"> </span><span class="crayon-e">extension </span></div><div class="crayon-line" id="crayon-5489271b93dd8340902767-5"><span class="crayon-i">gcc</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">pthread</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">fno</span><span class="crayon-o">-</span><span class="crayon-i">strict</span><span class="crayon-o">-</span><span class="crayon-i">aliasing</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">fPIC</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">g</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">O2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">DNDEBUG</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">g</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">fwrapv</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">O3</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dd8340902767-6"><span class="crayon-o">-</span><span class="crayon-i">Wall</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">Wstrict</span><span class="crayon-o">-</span><span class="crayon-i">prototypes</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">fPIC</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">I</span><span class="crayon-o">/</span><span class="crayon-i">opt</span><span class="crayon-o">/</span><span class="crayon-i">ActivePython</span><span class="crayon-o">-</span><span class="crayon-cn">2.7</span><span class="crayon-o">/</span><span class="crayon-i">include</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-sy">.</span><span class="crayon-cn">7</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dd8340902767-7"><span class="crayon-o">-</span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-i">build</span><span class="crayon-o">/</span><span class="crayon-v">temp</span><span class="crayon-sy">.</span><span class="crayon-i">linux</span><span class="crayon-o">-</span><span class="crayon-i">x86_64</span><span class="crayon-o">-</span><span class="crayon-cn">2.7</span><span class="crayon-o">/</span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">o</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93dd8340902767-8"><span class="crayon-i">gcc</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">pthread</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">shared </span><span class="crayon-i">build</span><span class="crayon-o">/</span><span class="crayon-v">temp</span><span class="crayon-sy">.</span><span class="crayon-i">linux</span><span class="crayon-o">-</span><span class="crayon-i">x86_64</span><span class="crayon-o">-</span><span class="crayon-cn">2.7</span><span class="crayon-o">/</span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">o</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93dd8340902767-9"><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-i">root</span><span class="crayon-o">/</span><span class="crayon-i">cpython</span><span class="crayon-o">/</span><span class="crayon-i">test</span><span class="crayon-o">/</span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-i">so</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0052 seconds] -->
<p>编译完成之后可以导入到 python 中使用：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93de2652264131" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[root@v5254085f259 test]# python 
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on 
Python 2.7.2 (default, Jun 24 2011, 11:24:26) 
[GCC 4.0.2 20051125 (Red Hat 4.0.2-8)] on linux2 
Type "help", "copyright", "credits" or "license" for more information. 
&gt;&gt;&gt; import pyximport; pyximport.install() 
&gt;&gt;&gt; import sum 
&gt;&gt;&gt; sum.sum(1,3)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93de2652264131-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93de2652264131-2">2</div><div class="crayon-num" data-line="crayon-5489271b93de2652264131-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93de2652264131-4">4</div><div class="crayon-num" data-line="crayon-5489271b93de2652264131-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93de2652264131-6">6</div><div class="crayon-num" data-line="crayon-5489271b93de2652264131-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93de2652264131-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93de2652264131-1"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># python </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93de2652264131-2"><span class="crayon-i">ActivePython</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2.5</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">ActiveState </span><span class="crayon-e">Software </span><span class="crayon-v">Inc</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-e">based </span><span class="crayon-e">on </span></div><div class="crayon-line" id="crayon-5489271b93de2652264131-3"><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-st">default</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">Jun</span><span class="crayon-h"> </span><span class="crayon-cn">24</span><span class="crayon-h"> </span><span class="crayon-cn">2011</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-o">:</span><span class="crayon-cn">24</span><span class="crayon-o">:</span><span class="crayon-cn">26</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93de2652264131-4"><span class="crayon-sy">[</span><span class="crayon-i">GCC</span><span class="crayon-h"> </span><span class="crayon-cn">4.0.2</span><span class="crayon-h"> </span><span class="crayon-cn">20051125</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">Red </span><span class="crayon-i">Hat</span><span class="crayon-h"> </span><span class="crayon-cn">4.0.2</span><span class="crayon-o">-</span><span class="crayon-cn">8</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">on </span><span class="crayon-e">linux2 </span></div><div class="crayon-line" id="crayon-5489271b93de2652264131-5"><span class="crayon-i">Type</span><span class="crayon-h"> </span><span class="crayon-s">"help"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"copyright"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"credits"</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-s">"license"</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">more </span><span class="crayon-v">information</span><span class="crayon-sy">.</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93de2652264131-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">import </span><span class="crayon-i">pyximport</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">pyximport</span><span class="crayon-sy">.</span><span class="crayon-e">install</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5489271b93de2652264131-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">import </span><span class="crayon-i">sum</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93de2652264131-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">sum</span><span class="crayon-sy">.</span><span class="crayon-e">sum</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0041 seconds] -->
<p>下面来进行一个简单的性能比较：</p>
<p><strong>清单 9. Cython 测试代码</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93ded322173998" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
def test(int n):
cdef int a =0
cdef int i
for i in xrange(n):
a+= i
return a

t = time()
test(10000000)
print "total run time:"
print time()-t</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93ded322173998-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ded322173998-2">2</div><div class="crayon-num" data-line="crayon-5489271b93ded322173998-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ded322173998-4">4</div><div class="crayon-num" data-line="crayon-5489271b93ded322173998-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ded322173998-6">6</div><div class="crayon-num" data-line="crayon-5489271b93ded322173998-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ded322173998-8">8</div><div class="crayon-num" data-line="crayon-5489271b93ded322173998-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ded322173998-10">10</div><div class="crayon-num" data-line="crayon-5489271b93ded322173998-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93ded322173998-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93ded322173998-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-e">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ded322173998-2"><span class="crayon-e">def </span><span class="crayon-e">test</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93ded322173998-3"><span class="crayon-e">cdef </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ded322173998-4"><span class="crayon-e">cdef </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-i">i</span></div><div class="crayon-line" id="crayon-5489271b93ded322173998-5"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">xrange</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ded322173998-6"><span class="crayon-i">a</span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">i</span></div><div class="crayon-line" id="crayon-5489271b93ded322173998-7"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-i">a</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ded322173998-8">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93ded322173998-9"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ded322173998-10"><span class="crayon-e">test</span><span class="crayon-sy">(</span><span class="crayon-cn">10000000</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93ded322173998-11"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93ded322173998-12"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-i">t</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0026 seconds] -->
<p>&nbsp;</p>
<p>测试结果：</p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93df7585829813" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">[GCC 4.0.2 20051125 (Red Hat 4.0.2-8)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import pyximport; pyximport.install()
&gt;&gt;&gt; import ctest
total run time:
0.00714015960693</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93df7585829813-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93df7585829813-2">2</div><div class="crayon-num" data-line="crayon-5489271b93df7585829813-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93df7585829813-4">4</div><div class="crayon-num" data-line="crayon-5489271b93df7585829813-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93df7585829813-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93df7585829813-1"><span class="crayon-sy">[</span><span class="crayon-i">GCC</span><span class="crayon-h"> </span><span class="crayon-cn">4.0.2</span><span class="crayon-h"> </span><span class="crayon-cn">20051125</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">Red </span><span class="crayon-i">Hat</span><span class="crayon-h"> </span><span class="crayon-cn">4.0.2</span><span class="crayon-o">-</span><span class="crayon-cn">8</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">on </span><span class="crayon-e">linux2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93df7585829813-2"><span class="crayon-i">Type</span><span class="crayon-h"> </span><span class="crayon-s">"help"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"copyright"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"credits"</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-s">"license"</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">more </span><span class="crayon-v">information</span><span class="crayon-sy">.</span></div><div class="crayon-line" id="crayon-5489271b93df7585829813-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">import </span><span class="crayon-i">pyximport</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">pyximport</span><span class="crayon-sy">.</span><span class="crayon-e">install</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93df7585829813-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">import </span><span class="crayon-e">ctest</span></div><div class="crayon-line" id="crayon-5489271b93df7585829813-5"><span class="crayon-e">total </span><span class="crayon-e">run </span><span class="crayon-i">time</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93df7585829813-6"><span class="crayon-cn">0.00714015960693</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0024 seconds] -->
<p><strong>清单 10. Python 测试代码</strong></p><!-- Crayon Syntax Highlighter v2.4.3 -->

		<div id="crayon-5489271b93e01867037681" class="crayon-syntax crayon-theme-twilight crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; float: none; clear: both; font-size: 12px !important; line-height: 16px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="切换显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="off" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 16px !important; z-index: 0; opacity: 0; overflow: hidden;">from time import time
def test(n):
a =0;
for i in xrange(n):
a+= i
return a

t = time()
test(10000000)
print "total run time:"
print time()-t

[root@v5254085f259 test]# python test.py
total run time:
0.971596002579</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-num" data-line="crayon-5489271b93e01867037681-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-2">2</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-4">4</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-6">6</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-8">8</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-10">10</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-12">12</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5489271b93e01867037681-14">14</div><div class="crayon-num" data-line="crayon-5489271b93e01867037681-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 16px !important;"><div class="crayon-line" id="crayon-5489271b93e01867037681-1"><span class="crayon-e">from </span><span class="crayon-e">time </span><span class="crayon-e">import </span><span class="crayon-e">time</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-2"><span class="crayon-e">def </span><span class="crayon-e">test</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93e01867037681-3"><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-4"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">xrange</span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93e01867037681-5"><span class="crayon-i">a</span><span class="crayon-o">+</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">i</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-6"><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-i">a</span></div><div class="crayon-line" id="crayon-5489271b93e01867037681-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-8"><span class="crayon-v">t</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5489271b93e01867037681-9"><span class="crayon-e">test</span><span class="crayon-sy">(</span><span class="crayon-cn">10000000</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-10"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"total run time:"</span></div><div class="crayon-line" id="crayon-5489271b93e01867037681-11"><span class="crayon-e">print </span><span class="crayon-e">time</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-v">t</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-12">&nbsp;</div><div class="crayon-line" id="crayon-5489271b93e01867037681-13"><span class="crayon-sy">[</span><span class="crayon-i">root</span><span class="crayon-sy">@</span><span class="crayon-e">v5254085f259 </span><span class="crayon-i">test</span><span class="crayon-sy">]</span><span class="crayon-p"># python test.py</span></div><div class="crayon-line crayon-striped-line" id="crayon-5489271b93e01867037681-14"><span class="crayon-e">total </span><span class="crayon-e">run </span><span class="crayon-i">time</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5489271b93e01867037681-15"><span class="crayon-cn">0.971596002579</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0027 seconds] -->
<p>&nbsp;</p>
<p>从上述对比可以看到使用 Cython 的速度提高了将近 100 多倍。</p>
<p><strong>总结</strong></p>
<p>本文初步探讨了 python 常见的性能优化技巧以及如何借助工具来定位和分析程序的性能瓶颈，并提供了相关可以进行性能优化的工具或语言，希望能够更相关人员一些参考。</p>
<p>文章来自：http://www.ibm.com/developerworks/cn/linux/l-cn-python-optim/</p>
     </div>
    <ul class="meta2 cf">
         <li class="post_category"><a href="http://blog.sae.sina.com.cn/archives/category/workshop" title="查看技术分享中的全部文章" rel="category tag">技术分享</a></li>
                     <li class="post_author"><a href="http://blog.sae.sina.com.cn/archives/author/admin" title="由遇见sharon发布" rel="author">遇见sharon</a></li>
     </ul>
   </div><!-- END .post -->

 
  




  <div id="comments">

 


 
  <div class="comment_closed" id="respond">
   Comment are closed.  </div>

 </div><!-- #comment end --> 
  <div id="prev_next_post_single" class="cf">
  <p class="prev_post"><a href="http://blog.sae.sina.com.cn/archives/5459" rel="prev">从MVC框架看MVC架构的设计</a></p>  <p class="next_post"><a href="http://blog.sae.sina.com.cn/archives/5477" rel="next">kmp算法实现原理及简单示例</a></p> </div>
 
</div><!-- #left_col -->

<div id="right_col">
 <div class="side_widget widget_categories first_widget" id="categories-3">
<h3 class="headline">类别</h3>
		<ul>
	<li class="cat-item cat-item-1"><a href="http://blog.sae.sina.com.cn/archives/category/sae-development" title="查看sae新服务下的所有文章">sae新服务</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.sae.sina.com.cn/archives/category/sae%e6%96%b0%e9%97%bb" title="查看SAE新闻下的所有文章">SAE新闻</a>
</li>
	<li class="cat-item cat-item-85"><a href="http://blog.sae.sina.com.cn/archives/category/sae%e6%9c%88%e5%88%8a" title="查看SAE月刊下的所有文章">SAE月刊</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://blog.sae.sina.com.cn/archives/category/%e5%bc%80%e5%8f%91%e5%9b%a2%e9%98%9f" title="查看开发团队下的所有文章">开发团队</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://blog.sae.sina.com.cn/archives/category/%e5%bc%80%e6%ba%90%e9%a1%b9%e7%9b%ae" title="查看开源项目下的所有文章">开源项目</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://blog.sae.sina.com.cn/archives/category/workshop" title="查看技术分享下的所有文章">技术分享</a>
</li>
	<li class="cat-item cat-item-69"><a href="http://blog.sae.sina.com.cn/archives/category/%e6%8b%9b%e8%81%98%e9%80%9a%e7%9f%a5" title="查看招聘通知下的所有文章">招聘通知</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://blog.sae.sina.com.cn/archives/category/%e6%9c%8d%e5%8a%a1%e9%80%9a%e7%9f%a5" title="查看服务通知下的所有文章">服务通知</a>
</li>
	<li class="cat-item cat-item-70"><a href="http://blog.sae.sina.com.cn/archives/category/%e7%a8%8b%e5%ba%8f%e4%ba%ba%e7%94%9f" title="查看程序人生下的所有文章">程序人生</a>
</li>
		</ul>
</div>
<div class="side_widget widget_search" id="search-3">
<h3 class="headline">搜索</h3>
<form role="search" method="get" id="searchform" class="searchform" action="http://blog.sae.sina.com.cn/">
				<div>
					<label class="screen-reader-text" for="s">搜索：</label>
					<input type="text" value="" name="s" id="s">
					<input type="submit" id="searchsubmit" value="搜索">
				</div>
			</form></div>
		<div class="side_widget widget_recent_entries" id="recent-posts-3">
		<h3 class="headline">最新文章</h3>
		<ul>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5581">7个高性能JavaScript代码高亮插件</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5577">修复bug的12个关键步骤</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5572">Instagram工程师教你如何改善App的性能</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5569">5种你未必知道的JavaScript和CSS交互的方法</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5547">机器学习常见算法分类汇总</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5533">大型网站系统架构演化之路</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5518">Web开发者必备的11个精华版JavaScript工具</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5513">10个对开发项目有害的编程习惯</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5510">关于Java的10个谎言</a>
						</li>
					<li>
				<a href="http://blog.sae.sina.com.cn/archives/5507">如何用JavaScript获取图片的真实尺寸大小</a>
						</li>
				</ul>
		</div>
<div class="side_widget widget_recent_comments" id="recent-comments-3">
<h3 class="headline">最新评论</h3>
<ul id="recentcomments"><li class="recentcomments">遇见sharon发表在《<a href="http://blog.sae.sina.com.cn/archives/5206/comment-page-1#comment-62819">对于Linux系统管理员很有用的16个在线工具</a>》</li><li class="recentcomments"><a href="https://farm4.staticflickr.com/3836/14691847171_11b47365e9_b.jpg" rel="external nofollow" class="url">T_T_TT_</a>发表在《<a href="http://blog.sae.sina.com.cn/archives/5380/comment-page-1#comment-62818">感悟：谈谈编程中的哲学，数学，基础，理论，思考与经验</a>》</li><li class="recentcomments">zhang发表在《<a href="http://blog.sae.sina.com.cn/archives/5368/comment-page-1#comment-62816">常用排序算法之JavaScript实现</a>》</li><li class="recentcomments">def发表在《<a href="http://blog.sae.sina.com.cn/archives/5291/comment-page-1#comment-62682">加快网站访问速度的9大方法</a>》</li><li class="recentcomments"><a href="http://crazyof.me/blog/" rel="external nofollow" class="url">_zero</a>发表在《<a href="http://blog.sae.sina.com.cn/archives/5206/comment-page-1#comment-62286">对于Linux系统管理员很有用的16个在线工具</a>》</li><li class="recentcomments"><a href="http://jkun.me/" rel="external nofollow" class="url">JKUN</a>发表在《<a href="http://blog.sae.sina.com.cn/archives/5151/comment-page-1#comment-62087">9个最好用的在线编译/调试工具</a>》</li><li class="recentcomments"><a href="https://farm4.staticflickr.com/3836/14691847171_11b47365e9_b.jpg" rel="external nofollow" class="url">T_T_TT_</a>发表在《<a href="http://blog.sae.sina.com.cn/archives/5115/comment-page-1#comment-62001">linux下杀死进程的N种方法</a>》</li><li class="recentcomments">Silver Bullet发表在《<a href="http://blog.sae.sina.com.cn/archives/5037/comment-page-1#comment-61980">利用 Linux 系统生成随机密码的10种方法</a>》</li><li class="recentcomments">foo发表在《<a href="http://blog.sae.sina.com.cn/archives/4999/comment-page-1#comment-61979">取代cookie的网站追踪技术：”帆布指纹识别”初探</a>》</li><li class="recentcomments">Veitor发表在《<a href="http://blog.sae.sina.com.cn/archives/4912/comment-page-1#comment-61917">2014 年 15 款新评定的最佳 PHP 框架</a>》</li></ul></div>
<div class="side_widget widget_archive" id="archives-3">
<h3 class="headline">归档</h3>
		<ul>
			<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/10">2014年十月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/09">2014年九月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/08">2014年八月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/07">2014年七月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/06">2014年六月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/05">2014年五月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/04">2014年四月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/03">2014年三月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/02">2014年二月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2014/01">2014年一月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2013/12">2013年十二月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2013/11">2013年十一月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2013/10">2013年十月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2013/09">2013年九月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2013/08">2013年八月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2011/03">2011年三月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2011/02">2011年二月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/11">2010年十一月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/10">2010年十月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/09">2010年九月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/08">2010年八月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/06">2010年六月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/05">2010年五月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/04">2010年四月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/03">2010年三月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2010/02">2010年二月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2009/12">2009年十二月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2009/11">2009年十一月</a></li>
	<li><a href="http://blog.sae.sina.com.cn/archives/date/2009/10">2009年十月</a></li>
		</ul>
</div>
<div class="side_widget widget_links" id="linkcat-2">
<h3 class="headline">Blogroll</h3>

	<ul class="xoxo blogroll">
<li><a href="http://sae.sina.com.cn/doc/" target="_blank">SAE 开发文档中心</a></li>
<li><a href="http://twitter.com/sina_app_engine">SAE官方twitter</a></li>
<li><a href="http://weibo.com/saet">SAE官方微博</a></li>
<li><a href="http://sae.sina.com.cn/" title="SAE在线管理平台">Sina App Engine</a></li>
<li><a href="http://open.weibo.com/blog/" title="微博开放平台官方博客">微博开放平台</a></li>
<li><a href="http://t.sina.com.cn/sinard">新浪研发中心微博</a></li>
<li><a href="http://sina.com.cn/" title="服务于中国及全球华人社群的领先在线媒体及移动增值服务提供商">新浪网</a></li>
<li><a href="http://blog.sina.com.cn/sinardblog">新浪网研发中心</a></li>

	</ul>
</div>

<div class="side_widget widget_text" id="text-3">
			<div class="textwidget"></div>
		</div>
<div class="side_widget widget_text" id="text-6">
			<div class="textwidget"></div>
		</div>
</div>


  </div><!-- END #main_content -->

  <div id="breadcrumb_area">
      
<ul id="bread_crumb" class="cf">
 <li><a href="http://blog.sae.sina.com.cn/">首页</a></li>

 <li><a href="http://blog.sae.sina.com.cn/archives/category/workshop" title="查看技术分享中的全部文章">技术分享</a></li>
 <li class="last">Python 代码性能优化技巧</li>

</ul>

         <p id="return_top"><a href="http://blog.sae.sina.com.cn/archives/5465#content">回到顶部</a></p>
     </div>

 </div><!-- END #content -->

 <div id="footer_wrap">
  <div id="footer">

   
   <ul id="copyright" class="cf">
    <li>Copyright ©&nbsp; <a target="_blank" class="sae-logo" href="http://blog.sae.sina.com.cn/">Sina App Engine Blog</a></li>
    <li>Theme designed by <a target="_blank" class="mono-lab-logo target_blank" rel="external nofollow" href="http://www.mono-lab.net/">mono-lab</a></li>
    <li class="last">Powered by <a class="target_blank wordpress-logo" target="_blank" href="http://wordpress.org/">WordPress</a></li>
   </ul>

  </div><!-- END #footer -->
 </div>



</body></html>