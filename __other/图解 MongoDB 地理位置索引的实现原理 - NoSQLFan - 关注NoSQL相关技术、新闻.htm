<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0039)http://blog.nosqlfan.com/html/1811.html -->
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="zh-CN"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" async="" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/ga.js"></script>


<meta name="distribution" content="global">
<meta name="robots" content="follow, all">
<meta name="language" content="en">

<title>  图解 MongoDB 地理位置索引的实现原理 -  NoSQLFan - 关注NoSQL相关技术、新闻</title>
<link rel="Shortcut Icon" href="http://blog.nosqlfan.com/wp-content/themes/wumiao/images/nosqlfan.ico" type="image/x-icon">
<link rel="stylesheet" href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/style.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="NoSQLFan RSS Feed" href="http://blog.nosqlfan.com/feed">
<link rel="alternate" type="application/atom+xml" title="NoSQLFan Atom Feed" href="http://blog.nosqlfan.com/feed/atom">
<link rel="pingback" href="http://blog.nosqlfan.com/xmlrpc.php">

<link rel="alternate" type="application/rss+xml" title="NoSQLFan » 图解 MongoDB 地理位置索引的实现原理 评论 Feed" href="http://blog.nosqlfan.com/html/1811.html/feed">
<script type="text/javascript">
var duoshuoQuery = {"short_name":"nosqlfan","sso":{"login":"http:\/\/blog.nosqlfan.com\/wp-login.php?action=duoshuo_login","logout":"http:\/\/blog.nosqlfan.com\/wp-login.php?action=logout&_wpnonce=d49cffe54e"},"remote_auth":"W10= c925fa130cdb9b7c0c3024643d978d7410d26979 1415929501"};
duoshuoQuery.sso.login += '&redirect_to=' + encodeURIComponent(window.location.href);
duoshuoQuery.sso.logout += '&redirect_to=' + encodeURIComponent(window.location.href);
</script><style type="text/css"></style>
<script type="text/javascript" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/comment-reply.js"></script>
<script type="text/javascript" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/embed.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.nosqlfan.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.nosqlfan.com/wp-includes/wlwmanifest.xml"> 
<link rel="index" title="NoSQLFan" href="http://blog.nosqlfan.com/">
<link rel="start" title="追溯NoSQL的历史" href="http://blog.nosqlfan.com/html/8.html">
<link rel="prev" title="CouchDB1.1.0发布：原生SSL支持，HTTP range支持等" href="http://blog.nosqlfan.com/html/1793.html">
<link rel="next" title="RethinkDB简介" href="http://blog.nosqlfan.com/html/1824.html">
<meta name="generator" content="WordPress 2.9.2">
<link rel="canonical" href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻.htm">

<!-- Start Of Script Generated By WP-PostViews 1.50 -->
<script type="text/javascript" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/jquery.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
jQuery.ajax({type:'GET',url:'http://blog.nosqlfan.com/wp-content/plugins/wp-postviews/wp-postviews.php',data:'postviews_id=1811',cache:false});/* ]]> */
</script>
<!-- End Of Script Generated By WP-PostViews 1.50 -->
<meta name="wumiiVerification" content="6c06924b-76ba-4b14-a126-84e83d8e19fd">

	<!-- Generated by Simple Tags 1.7.4.4 - http://wordpress.org/extend/plugins/simple-tags -->
	<meta name="keywords" content="MongoDB, 索引, Foursquare, 地理位置, geospatial index, geohash, LBS">
<!-- add for google analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8840813-3']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/related_items_v2"></script><link type="text/css" rel="stylesheet" href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/embed.default.css"></head>

<body>

<div id="header">

    <div class="headerleft">
        <h1><a href="http://blog.nosqlfan.com/">NoSQLFan</a></h1>
        <p>关注NoSQL相关的新闻与技术</p>
    </div>
		
	<div class="headerright">  
	<ul id="nav">
        <li class="page_item page-item-2668"><a href="http://blog.nosqlfan.com/books" title="NoSQL书籍">NoSQL书籍</a></li>
<li class="page_item page-item-1914"><a href="http://blog.nosqlfan.com/newslist" title="分类列表">分类列表</a></li>
<li class="page_item page-item-2"><a href="http://blog.nosqlfan.com/about" title="关于本站">关于本站</a></li>
        <li class="page_item"><a href="http://10gt.com/circle/NoSQL" title="NoSQL讨论区" target="_blank">NoSQL讨论区</a></li>
	</ul>    
	</div>
</div>

<div class="clear line"></div>

<div id="wrap">
<div id="content">

	<div id="contentleft">
	
		<div class="postarea">

						<h2 class="posttitle">图解 MongoDB 地理位置索引的实现原理</h2>
            	
                <div class="postauthor">
            
            		<p>作者：<a href="http://blog.nosqlfan.com/html/author/nosqlfan/" title="由 nosqlfan 发表">nosqlfan</a> on 星期四, 六月 9, 2011 · <a href="http://blog.nosqlfan.com/html/1811.html#comments"><var class="ds-comments-number" data-thread-identifier="1811 http://blog.nosqlfan.com/?p=1811">3条评论</var></a>&nbsp;【阅读：10,173 次】</p>
                    
                </div>
             <!-- add share -->
             
             <!-- add share end -->
			 <!--add for bbs -->
<!--
			<p style="color:red;border:solid 1px #E6E6E6;background:#F7F7F7;padding:10px;font-size:16px;margin-bottom:15px;font-weight: bold;">NoSQL相关论坛 <a href="http://bbs.nosqlfan.com">bbs.nosqlfan.com</a> 开通！欢迎参与讨论。</p>
-->
			 <!--add for bbs -->
			<p><a href="http://www.mongodb.org/display/DOCS/Geospatial+Indexing">地理位置索引</a>支持是<span class="wp_keywordlink_affiliate"><a href="http://blog.nosqlfan.com/tags/mongodb" title="查看 MongoDB 的全部文章" target="_blank">MongoDB</a></span>的一大亮点，这也是全球最流行的<span class="wp_keywordlink_affiliate"><a href="http://blog.nosqlfan.com/tags/lbs" title="查看 LBS 的全部文章" target="_blank">LBS</a></span>服务foursquare 选择MongoDB的原因之一。我们知道，通常的数据库<span class="wp_keywordlink_affiliate"><a href="http://blog.nosqlfan.com/tags/%e7%b4%a2%e5%bc%95" title="查看 索引 的全部文章" target="_blank">索引</a></span>结构是B+ Tree，如何将<span class="wp_keywordlink_affiliate"><a href="http://blog.nosqlfan.com/tags/%e5%9c%b0%e7%90%86%e4%bd%8d%e7%bd%ae" title="查看 地理位置 的全部文章" target="_blank">地理位置</a></span>转化为可建立B+Tree的形式，下文将为你描述。</p>
<p>首先假设我们将需要索引的整个地图分成16×16的方格，如下图（左下角为坐标0,0 右上角为坐标16,16）：</p>
<p><a href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map1.png"><img class="alignnone size-full wp-image-1812" title="map1" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map1.png" alt="" width="300" height="300"></a></p>
<p>单纯的［x，y］的数据是无法建立索引的，所以MongoDB在建立索引的时候，会根据相应字段的坐标计算一个可以用来做索引的hash值，这个值叫做<span class="wp_keywordlink_affiliate"><a href="http://blog.nosqlfan.com/tags/geohash" title="查看 geohash 的全部文章" target="_blank">geohash</a></span>，下面我们以地图上坐标为［4，6］的点（图中红叉位置）为例。</p>
<p>我们第一步将整个地图分成等大小的四块，如下图：</p>
<p><a href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map2.png"><img class="alignnone size-full wp-image-1813" title="map2" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map2.png" alt="" width="300" height="300"></a></p>
<p>划分成四块后我们可以定义这四块的值，如下（左下为00，左上为01，右下为10，右上为11）：</p>
<table border="1">
<tbody>
<tr>
<td>01</td>
<td>11</td>
</tr>
<tr>
<td>00</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>这样［4，6］点的geohash值目前为 00</p>
<p>然后再将四个小块每一块进行切割，如下：</p>
<p><a href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map3.png"><img class="alignnone size-full wp-image-1814" title="map3" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map3.png" alt="" width="300" height="300"></a></p>
<p>这时［4，6］点位于右上区域，右上的值为11，这样［4，6］点的geohash值变为：0011</p>
<p>继续往下做两次切分：</p>
<p><a href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map4.png"><img class="alignnone size-full wp-image-1815" title="map4" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map4.png" alt="" width="300" height="300"></a></p>
<p><a href="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map5.png"><img class="alignnone size-full wp-image-1816" title="map5" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/map5.png" alt="" width="300" height="300"></a></p>
<p>最终得到［4，6］点的geohash值为：00110100</p>
<p>这样我们用这个值来做索引，则地图上点相近的点就可以转化成有相同前缀的geohash值了。</p>
<p>我们可以看到，这个geohash值的精确度是与划分地图的次数成正比的，上例对地图划分了四次。而MongoDB默认是进行26次划分，这个值在建立索引时是可控的。具体建立二维地理位置索引的命令如下：</p>
<pre lang="shell">db.map.ensureIndex({point : "2d"}, {min : 0, max : 16, bits : 4})</pre>
<p>其中的bits参数就是划分几次，默认为26次。</p>
<p>相关链接：<a href="http://www.snailinaturtleneck.com/blog/2011/06/08/mongo-in-flatland/">Mongo in Flatland</a><br>
<!-- Begin anyShare --></p>
<link rel="stylesheet" href="http://blog.nosqlfan.com/wp-content/plugins/anyshare/anyShare.css?v=5">
<table id="anyShare">
<tbody><tr>
<td id="AS-TXT"><i>anyShare</i><b>据说看到好文章不转的人，服务器容易宕机！</b></td>
<td id="AS-IMG" rowspan="2"><img src="http://chart.apis.google.com/chart?cht=qr&chld=|0&choe=UTF-8&chs=75x75&chl=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html"></td>
</tr>
<tr>
<td id="AS-BTN"><a id="sntwet" title="新浪微博" href="http://v.t.sina.com.cn/share/share.php?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&title=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="qqtwet" title="腾讯微博" href="http://v.t.qq.com/share/share.php?appkey=2e295ab2ff8245229d96fa3768a9f779&url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&title=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="qqzone" title="腾讯空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html" target="_blank">&nbsp;</a><a id="renren" title="人人社区" href="http://share.renren.com/share/buttonshare.do?link=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&title=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="kaixin" title="开心社区" href="http://www.kaixin001.com/repaste/share.php?rurl=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&rtitle=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="douban" title="豆瓣社区" href="http://www.douban.com/recommend/?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&title=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="bdcang" title="百度搜藏" href="http://cang.baidu.com/do/add?iu=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&it=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="folow5" title="Follow5" href="http://www.follow5.com/f5/discuz/sharelogin.jsp?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html&title=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20" target="_blank">&nbsp;</a><a id="facebk" title="facebook" href="http://www.facebook.com/share.php?u=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html" target="_blank">&nbsp;</a><a id="twiter" title="twitter" href="http://twitter.com/home?status=%E5%9B%BE%E8%A7%A3%20MongoDB%20%E5%9C%B0%E7%90%86%E4%BD%8D%E7%BD%AE%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%20%E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan%20-http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html" target="_blank">&nbsp;</a><br clear="all"></td>
</tr>
</tbody></table>
<p><!-- anyShare Endof --></p>
<div class="wumii-hook"><div class="wumii-related-items-div" wmode="1" style="margin: 0; border: none; padding: 0; clear: both; overflow: hidden; *zoom: 1; *position: relative;">
    
    
    
        <div class="wumii-internal" style="padding: 0; margin: 0; border: none; clear: both; display: block;">
        <div class="wumii-widget-title" style="margin: 0; border: none; padding: 20px 0 5px; _padding-top:10px; text-indent: 0; text-align: left; font-weight: bold; ">相关文章：</div>
                <ul class="wumii-text-ul" style="padding: 0; margin: 0 0 0 1px;" fromurl="http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F1811.html"><li class="wumii-text-li" style="list-style: disc inside none; display: list-item; line-height: 1.65em; background: none repeat scroll 0 0 transparent; padding: 0; margin: 0; text-indent: 0; text-align: left; font-size: 14px;">
    <a class="wumii-text-a" hidefocus="true" onmouseout="this.style.textDecoration=&#39;none&#39;" onmouseover="this.style.textDecoration=&#39;underline&#39;" href="http://blog.nosqlfan.com/html/2101.html" style="text-decoration: none; border-bottom: none; outline: none; color: #333333;" redirecturl=""><span>Foursquare的MongoDB存储实践</span></a>
</li><li class="wumii-text-li" style="list-style: disc inside none; display: list-item; line-height: 1.65em; background: none repeat scroll 0 0 transparent; padding: 0; margin: 0; text-indent: 0; text-align: left; font-size: 14px;">
    <a class="wumii-text-a" hidefocus="true" onmouseout="this.style.textDecoration=&#39;none&#39;" onmouseover="this.style.textDecoration=&#39;underline&#39;" href="http://blog.nosqlfan.com/html/3656.html" style="text-decoration: none; border-bottom: none; outline: none; color: #333333;" redirecturl=""><span>MongoDB索引实战技巧</span></a>
</li><li class="wumii-text-li" style="list-style: disc inside none; display: list-item; line-height: 1.65em; background: none repeat scroll 0 0 transparent; padding: 0; margin: 0; text-indent: 0; text-align: left; font-size: 14px;">
    <a class="wumii-text-a" hidefocus="true" onmouseout="this.style.textDecoration=&#39;none&#39;" onmouseover="this.style.textDecoration=&#39;underline&#39;" href="http://blog.nosqlfan.com/html/758.html" style="text-decoration: none; border-bottom: none; outline: none; color: #333333;" redirecturl=""><span>MongoDB的索引使用及索引机制</span></a>
</li><li class="wumii-text-li" style="list-style: disc inside none; display: list-item; line-height: 1.65em; background: none repeat scroll 0 0 transparent; padding: 0; margin: 0; text-indent: 0; text-align: left; font-size: 14px;">
    <a class="wumii-text-a" hidefocus="true" onmouseout="this.style.textDecoration=&#39;none&#39;" onmouseover="this.style.textDecoration=&#39;underline&#39;" href="http://blog.nosqlfan.com/html/4117.html" style="text-decoration: none; border-bottom: none; outline: none; color: #333333;" redirecturl=""><span>MongoDB范围查询的索引优化</span></a>
</li><li class="wumii-text-li" style="list-style: disc inside none; display: list-item; line-height: 1.65em; background: none repeat scroll 0 0 transparent; padding: 0; margin: 0; text-indent: 0; text-align: left; font-size: 14px;">
    <a class="wumii-text-a" hidefocus="true" onmouseout="this.style.textDecoration=&#39;none&#39;" onmouseover="this.style.textDecoration=&#39;underline&#39;" href="http://blog.nosqlfan.com/html/1506.html" style="text-decoration: none; border-bottom-style: none; outline: none; color: rgb(51, 51, 51);" redirecturl=""><span>10gen工程师讲数据库索引实现</span></a>
</li></ul>
    </div><div class="wumii-footer" style="margin: 0; border: none; padding: 5px 0; clear: both; text-align: right;">
            <a href="http://www.wumii.com/widget/relatedItems" target="_blank" title="无觅关联推荐" style="font-style: normal; font-variant: normal; font-weight: normal; font-size: 12px; line-height: normal; font-family: arial; color: rgb(187, 187, 187); border-bottom-style: none; word-wrap: normal; display: inline; cursor: pointer;">无觅关联推荐[?]</a>
        </div>
</div></div>
<p style="margin:0;padding:0;height:1px;overflow:hidden;">
    <script type="text/javascript"><!--
        var wumiiSitePrefix = "http://blog.nosqlfan.com";
        var wumiiEnableCustomPos = false;
        var wumiiParams = "&#038;num=6&#038;mode=3&#038;displayInFeed=1&#038;version=1.0.5.5&#038;pf=WordPress2.9.2";
    //--></script><script type="text/javascript" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/relatedItemsWidget.htm"></script><a href="http://www.wumii.com/widget/relatedItems.htm" style="border:0;"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/pixel.png" alt="无觅相关文章插件，快速提升流量" style="border:0;padding:0;margin:0;"></a></p>
<div class="clear"></div>
			
			<div class="singlepostmeta">
				<p>分类 <a href="http://blog.nosqlfan.com/topics/mongodb" title="查看 MongoDB 的全部文章" rel="category tag">MongoDB</a> · tag <a href="http://blog.nosqlfan.com/tags/foursquare" rel="tag">Foursquare</a>, <a href="http://blog.nosqlfan.com/tags/geohash" rel="tag">geohash</a>, <a href="http://blog.nosqlfan.com/tags/geospatial-index" rel="tag">geospatial index</a>, <a href="http://blog.nosqlfan.com/tags/lbs" rel="tag">LBS</a>, <a href="http://blog.nosqlfan.com/tags/mongodb" rel="tag">MongoDB</a>, <a href="http://blog.nosqlfan.com/tags/%e5%9c%b0%e7%90%86%e4%bd%8d%e7%bd%ae" rel="tag">地理位置</a>, <a href="http://blog.nosqlfan.com/tags/%e7%b4%a2%e5%bc%95" rel="tag">索引</a></p>
			</div>
			
		</div>
        <div class="postcomments">
            <a name="comments"></a>
			<a name="comments"></a>
<div class="ds-thread" data-thread-id="728625" data-title="图解 MongoDB 地理位置索引的实现原理" data-url="http://blog.nosqlfan.com/html/1811.html" id="ds-thread"><div id="ds-reset"><div class="ds-comments-info"><div class="ds-sort"><a class="ds-order-desc">最新</a><a class="ds-order-asc ds-current">最早</a><a class="ds-order-hot">最热</a></div><ul class="ds-comments-tabs"><li class="ds-tab"><a class="ds-comments-tab-duoshuo ds-current" href="javascript:void(0);"><span class="ds-highlight">6</span>条评论</a></li><li class="ds-tab"><a class="ds-comments-tab-weibo" href="javascript:void(0);"><span class="ds-highlight">49</span>条新浪微博</a></li><li class="ds-tab"><a class="ds-comments-tab-qqt" href="javascript:void(0);"><span class="ds-highlight">3</span>条腾讯微博</a></li></ul></div><ul class="ds-comments"><li class="ds-post" data-post-id="1193665007488423993"><div class="ds-post-self" data-post-id="1193665007488423993" data-thread-id="1193665007486443057" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/noavatar_default.png" alt="Tianyuanzhao"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">Tianyuanzhao</span></div><p>讲的很好</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2011-06-09T13:22:00+08:00" title="2011年6月9日 下午1:22:00">2011年6月9日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1193665007488465369"><div class="ds-post-self" data-post-id="1193665007488465369" data-thread-id="1193665007486443057" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/587618818cdf578648f0274b5ce66173" alt=""></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account=""></span></div><p>看着跟CAN原理类似  A Scalable Content Addressable Network <a href="http://dl.acm.org/citation.cfm?id=383072" target="_blank">http://dl.acm.org/citation.cfm?id=383072</a></p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-01-22T13:42:00+08:00" title="2012年1月22日 下午1:42:00">2012年1月22日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1193665007488465465"><div class="ds-post-self" data-post-id="1193665007488465465" data-thread-id="1193665007486443057" data-root-id="0" data-source="duoshuo"><div class="ds-avatar"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/noavatar_default.png" alt="Liuwaiting"></div><div class="ds-comment-body"><div class="ds-comment-header"><span class="ds-user-name" data-qqt-account="">Liuwaiting</span></div><p>这个思路不对啊，下图三个点，如果根据前缀相同的话，应该是100001和100101比较近，但实际不是哦。<br></p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2012-03-22T09:58:00+08:00" title="2012年3月22日 上午9:58:00">2012年3月22日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1193665007497408876"><div class="ds-post-self" data-post-id="1193665007497408876" data-thread-id="1193665007486443057" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="1440278"><a rel="nofollow author" target="_blank" href="http://weibo.com/2954899070" onclick="this.href=&#39;http://nosqlfan.duoshuo.com/user-url/?user_id=1440278&#39;;" title="lyxung"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/1" alt="lyxung"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/2954899070" onclick="this.href=&#39;http://nosqlfan.duoshuo.com/user-url/?user_id=1440278&#39;;" rel="nofollow" target="_blank" data-user-id="1440278">lyxung</a></div><p>ls的哥们儿说对了，这个思路不对，其实应该是插入一个x方向的划分（0或者1）然后紧接着插入一个y方向的划分(也是0或者1)这样插入形成的编码才能保证前缀相同越多则两点之间的距离越近！这个就是前缀法~</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-03-06T09:36:34+08:00" title="2013年3月6日 上午9:36:34">2013年3月6日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li><li class="ds-post" data-post-id="1193665007497409216"><div class="ds-post-self" data-post-id="1193665007497409216" data-thread-id="1193665007486443057" data-root-id="0" data-source="duoshuo"><div class="ds-avatar" data-user-id="844468"><a rel="nofollow author" target="_blank" href="http://t.qq.com/piboye" onclick="this.href=&#39;http://nosqlfan.duoshuo.com/user-url/?user_id=844468&#39;;" title="piboye"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/50" alt="piboye"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://t.qq.com/piboye" onclick="this.href=&#39;http://nosqlfan.duoshuo.com/user-url/?user_id=844468&#39;;" rel="nofollow" target="_blank" data-user-id="844468">piboye</a></div><p>格子边缘部分， 虽然相邻， 但hash值前缀很不同啊。 这个有什么方法解决。</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2013-03-27T10:25:51+08:00" title="2013年3月27日 上午10:25:51">2013年3月27日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div><ul class="ds-children"><li class="ds-post" data-post-id="1193665007497412932"><div class="ds-post-self" data-post-id="1193665007497412932" data-thread-id="1193665007486443057" data-root-id="1193665007497409216" data-source="duoshuo"><div class="ds-avatar" data-user-id="1339871"><a rel="nofollow author" target="_blank" href="http://weibo.com/shurrik4ever" onclick="this.href=&#39;http://nosqlfan.duoshuo.com/user-url/?user_id=1339871&#39;;" title="shurrik4ever"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/1(1)" alt="shurrik4ever"></a></div><div class="ds-comment-body"><div class="ds-comment-header"><a class="ds-user-name ds-highlight" data-qqt-account="" href="http://weibo.com/shurrik4ever" onclick="this.href=&#39;http://nosqlfan.duoshuo.com/user-url/?user_id=1339871&#39;;" rel="nofollow" target="_blank" data-user-id="1339871">shurrik4ever</a></div><p>当索引的精度划分的越小，比如每个格子里都差不多只有一个商家时，搜索你附近商家时，搜索到的情况就可以有效避免你说的这种情况</p><div class="ds-comment-footer ds-comment-actions"><span class="ds-time" datetime="2014-07-07T08:40:38+08:00" title="2014年7月7日 上午8:40:38">7月7日</span><a class="ds-post-reply" href="javascript:void(0);"><span class="ds-icon ds-icon-reply"></span>回复</a><a class="ds-post-likes" href="javascript:void(0);"><span class="ds-icon ds-icon-like"></span>顶</a><a class="ds-post-repost" href="javascript:void(0);"><span class="ds-icon ds-icon-share"></span>转发</a><a class="ds-post-report" href="javascript:void(0);"><span class="ds-icon ds-icon-report"></span>举报</a></div></div></div></li></ul></li></ul><div class="ds-paginator" style="display: none;"><div class="ds-border"></div><a data-page="1" href="javascript:void(0);" class="ds-current">1</a></div><a name="respond"></a><div class="ds-toolbar"><div class="ds-account-control"><span class="ds-icon ds-icon-settings"></span> <span>帐号管理</span><ul><li><a class="ds-bind-more" href="javascript:void(0);" style="border-top: none">绑定更多</a></li><li><a target="_blank" href="http://duoshuo.com/settings/?short_name=nosqlfan&remote_auth=W10%3D%20c925fa130cdb9b7c0c3024643d978d7410d26979%201415929501">设置</a></li><li><a rel="nofollow" href="http://nosqlfan.duoshuo.com/logout/?sso=1&redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dlogout%26_wpnonce%3Dd49cffe54e%26redirect_to%3Dhttp%253A%252F%252Fblog.nosqlfan.com%252Fhtml%252F1811.html" style="border-bottom: none">登出</a></li></ul></div><div class="ds-visitor"><a class="ds-visitor-name" href="http://t.qq.com/h4Breeze" target="_blank">charles</a><a class="ds-unread-comments-count" href="javascript:void(0);" title="你没有新回复" style="display: none;">0</a></div></div><div class="ds-replybox"><a class="ds-avatar" href="http://duoshuo.com/settings/avatar/?short_name=nosqlfan&remote_auth=W10%3D%20c925fa130cdb9b7c0c3024643d978d7410d26979%201415929501" target="_blank" title="设置头像"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/100" alt="charles"></a><form method="post"><input type="hidden" name="thread_id" value="1193665007486443057">
<input type="hidden" name="parent_id" value="">
<input type="hidden" name="nonce" value="546584b8edb92"><div class="ds-textarea-wrapper ds-rounded-top"><textarea name="message" title="Ctrl+Enter快捷提交" placeholder="说点什么吧…"></textarea><pre class="ds-hidden-text"></pre></div><div class="ds-post-toolbar"><div class="ds-post-options ds-gradient-bg"><span class="ds-sync"><input id="ds-sync-checkbox" type="checkbox" name="repost" checked="checked" value="qqt,qzone"> <label for="ds-sync-checkbox">分享到:</label><a href="javascript:void(0)" class="ds-service-icon ds-qqt" data-service="qqt" title="腾讯微博"></a><a href="javascript:void(0)" class="ds-service-icon ds-qzone" data-service="qzone" title="QQ空间"></a></span></div><button class="ds-post-button" type="submit">发布</button><div class="ds-toolbar-buttons"></div></div></form></div><p class="ds-powered-by"><a href="http://duoshuo.com/" target="_blank" rel="nofollow">Powered by 多说</a></p></div></div>
	<script type="text/javascript">
	if (typeof DUOSHUO !== 'undefined')
		DUOSHUO.EmbedThread('.ds-thread');
</script>
		<div id="ds-ssr">

		
            <ol id="commentlist">
                	<li class="comment even thread-even depth-1" id="li-comment-833">
		<article id="comment-833" class="comment">
			<footer class="comment-meta">
				<cite class="comment-author vcard">
					<span class="fn">Tianyuanzhao</span> on <a rel="nofollow" href="http://blog.nosqlfan.com/html/1811.html/comment-page-1#comment-833"><time pubdate="" datetime="2011-06-09T13:22:00+00:00">2011年06月9日 at 13:22</time></a> <span class="says">said:</span>				</cite><!-- .comment-author .vcard -->
			</footer>

			<div class="comment-content"><p>讲的很好</p>
</div>
			
		</article><!-- #comment-## -->
	</li>
	<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1260">
		<article id="comment-1260" class="comment">
			<footer class="comment-meta">
				<cite class="comment-author vcard">
					<span class="fn">匿名</span> on <a rel="nofollow" href="http://blog.nosqlfan.com/html/1811.html/comment-page-1#comment-1260"><time pubdate="" datetime="2012-01-22T13:42:00+00:00">2012年01月22日 at 13:42</time></a> <span class="says">said:</span>				</cite><!-- .comment-author .vcard -->
			</footer>

			<div class="comment-content"><p>看着跟CAN原理类似  A Scalable Content Addressable Network <a href="http://dl.acm.org/citation.cfm?id=383072" rel="nofollow">http://dl.acm.org/citation.cfm?id=383072</a></p>
</div>
			
		</article><!-- #comment-## -->
	</li>
	<li class="comment even thread-even depth-1" id="li-comment-1365">
		<article id="comment-1365" class="comment">
			<footer class="comment-meta">
				<cite class="comment-author vcard">
					<span class="fn">Liuwaiting</span> on <a rel="nofollow" href="http://blog.nosqlfan.com/html/1811.html/comment-page-1#comment-1365"><time pubdate="" datetime="2012-03-22T09:58:00+00:00">2012年03月22日 at 09:58</time></a> <span class="says">said:</span>				</cite><!-- .comment-author .vcard -->
			</footer>

			<div class="comment-content"><p>这个思路不对啊，下图三个点，如果根据前缀相同的话，应该是100001和100101比较近，但实际不是哦。</p>
</div>
			
		</article><!-- #comment-## -->
	</li>
            </ol>

		            
    </div>        
        </div>

				
	</div>
	
<!-- begin r_sidebar -->

<div id="sidebar">

	<ul id="sidebarwidgeted">
	<li id="text-9" class="widget widget_text">			<div class="textwidget"><form action="http://www.google.com/cse" id="cse-search-box">
  <div>
    <input type="hidden" name="cx" value="009096605601795634908:aidhulyxmzw">
    <input type="hidden" name="ie" value="UTF-8">
    <input type="text" name="q" size="25">
    <input type="submit" name="sa" value="搜索">
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=zh-Hans"></script></div>
		</li>
<li id="text-3" class="widget widget_text"><h2 class="widgettitle">关注与订阅</h2>
			<div class="textwidget"><a href="http://twitter.com/nosqlfan" target="_blank" title="twitter"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/MfsC7.png">
</a>
<a href="http://weibo.com/nosqlfan" target="_blank" title="新浪微博"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/TuAy9.png">
</a>
<a href="http://t.qq.com/nosqlfan" target="_blank" title="腾迅微博"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/ECX6C.gif">
</a>
<a href="http://feed.feedsky.com/nosqlfan" target="_blank" title="RSS订阅"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/swXpq.png">
</a></div>
		</li>
<li id="text-15" class="widget widget_text"><h2 class="widgettitle">《Redis设计与实现》转发送书活动</h2>
			<div class="textwidget"><a href="http://weibo.com/1988712133/BaLnbmO4y?ref=nosqlfan" target="_blank"><img style="width:130px;" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/small.jpg"><img style="width:130px;" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/small(1).jpg"></a></div>
		</li>
<li id="text-13" class="widget widget_text"><h2 class="widgettitle">专题</h2>
			<div class="textwidget">	<ul><li><a href="http://blog.nosqlfan.com/html/3537.html" target="_blank" style="font-size:15px;">Redis资料汇总专题</a>&nbsp;<span style="color:red;font-weight:bold;">new</span></li>
<li><a href="http://blog.nosqlfan.com/html/3548.html" target="_blank" style="font-size:15px;">MongoDB资料汇总专题</a>&nbsp;<span style="color:red;font-weight:bold;">new</span></li>
<li>工作推荐：<a href="http://weibo.com/1889730051/AAjTOb9eU" target="_blank">高级Android开发工程师</a></li>
<li>工作推荐：<a href="http://weibo.com/1889730051/AAjTAhIm7" target="_blank">中级Android开发工程师</a></li>
</ul>
</div>
		</li>
<li id="text-5" class="widget widget_text">			<div class="textwidget"><a href="http://dtcc.it168.com/?ref=nosqlfan" target="_blank"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/agEEA.jpg"></a></div>
		</li>
<li id="text-10" class="widget widget_text"><h2 class="widgettitle">NoSQLFan图书频道</h2>
			<div class="textwidget"><a href="http://blog.nosqlfan.com/books" target="_blank"><img src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/Gv3eR.gif"></a></div>
		</li>
<li id="views-3" class="widget widget_views"><h2 class="widgettitle">热门文章</h2>
<ul>
<li><a href="http://blog.nosqlfan.com/html/3537.html" title="Redis资料汇总专题">Redis资料汇总专题</a><!-- - 99,647 views--></li><li><a href="http://blog.nosqlfan.com/html/3202.html" title="十五分钟介绍 Redis数据结构">十五分钟介绍 Redis数据结构</a><!-- - 70,304 views--></li><li><a href="http://blog.nosqlfan.com/html/3548.html" title="MongoDB资料汇总专题">MongoDB资料汇总专题</a><!-- - 60,745 views--></li><li><a href="http://blog.nosqlfan.com/html/2364.html" title="强烈推荐！非同一般的Redis介绍">强烈推荐！非同一般的Redis介绍</a><!-- - 50,386 views--></li><li><a href="http://blog.nosqlfan.com/html/2395.html" title="一个很棒的Redis介绍PPT">一个很棒的Redis介绍PPT</a><!-- - 41,874 views--></li><li><a href="http://blog.nosqlfan.com/html/3139.html" title="Redis系统性介绍">Redis系统性介绍</a><!-- - 39,510 views--></li><li><a href="http://blog.nosqlfan.com/html/2925.html" title="redis 适用场景与实现">redis 适用场景与实现</a><!-- - 38,525 views--></li><li><a href="http://blog.nosqlfan.com/html/4209.html" title="2013年中国数据库大会PPT">2013年中国数据库大会PPT</a><!-- - 33,022 views--></li><li><a href="http://blog.nosqlfan.com/html/2235.html" title="Redis作者谈Redis应用场景">Redis作者谈Redis应用场景</a><!-- - 28,609 views--></li><li><a href="http://blog.nosqlfan.com/html/213.html" title="MongoDB管理工具">MongoDB管理工具</a><!-- - 27,929 views--></li></ul>
</li>
<li id="simpletags-3" class="widget widget-simpletags"><h2 class="widgettitle">标签云</h2>

<!-- Generated by Simple Tags 1.7.4.4 - http://wordpress.org/extend/plugins/simple-tags -->
	<div class="st-tag-cloud">
	<a href="http://blog.nosqlfan.com/tags/%e6%95%99%e7%a8%8b" id="tag-link-40" class="st-tags t1" title="11 个主题" rel="tag" style="font-size:8pt; color:#555555;">教程</a>
<a href="http://blog.nosqlfan.com/tags/riak" id="tag-link-84" class="st-tags t1" title="17 个主题" rel="tag" style="font-size:8pt; color:#555555;">Riak</a>
<a href="http://blog.nosqlfan.com/tags/mapreduce" id="tag-link-10" class="st-tags t1" title="17 个主题" rel="tag" style="font-size:8pt; color:#555555;">mapreduce</a>
<a href="http://blog.nosqlfan.com/tags/mysql" id="tag-link-68" class="st-tags t1" title="11 个主题" rel="tag" style="font-size:8pt; color:#555555;">MySQL</a>
<a href="http://blog.nosqlfan.com/tags/%e4%bb%8b%e7%bb%8d" id="tag-link-48" class="st-tags t1" title="12 个主题" rel="tag" style="font-size:8pt; color:#555555;">介绍</a>
<a href="http://blog.nosqlfan.com/tags/nosql" id="tag-link-4" class="st-tags t4" title="75 个主题" rel="tag" style="font-size:13.67pt; color:#383838;">nosql</a>
<a href="http://blog.nosqlfan.com/tags/%e6%80%a7%e8%83%bd" id="tag-link-120" class="st-tags t1" title="11 个主题" rel="tag" style="font-size:8pt; color:#555555;">性能</a>
<a href="http://blog.nosqlfan.com/tags/mongodb" id="tag-link-20" class="st-tags t10" title="204 个主题" rel="tag" style="font-size:25pt; color:#000000;">MongoDB</a>
<a href="http://blog.nosqlfan.com/tags/hbase" id="tag-link-22" class="st-tags t2" title="33 个主题" rel="tag" style="font-size:9.89pt; color:#4b4b4b;">hbase</a>
<a href="http://blog.nosqlfan.com/tags/leveldb" id="tag-link-492" class="st-tags t1" title="10 个主题" rel="tag" style="font-size:8pt; color:#555555;">LevelDB</a>
<a href="http://blog.nosqlfan.com/tags/redis" id="tag-link-13" class="st-tags t7" title="157 个主题" rel="tag" style="font-size:19.33pt; color:#1c1c1c;">Redis</a>
<a href="http://blog.nosqlfan.com/tags/neo4j" id="tag-link-167" class="st-tags t1" title="13 个主题" rel="tag" style="font-size:8pt; color:#555555;">Neo4j</a>
<a href="http://blog.nosqlfan.com/tags/%e6%ba%90%e7%a0%81" id="tag-link-381" class="st-tags t1" title="18 个主题" rel="tag" style="font-size:8pt; color:#555555;">源码</a>
<a href="http://blog.nosqlfan.com/tags/hadoop" id="tag-link-23" class="st-tags t2" title="47 个主题" rel="tag" style="font-size:9.89pt; color:#4b4b4b;">hadoop</a>
<a href="http://blog.nosqlfan.com/tags/replica-sets" id="tag-link-140" class="st-tags t1" title="10 个主题" rel="tag" style="font-size:8pt; color:#555555;">Replica Sets</a>
<a href="http://blog.nosqlfan.com/tags/%e7%9b%91%e6%8e%a7" id="tag-link-270" class="st-tags t1" title="12 个主题" rel="tag" style="font-size:8pt; color:#555555;">监控</a>
<a href="http://blog.nosqlfan.com/tags/cassandra" id="tag-link-6" class="st-tags t2" title="47 个主题" rel="tag" style="font-size:9.89pt; color:#4b4b4b;">Cassandra</a>
<a href="http://blog.nosqlfan.com/tags/couchdb" id="tag-link-16" class="st-tags t2" title="52 个主题" rel="tag" style="font-size:9.89pt; color:#4b4b4b;">CouchDB</a>
<a href="http://blog.nosqlfan.com/tags/python" id="tag-link-137" class="st-tags t1" title="14 个主题" rel="tag" style="font-size:8pt; color:#555555;">Python</a>
<a href="http://blog.nosqlfan.com/tags/node-js" id="tag-link-157" class="st-tags t1" title="10 个主题" rel="tag" style="font-size:8pt; color:#555555;">node.js</a></div>

</li>
<li id="categories-3" class="widget widget_categories"><h2 class="widgettitle">分类</h2>
		<ul>
	<li class="cat-item cat-item-6"><a href="http://blog.nosqlfan.com/topics/cassandra" title="查看 Cassandra 下的所有文章">Cassandra</a> (41)
</li>
	<li class="cat-item cat-item-16"><a href="http://blog.nosqlfan.com/topics/couchdb" title="查看 CouchDB 下的所有文章">CouchDB</a> (55)
</li>
	<li class="cat-item cat-item-73"><a href="http://blog.nosqlfan.com/topics/hadoophbase" title="查看 Hadoop&amp;HBase 下的所有文章">Hadoop&amp;HBase</a> (57)
</li>
	<li class="cat-item cat-item-24"><a href="http://blog.nosqlfan.com/topics/hypertable" title="查看 Hypertable 下的所有文章">Hypertable</a> (4)
</li>
	<li class="cat-item cat-item-51"><a href="http://blog.nosqlfan.com/topics/kyoto-cabinet" title="查看 Kyoto Cabinet 下的所有文章">Kyoto Cabinet</a> (2)
</li>
	<li class="cat-item cat-item-20"><a href="http://blog.nosqlfan.com/topics/mongodb" title="查看 MongoDB 下的所有文章">MongoDB</a> (203)
</li>
	<li class="cat-item cat-item-167"><a href="http://blog.nosqlfan.com/topics/neo4j" title="查看 Neo4j 下的所有文章">Neo4j</a> (8)
</li>
	<li class="cat-item cat-item-3"><a href="http://blog.nosqlfan.com/topics/nosql%e6%9d%82%e8%b0%88" title="查看 NoSQL杂谈 下的所有文章">NoSQL杂谈</a> (114)
</li>
	<li class="cat-item cat-item-13"><a href="http://blog.nosqlfan.com/topics/redis" title="查看 Redis 下的所有文章">Redis</a> (160)
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.nosqlfan.com/topics/%e6%9c%aa%e5%88%86%e7%b1%bb" title="查看 未分类 下的所有文章">未分类</a> (74)
</li>
	<li class="cat-item cat-item-7"><a href="http://blog.nosqlfan.com/topics/%e7%90%86%e8%ae%ba%e5%8e%9f%e5%9c%b0" title="查看 理论原地 下的所有文章">理论原地</a> (46)
</li>
	<li class="cat-item cat-item-104"><a href="http://blog.nosqlfan.com/topics/%e7%ab%99%e5%86%85%e4%ba%8b%e5%8a%a1" title="查看 站内事务 下的所有文章">站内事务</a> (3)
</li>
		</ul>
</li>
	</ul>
			
</div>

<!-- end r_sidebar -->
</div>

<!-- The main column ends  -->

<!-- begin footer -->

<div class="clear"></div>
</div><div id="ds-notify" style="top: 24px; right: 24px; display: none;"><div id="ds-reset"><a class="ds-logo" href="http://duoshuo.com/" target="_blank" title="多说"></a><ul class="ds-notify-unread"><li style="display:none;"><a data-type="unread-comments" href="javascript:void(0);">你有undefined条新回复</a></li><li style="display:none;"><a data-type="unread-notifications" href="javascript:void(0);">你有undefined条系统消息</a></li></ul></div></div>

<div id="footer">
	<div style="width:960px; margin:0 auto; text-align:left;">
    <div class="footer1">
        <ul id="footerwidgeted-1">
            		<li id="recent-posts-3" class="widget widget_recent_entries">		<h2 class="widgettitle">最近文章</h2>
		<ul>
				<li><a href="http://blog.nosqlfan.com/html/4227.html" title="我对Lamport Logical Clock的理解">我对Lamport Logical Clock的理解 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4218.html" title="深入理解Redis主键失效原理及实现机制">深入理解Redis主键失效原理及实现机制 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4214.html" title="MongoDB 2.5版本将提供新的查询引擎">MongoDB 2.5版本将提供新的查询引擎 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4209.html" title="2013年中国数据库大会PPT">2013年中国数据库大会PPT </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4198.html" title="Redis核心解读系列">Redis核心解读系列 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4191.html" title="MongoDB 2.4版本发布">MongoDB 2.4版本发布 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4188.html" title="Redis核心解读–集群管理工具(Redis-sentinel)">Redis核心解读–集群管理工具(Redis-sentinel) </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4179.html" title="MapReduce的模式、算法和用例">MapReduce的模式、算法和用例 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4166.html" title="Redis监控技巧">Redis监控技巧 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4156.html" title="NoSQL反模式 – 文档数据库篇">NoSQL反模式 – 文档数据库篇 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4153.html" title="Redis如何处理客户端连接">Redis如何处理客户端连接 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4150.html" title="MongoDB查询迷题（1）">MongoDB查询迷题（1） </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4147.html" title="Twemproxy – Twitter 开源的 Redis proxy">Twemproxy – Twitter 开源的 Redis proxy </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4144.html" title="从MySQL到Redis，提升数据迁移的效率">从MySQL到Redis，提升数据迁移的效率 </a></li>
				<li><a href="http://blog.nosqlfan.com/html/4139.html" title="NoSQL数据库的分布式算法">NoSQL数据库的分布式算法 </a></li>
				</ul>
		</li>
 
        </ul>	
    </div>	
    
    <div class="footer2">
        <ul id="footerwidgeted-2">
            <li id="views-4" class="widget widget_views"><h2 class="widgettitle">热门文章</h2>
<ul>
<li><a href="http://blog.nosqlfan.com/html/3537.html" title="Redis资料汇总专题">Redis资料汇总专题</a><!-- - 99,647 views--></li><li><a href="http://blog.nosqlfan.com/html/3202.html" title="十五分钟介绍 Redis数据结构">十五分钟介绍 Redis数据结构</a><!-- - 70,304 views--></li><li><a href="http://blog.nosqlfan.com/html/3548.html" title="MongoDB资料汇总专题">MongoDB资料汇总专题</a><!-- - 60,745 views--></li><li><a href="http://blog.nosqlfan.com/html/2364.html" title="强烈推荐！非同一般的Redis介绍">强烈推荐！非同一般的Redis介绍</a><!-- - 50,386 views--></li><li><a href="http://blog.nosqlfan.com/html/2395.html" title="一个很棒的Redis介绍PPT">一个很棒的Redis介绍PPT</a><!-- - 41,874 views--></li><li><a href="http://blog.nosqlfan.com/html/3139.html" title="Redis系统性介绍">Redis系统性介绍</a><!-- - 39,510 views--></li><li><a href="http://blog.nosqlfan.com/html/2925.html" title="redis 适用场景与实现">redis 适用场景与实现</a><!-- - 38,525 views--></li><li><a href="http://blog.nosqlfan.com/html/4209.html" title="2013年中国数据库大会PPT">2013年中国数据库大会PPT</a><!-- - 33,022 views--></li><li><a href="http://blog.nosqlfan.com/html/2235.html" title="Redis作者谈Redis应用场景">Redis作者谈Redis应用场景</a><!-- - 28,609 views--></li><li><a href="http://blog.nosqlfan.com/html/213.html" title="MongoDB管理工具">MongoDB管理工具</a><!-- - 27,929 views--></li><li><a href="http://blog.nosqlfan.com/html/1282.html" title="Redis资料汇总">Redis资料汇总</a><!-- - 26,106 views--></li><li><a href="http://blog.nosqlfan.com/html/3295.html" title="新浪微博开放平台Redis实践">新浪微博开放平台Redis实践</a><!-- - 25,776 views--></li><li><a href="http://blog.nosqlfan.com/html/3729.html" title="Memcached真的过时了吗？">Memcached真的过时了吗？</a><!-- - 24,283 views--></li><li><a href="http://blog.nosqlfan.com/html/2942.html" title="Redis之七种武器">Redis之七种武器</a><!-- - 21,295 views--></li><li><a href="http://blog.nosqlfan.com/html/2171.html" title="[译] NoSQL生态系统">[译] NoSQL生态系统</a><!-- - 20,185 views--></li></ul>
</li>
 
        </ul>	
    </div>	
    
    <div class="footer3">
        <ul id="footerwidgeted-3">
            <li id="archives-3" class="widget widget_archive"><h2 class="widgettitle">文章索引模板</h2>
		<ul>
			<li><a href="http://blog.nosqlfan.com/html/date/2013/09" title="2013年九月">2013年九月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2013/07" title="2013年七月">2013年七月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2013/05" title="2013年五月">2013年五月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2013/04" title="2013年四月">2013年四月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2013/03" title="2013年三月">2013年三月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2013/02" title="2013年二月">2013年二月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2013/01" title="2013年一月">2013年一月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/11" title="2012年十一月">2012年十一月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/09" title="2012年九月">2012年九月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/08" title="2012年八月">2012年八月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/07" title="2012年七月">2012年七月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/06" title="2012年六月">2012年六月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/05" title="2012年五月">2012年五月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/04" title="2012年四月">2012年四月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/03" title="2012年三月">2012年三月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/02" title="2012年二月">2012年二月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2012/01" title="2012年一月">2012年一月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/12" title="2011年十二月">2011年十二月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/11" title="2011年十一月">2011年十一月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/10" title="2011年十月">2011年十月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/09" title="2011年九月">2011年九月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/08" title="2011年八月">2011年八月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/07" title="2011年七月">2011年七月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/06" title="2011年六月">2011年六月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/05" title="2011年五月">2011年五月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/04" title="2011年四月">2011年四月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/03" title="2011年三月">2011年三月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/02" title="2011年二月">2011年二月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2011/01" title="2011年一月">2011年一月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/12" title="2010年十二月">2010年十二月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/11" title="2010年十一月">2010年十一月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/10" title="2010年十月">2010年十月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/09" title="2010年九月">2010年九月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/08" title="2010年八月">2010年八月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/07" title="2010年七月">2010年七月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/06" title="2010年六月">2010年六月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/05" title="2010年五月">2010年五月</a></li>
	<li><a href="http://blog.nosqlfan.com/html/date/2010/04" title="2010年四月">2010年四月</a></li>
		</ul>
</li>
 
        </ul>	
    </div>	
    
    <div class="footer4">
        <ul id="footerwidgeted-4">
            <li id="linkcat-2" class="widget widget_links"><h2 class="widgettitle">链接表</h2>

	<ul class="xoxo blogroll">
<li><a href="http://10gt.com/" title="10GT分享社区-发现你未知的 分享你知道的" target="_blank">10GT</a></li>
<li><a href="http://www.3wzhaopin.com/" title="3w招聘–互联网招聘" target="_blank">3w招聘–互联网招聘</a></li>
<li><a href="http://iammutex.com/" title="iammutex的个人博客" target="_blank">iammutex的个人博客</a></li>
<li><a href="http://mongoic.grandcloud.cn/" title="盛大MongoDB云服务" target="_blank">Mongo IC – 盛大MongoDB云服务</a></li>
<li><a href="http://simple-is-better.com/" title="python-cn 新闻 招聘 分享 酷站" target="_blank">python-cn 新闻 招聘 分享 酷站</a></li>
<li><a href="http://www.searchdatabase.com.cn/" title="TechTarget数据库" target="_blank">TechTarget数据库</a></li>
<li><a href="http://www.vpsee.com/" title="VPSee" target="_blank">VPSee</a></li>
<li><a href="http://www.oschina.net/" title="开源中国社区" target="_blank">开源中国社区</a></li>
<li><a href="http://www.yankay.com/" target="_blank">我自然-颜开的博客</a></li>
<li><a href="http://blog.csdn.net/v_JULY_v" target="_blank">结构之法 算法之道</a></li>
<li><a href="http://www.douban.com/group/nosql/" title="豆瓣NoSQL小组，讨论NoSQL相关话题。" target="_blank">豆瓣NoSQL小组</a></li>
<li><a href="http://www.hoterran.info/" rel="friend co-worker" title="hoterran的技术博客" target="_blank">运维和开发</a></li>

	</ul>
</li>

 
        </ul>	
    </div>
   
    
<div class="clear"></div>
 </div>
                
<div id="copyright">

    <div class="copyright">
		<p>© 2014 <a href="http://blog.nosqlfan.com/">NoSQLFan</a> · <a href="http://www.nosqlfan.com/">NoSQLFan</a> theme by @<a href="http://twitter.com/ninayan">ninayan</a><script src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/stat.php" language="JavaScript"></script><script src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/core.php" charset="utf-8" type="text/javascript"></script><a href="http://www.cnzz.com/stat/website.php?web_id=2058827" target="_blank" title="站长统计"><img border="0" hspace="0" vspace="0" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/pic1.gif"></a>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F71f4346b63eebb9cf9c0390da32421a3' type='text/javascript'%3E%3C/script%3E"));
</script><script src="http://hm.baidu.com/h.js?71f4346b63eebb9cf9c0390da32421a3" type="text/javascript"></script>

</p>
    </div>
    </div>
</div>
                                    
<script type="text/javascript" src="./图解 MongoDB 地理位置索引的实现原理 - NoSQLFan - 关注NoSQL相关技术、新闻_files/plusone.js"></script>

<!-- end28 -->


<!-- Dynamic Page Served (once) in 0.312 seconds -->
<!-- Cached page served by WP-Cache -->
</body></html>