<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

	<title>Python修饰器的函数式编程 | 酷 壳 - CoolShell.cn</title>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有文章" href="http://coolshell.cn/feed" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - 所有评论" href="http://coolshell.cn/comments/feed" />
	<link rel="pingback" href="http://coolshell.cn/xmlrpc.php" />

	<!-- style START -->
	<!-- default style -->
	<style type="text/css" media="screen">@import url( http://coolshell.cn/wp-content/themes/inove/style.css );</style>
	<link rel='stylesheet' id='open-sans-css'  href='http://coolshell.cn//wp-includes/css/google-font.css?ver=3.9.1' type='text/css' media='all' />
	<!-- for translations -->
			<link rel="stylesheet" href="http://coolshell.cn//wp-content/themes/inove/chinese.css" type="text/css" media="screen" />
		<!--[if IE]>
		<link rel="stylesheet" href="http://coolshell.cn//wp-content/themes/inove/ie.css" type="text/css" media="screen" />
	<![endif]-->
	<!-- style END -->

	<!-- script START -->
	<script type="text/javascript" src="http://coolshell.cn//wp-content/themes/inove/js/base.js"></script>
	<script type="text/javascript" src="http://coolshell.cn//wp-content/themes/inove/js/menu.js"></script>
	<!-- script END -->

	<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell.cn &raquo; Python修饰器的函数式编程评论Feed" href="http://coolshell.cn/articles/11265.html/feed" />
<script>var killIE6ImgUrl = "http://coolshell.cn//wp-content/plugins/lets-kill-ie6/img";</script><link rel='stylesheet' id='wp-postratings-css'  href='http://coolshell.cn//wp-content/plugins/wp-postratings/postratings-css.css?ver=1.8' type='text/css' media='all' />
<link rel='stylesheet' id='wp-pagenavi-css'  href='http://coolshell.cn//wp-content/themes/inove/pagenavi-css.css?ver=2.70' type='text/css' media='all' />
<script type='text/javascript' src='http://coolshell.cn//wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://coolshell.cn//wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/lets-kill-ie6/lets-kill-ie6.js?ver=4.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://coolshell.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://coolshell.cn//wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='一个浮点数跨平台产生的问题' href='http://coolshell.cn/articles/11235.html' />
<link rel='next' title='无插件Vim编程技巧' href='http://coolshell.cn/articles/11312.html' />
<meta name="generator" content="WordPress 4.1" />
<link rel='shortlink' href='http://coolshell.cn/?p=11265' />
	<link href="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Styles/SyntaxHighlighter.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript">
	window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "http://coolshell.cn/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.5.3';
	window._wp_rp_post_id = '11265';
	window._wp_rp_num_rel_posts = '8';
	window._wp_rp_thumbnails = false;
	window._wp_rp_post_title = 'Python%E4%BF%AE%E9%A5%B0%E5%99%A8%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B';
	window._wp_rp_post_tags = [];
	window._wp_rp_promoted_content = true;
</script>
<script type="text/javascript" src="https://wprp.zemanta.com/static/js/loader.js?version=3.5.3" async></script>
<style type="text/css">
.related_post_title {

}
ul.related_post {
}
ul.related_post li {
}
ul.related_post li a {
}
ul.related_post li img {
}</style>

<!-- All in One SEO Pack 2.2.4 by Michael Torbert of Semper Fi Web Design[326,381] -->
<meta name="description"  content="本文用很多示例介绍了Python的Decorator函数式编程的方法原理。" />

<meta name="keywords"  content="decorator,functional,programming,python,函数式,程序设计,编程语言" />

<link rel="canonical" href="http://coolshell.cn/articles/11265.html" />
<meta property="og:title" content="Python修饰器的函数式编程 | 酷 壳 - CoolShell.cn" />
<meta property="og:type" content="activity" />
<meta property="og:url" content="http://coolshell.cn/articles/11265.html" />
<meta property="og:image" content="http://coolshell.cn//wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png" />
<meta property="og:site_name" content="酷 壳 - CoolShell.cn" />
<meta property="og:description" content="本文用很多示例介绍了Python的Decorator函数式编程的方法原理。" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:description" content="本文用很多示例介绍了Python的Decorator函数式编程的方法原理。" />
<meta itemprop="image" content="http://coolshell.cn//wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png" />
<!-- /all in one seo pack -->
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>


<body>
<!-- wrap START -->
<div id="wrap">

<!-- container START -->
<div id="container"  >

<!-- header START -->
<div id="header">

	<!-- banner START -->
			<div class="banner">
			<a title="把这个链接拖到你的Chrome收藏夹工具栏中" href='javascript:(function(){function c(){var e=document.createElement("link");e.setAttribute("type","text/css");e.setAttribute("rel","stylesheet");e.setAttribute("href",f);e.setAttribute("class",l);document.body.appendChild(e)}function h(){var e=document.getElementsByClassName(l);for(var t=0;t<e.length;t++){document.body.removeChild(e[t])}}function p(){var e=document.createElement("div");e.setAttribute("class",a);document.body.appendChild(e);setTimeout(function(){document.body.removeChild(e)},100)}function d(e){return{height:e.offsetHeight,width:e.offsetWidth}}function v(i){var s=d(i);return s.height>e&&s.height<n&&s.width>t&&s.width<r}function m(e){var t=e;var n=0;while(!!t){n+=t.offsetTop;t=t.offsetParent}return n}function g(){var e=document.documentElement;if(!!window.innerWidth){return window.innerHeight}else if(e&&!isNaN(e.clientHeight)){return e.clientHeight}return 0}function y(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function E(e){var t=m(e);return t>=w&&t<=b+w}function S(){var e=document.createElement("audio");e.setAttribute("class",l);e.src=i;e.loop=false;e.addEventListener("canplay",function(){setTimeout(function(){x(k)},500);setTimeout(function(){N();p();for(var e=0;e<O.length;e++){T(O[e])}},15500)},true);e.addEventListener("ended",function(){N();h()},true);e.innerHTML=" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";document.body.appendChild(e);e.play()}function x(e){e.className+=" "+s+" "+o}function T(e){e.className+=" "+s+" "+u[Math.floor(Math.random()*u.length)]}function N(){var e=document.getElementsByClassName(s);var t=new RegExp("\\b"+s+"\\b");for(var n=0;n<e.length;){e[n].className=e[n].className.replace(t,"")}}var e=30;var t=30;var n=350;var r=350;var i="//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";var s="mw-harlem_shake_me";var o="im_first";var u=["im_drunk","im_baked","im_trippin","im_blown"];var a="mw-strobe_light";var f="//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";var l="mw_added_css";var b=g();var w=y();var C=document.getElementsByTagName("*");var k=null;for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){if(E(A)){k=A;break}}}if(A===null){console.warn("Could not find a node of the right size. Please try a different page.");return}c();S();var O=[];for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){O.push(A)}}})()    '>High一下!</a>		</div>
		<!-- banner END -->

	<div id="caption">
		<h1 id="title"><a href="http://coolshell.cn/">酷 壳 &#8211; CoolShell.cn</a></h1>
		<div id="tagline">享受编程和技术所带来的快乐 &#8211; http://coolshell.cn</div>
	</div>

	<div class="fixed"></div>
</div>
<!-- header END -->

<!-- navigation START -->
<div id="navigation">
	<!-- menus START -->
	<ul id="menus">
		<li class="page_item"><a class="home" title="首页" href="http://coolshell.cn/">首页</a></li>
		<li class="page_item page-item-4194"><a href="http://coolshell.cn/featured_posts">推荐文章</a></li>
<li class="page_item page-item-3839"><a href="http://coolshell.cn/plugins">本站插件</a></li>
<li class="page_item page-item-2"><a href="http://coolshell.cn/guestbook">留言小本</a></li>
<li class="page_item page-item-368"><a href="http://coolshell.cn/about">关于酷壳</a></li>
<li class="page_item page-item-4470"><a href="http://coolshell.cn/haoel">关于陈皓</a></li>
		<li><a class="lastmenu" href="javascript:void(0);"></a></li>
	</ul>
	<!-- menus END -->

	<!-- searchbox START -->
	<div id="searchbox">
					<form action="http://coolshell.cn" method="get">
				<div class="content">
					<input type="text" class="textfield" name="s" size="24" value="" />
					<input type="submit" class="button" value="" />
				</div>
			</form>
			</div>
<script type="text/javascript">
//<![CDATA[
	var searchbox = MGJS.$("searchbox");
	var searchtxt = MGJS.getElementsByClassName("textfield", "input", searchbox)[0];
	var searchbtn = MGJS.getElementsByClassName("button", "input", searchbox)[0];
	var tiptext = "请输入关键字...";
	if(searchtxt.value == "" || searchtxt.value == tiptext) {
		searchtxt.className += " searchtip";
		searchtxt.value = tiptext;
	}
	searchtxt.onfocus = function(e) {
		if(searchtxt.value == tiptext) {
			searchtxt.value = "";
			searchtxt.className = searchtxt.className.replace(" searchtip", "");
		}
	}
	searchtxt.onblur = function(e) {
		if(searchtxt.value == "") {
			searchtxt.className += " searchtip";
			searchtxt.value = tiptext;
		}
	}
	searchbtn.onclick = function(e) {
		if(searchtxt.value == "" || searchtxt.value == tiptext) {
			return false;
		}
	}
//]]>
</script>
	<!-- searchbox END -->

	<div class="fixed"></div>
</div>
<!-- navigation END -->

<!-- content START -->
<div id="content">

	<!-- main START -->
	<div id="main">


	<div id="postpath">
		<a title="转到首页" href="http://coolshell.cn/">首页</a>
		 &gt; <a href="http://coolshell.cn/category/proglanguage/pythondev" rel="category tag">Python</a>, <a href="http://coolshell.cn/category/progdesign" rel="category tag">程序设计</a>, <a href="http://coolshell.cn/category/proglanguage" rel="category tag">编程语言</a>		 &gt; Python修饰器的函数式编程	</div>

	<div class="post" id="post-11265">
		<h2>Python修饰器的函数式编程</h2>
		<div class="info">
			<span class="date">2014年3月20日</span>
			<span class="author"><a href="http://coolshell.cn/articles/author/haoel" title="由陈皓发布" rel="author">陈皓</a></span>										<span class="addcomment"><a href="#respond">发表评论</a></span>
				<span class="comments"><a href="#comments">阅读评论</a></span>
						<span class="comments"> 23,364 人阅读  &nbsp;  &nbsp;</span>
			<div class="fixed"></div>
		</div>
		<div class="content">
			<p><img class="alignright  wp-image-11300" alt="" src="http://coolshell.cn//wp-content/uploads/2014/03/snake-hat-new-year-schedule-800x960.jpg" width="280" height="233" />Python的修饰器的英文名叫Decorator，当你看到这个英文名的时候，你可能会把其跟Design Pattern里的Decorator搞混了，其实这是完全不同的两个东西。虽然好像，他们要干的事都很相似——都是想要对一个已有的模块做一些“修饰工作”，所谓修饰工作就是想给现有的模块加上一些小装饰（一些小功能，这些小功能可能好多模块都会用到），但又不让这个小装饰（小功能）侵入到原有的模块中的代码里去。但是OO的Decorator简直就是一场恶梦，不信你就去看看wikipedia上的词条（<a href="http://en.wikipedia.org/wiki/Decorator_pattern" target="_blank">Decorator Pattern</a>）里的UML图和那些代码，这就是我在《 <a title="链接：从面向对象的设计模式看软件设计" href="http://coolshell.cn/articles/8961.html" rel="bookmark">从面向对象的设计模式看软件设计</a>》“餐后甜点”一节中说的，OO鼓励了——“厚重地胶合和复杂层次”，也是《 <a title="链接：如此理解面向对象编程" href="http://coolshell.cn/articles/8745.html" rel="bookmark">如此理解面向对象编程</a>》中所说的“OO的狂热者们非常害怕处理数据”，Decorator Pattern搞出来的代码简直就是OO的反面教程。</p>
<p>Python 的 Decorator在使用上和Java/C#的Annotation很相似，就是在方法名前面加一个@XXX注解来为这个方法装饰一些东西。但是，Java/C#的Annotation也很让人望而却步，太TMD的复杂了，你要玩它，你需要了解一堆Annotation的类库文档，让人感觉就是在学另外一门语言。</p>
<p>而Python使用了一种相对于Decorator Pattern和Annotation来说非常优雅的方法，这种方法不需要你去掌握什么复杂的OO模型或是Annotation的各种类库规定，完全就是语言层面的玩法：一种函数式编程的技巧。如果你看过本站的《<a href="http://coolshell.cn/articles/10822.html">函数式编程</a>》，你一定会为函数式编程的那种“描述你想干什么，而不是描述你要怎么去实现”的编程方式感到畅快。（如果你不了解函数式编程，那在读本文之前，还请你移步去看看《<a href="http://coolshell.cn/articles/10822.html">函数式编程</a>》） 好了，我们先来点感性认识，看一个Python修饰器的Hello World的代码。</p>
<p><span id="more-11265"></span></p>
<h4>Hello World</h4>
<p>下面是代码：</p>
<pre class="brush: python; highlight: [1,2,3,4,5,6,8]; title: 文件名：hello.py; notranslate" title="文件名：hello.py">def hello(fn):
    def wrapper():
        print &quot;hello, %s&quot; % fn.__name__
        fn()
        print &quot;goodby, %s&quot; % fn.__name__
    return wrapper

@hello
def foo():
    print &quot;i am foo&quot;

foo()
</pre>
<p>当你运行代码，你会看到如下输出：</p>
<pre class="brush: bash; title: ; notranslate" title="">[chenaho@chenhao-air]$ python hello.py
hello, foo
i am foo
goodby, foo</pre>
<p>你可以看到如下的东西：</p>
<p style="padding-left: 30px;">1）函数foo前面有个@hello的“注解”，hello就是我们前面定义的函数hello</p>
<p style="padding-left: 30px;">2）在hello函数中，其需要一个fn的参数（这就用来做回调的函数）</p>
<p style="padding-left: 30px;">3）hello函数中返回了一个inner函数wrapper，这个wrapper函数回调了传进来的fn，并在回调前后加了两条语句。</p>
<h4>Decorator 的本质</h4>
<p>对于Python的这个@注解语法糖- Syntactic Sugar 来说，当你在用某个@decorator来修饰某个函数func时，如下所示:</p>
<pre class="brush: python; title: ; notranslate" title="">@decorator
def func():
    pass
</pre>
<p>其解释器会解释成下面这样的语句：</p>
<pre class="brush: python; title: ; notranslate" title="">func = decorator(func)</pre>
<p>尼玛，这不就是把一个函数当参数传到另一个函数中，然后再回调吗？是的，但是，我们需要注意，那里还有一个赋值语句，把decorator这个函数的返回值赋值回了原来的func。 根据《<a href="http://coolshell.cn/articles/10822.html" target="_blank">函数式编程</a>》中的<strong>first class functions</strong>中的定义的，你可以把函数当成变量来使用，所以，decorator必需得返回了一个函数出来给func，这就是所谓的<strong>higher order function </strong>高阶函数，不然，后面当func()调用的时候就会出错。 就我们上面那个hello.py里的例子来说，</p>
<pre class="brush: python; title: ; notranslate" title="">@hello
def foo():
    print &quot;i am foo&quot;
</pre>
<p>被解释成了：</p>
<pre class="brush: python; title: ; notranslate" title=""> foo = hello(foo) </pre>
<p><strong>是的，这是一条语句，而且还被执行了。</strong>你如果不信的话，你可以写这样的程序来试试看：</p>
<pre class="brush: python; title: ; notranslate" title="">def fuck(fn):
    print &quot;fuck %s!&quot; % fn.__name__[::-1].upper()

@fuck
def wfg():
    pass
</pre>
<p>没了，就上面这段代码，没有调用wfg()的语句，你会发现， fuck函数被调用了，而且还很NB地输出了我们每个人的心声！</p>
<p>再回到我们hello.py的那个例子，我们可以看到，<strong>hello(foo)返回了wrapper()函数，所以，foo其实变成了wrapper的一个变量，而后面的foo()执行其实变成了wrapper()</strong>。</p>
<p>知道这点本质，当你看到有多个decorator或是带参数的decorator，你也就不会害怕了。</p>
<p>比如：多个decorator</p>
<pre class="brush: python; title: ; notranslate" title="">@decorator_one
@decorator_two
def func():
    pass</pre>
<p>相当于：</p>
<pre class="brush: python; title: ; notranslate" title="">func = decorator_one(decorator_two(func))</pre>
<p>比如：带参数的decorator：</p>
<pre class="brush: python; title: ; notranslate" title="">@decorator(arg1, arg2)
def func():
    pass</pre>
<p>相当于：</p>
<pre class="brush: python; title: ; notranslate" title="">func = decorator(arg1,arg2)(func) </pre>
<p>这意味着decorator(arg1, arg2)这个函数需要返回一个“真正的decorator”。</p>
<h4>带参数及多个Decrorator</h4>
<p>我们来看一个有点意义的例子：</p>
<pre class="brush: python; highlight: [2,5,10,11]; title: html.py; notranslate" title="html.py">def makeHtmlTag(tag, *args, **kwds):
    def real_decorator(fn):
        css_class = &quot; class='{0}'&quot;.format(kwds[&quot;css_class&quot;]) \
                                     if &quot;css_class&quot; in kwds else &quot;&quot;
        def wrapped(*args, **kwds):
            return &quot;&lt;&quot;+tag+css_class+&quot;&gt;&quot; + fn(*args, **kwds) + &quot;&lt;/&quot;+tag+&quot;&gt;&quot;
        return wrapped
    return real_decorator

@makeHtmlTag(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)
@makeHtmlTag(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)
def hello():
    return &quot;hello world&quot;

print hello()

# 输出：
# &lt;b class='bold_css'&gt;&lt;i class='italic_css'&gt;hello world&lt;/i&gt;&lt;/b&gt;
</pre>
<p>在上面这个例子中，我们可以看到：makeHtmlTag有两个参数。所以，<strong>为了让 <span style="color: #000080;">hello = makeHtmlTag(arg1, arg2)(hello)</span> 成功，makeHtmlTag 必需返回一个decorator</strong>（这就是为什么我们在makeHtmlTag中加入了real_decorator()的原因）<strong>，这样一来，我们就可以进入到 decorator 的逻辑中去了</strong>—— decorator得返回一个wrapper，wrapper里回调hello。<strong>看似那个makeHtmlTag() 写得层层叠叠，但是，已经了解了本质的我们觉得写得很自然</strong>。</p>
<p>你看，Python的Decorator就是这么简单，没有什么复杂的东西，你也不需要了解过多的东西，使用起来就是那么自然、体贴、干爽、透气，独有的速效凹道和完美的吸收轨迹，让你再也不用为每个月的那几天感到焦虑和不安，再加上贴心的护翼设计，量多也不用当心。对不起，我调皮了。</p>
<p>什么，你觉得上面那个带参数的Decorator的函数嵌套太多了，你受不了。好吧，没事，我们看看下面的方法。</p>
<h4>class式的 Decorator</h4>
<p>首先，先得说一下，decorator的class方式，还是看个示例：</p>
<pre class="brush: python; highlight: [3,7]; title: ; notranslate" title="">class myDecorator(object):

    def __init__(self, fn):
        print &quot;inside myDecorator.__init__()&quot;
        self.fn = fn

    def __call__(self):
        self.fn()
        print &quot;inside myDecorator.__call__()&quot;

@myDecorator
def aFunction():
    print &quot;inside aFunction()&quot;

print &quot;Finished decorating aFunction()&quot;

aFunction()

# 输出：
# inside myDecorator.__init__()
# Finished decorating aFunction()
# inside aFunction()
# inside myDecorator.__call__()</pre>
<p>上面这个示例展示了，用类的方式声明一个decorator。我们可以看到这个类中有两个成员：<br />
1）一个是__init__()，这个方法是在我们给某个函数decorator时被调用，所以，需要有一个fn的参数，也就是被decorator的函数。<br />
2）一个是__call__()，这个方法是在我们调用被decorator函数时被调用的。<br />
上面输出可以看到整个程序的执行顺序。</p>
<p>这看上去要比“函数式”的方式更易读一些。</p>
<p>下面，我们来看看用类的方式来重写上面的html.py的代码：</p>
<pre class="brush: python; title: html.py; notranslate" title="html.py">class makeHtmlTagClass(object):

    def __init__(self, tag, css_class=&quot;&quot;):
        self._tag = tag
        self._css_class = &quot; class='{0}'&quot;.format(css_class) \
                                       if css_class !=&quot;&quot; else &quot;&quot;

    def __call__(self, fn):
        def wrapped(*args, **kwargs):
            return &quot;&lt;&quot; + self._tag + self._css_class+&quot;&gt;&quot;  \
                       + fn(*args, **kwargs) + &quot;&lt;/&quot; + self._tag + &quot;&gt;&quot;
        return wrapped

@makeHtmlTagClass(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)
@makeHtmlTagClass(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)
def hello(name):
    return &quot;Hello, {}&quot;.format(name)

print hello(&quot;Hao Chen&quot;)
</pre>
<p>上面这段代码中，我们需要注意这几点：<br />
1）如果decorator有参数的话，__init__() 成员就不能传入fn了，而fn是在__call__的时候传入的。<br />
2）这段代码还展示了 wrapped(*args, **kwargs) 这种方式来传递被decorator函数的参数。（其中：args是一个参数列表，kwargs是参数dict，具体的细节，请参考Python的文档或是<a href="http://stackoverflow.com/questions/3394835/args-and-kwargs" target="_blank">StackOverflow的这个问题</a>，这里就不展开了）</p>
<h4>用Decorator设置函数的调用参数</h4>
<p>你有三种方法可以干这个事：</p>
<p>第一种，通过 **kwargs，这种方法decorator会在kwargs中注入参数。</p>
<pre class="brush: python; title: ; notranslate" title="">def decorate_A(function):
    def wrap_function(*args, **kwargs):
        kwargs['str'] = 'Hello!'
        return function(*args, **kwargs)
    return wrap_function

@decorate_A
def print_message_A(*args, **kwargs):
    print(kwargs['str'])

print_message_A()</pre>
<p>第二种，约定好参数，直接修改参数</p>
<pre class="brush: python; title: ; notranslate" title="">def decorate_B(function):
    def wrap_function(*args, **kwargs):
        str = 'Hello!'
        return function(str, *args, **kwargs)
    return wrap_function

@decorate_B
def print_message_B(str, *args, **kwargs):
    print(str)

print_message_B()</pre>
<p>第三种，通过 *args 注入</p>
<pre class="brush: python; title: ; notranslate" title="">def decorate_C(function):
    def wrap_function(*args, **kwargs):
        str = 'Hello!'
        #args.insert(1, str)
        args = args +(str,)
        return function(*args, **kwargs)
    return wrap_function

class Printer:
    @decorate_C
    def print_message(self, str, *args, **kwargs):
        print(str)

p = Printer()
p.print_message()</pre>
<h4>Decorator的副作用</h4>
<p>到这里，我相信你应该了解了整个Python的decorator的原理了。</p>
<p>相信你也会发现，被decorator的函数其实已经是另外一个函数了，对于最前面那个hello.py的例子来说，如果你查询一下foo.__name__的话，你会发现其输出的是“wrapper”，而不是我们期望的“foo”，这会给我们的程序埋一些坑。所以，Python的functool包中提供了一个叫wrap的decorator来消除这样的副作用。下面是我们新版本的hello.py。</p>
<pre class="brush: python; highlight: [1,3]; title: 文件名：hello.py; notranslate" title="文件名：hello.py">from functools import wraps
def hello(fn):
    @wraps(fn)
    def wrapper():
        print &quot;hello, %s&quot; % fn.__name__
        fn()
        print &quot;goodby, %s&quot; % fn.__name__
    return wrapper

@hello
def foo():
    '''foo help doc'''
    print &quot;i am foo&quot;
    pass

foo()
print foo.__name__ #输出 foo
print foo.__doc__  #输出 foo help doc
</pre>
<p>当然，即使是你用了functools的wraps，也不能完全消除这样的副作用。</p>
<p>来看下面这个示例：</p>
<pre class="brush: python; title: ; notranslate" title="">from inspect import getmembers, getargspec
from functools import wraps

def wraps_decorator(f):
    @wraps(f)
    def wraps_wrapper(*args, **kwargs):
        return f(*args, **kwargs)
    return wraps_wrapper

class SomeClass(object):
    @wraps_decorator
    def method(self, x, y):
        pass

obj = SomeClass()
for name, func in getmembers(obj, predicate=inspect.ismethod):
    print &quot;Member Name: %s&quot; % name
    print &quot;Func Name: %s&quot; % func.func_name
    print &quot;Args: %s&quot; % getargspec(func)[0]

# 输出：
# Member Name: method
# Func Name: method
# Args: [] </pre>
<p>你会发现，即使是你你用了functools的wraps，你在用getargspec时，参数也不见了。</p>
<p>要修正这一问，我们还得用Python的反射来解决，下面是相关的代码：</p>
<pre class="brush: python; title: ; notranslate" title="">def get_true_argspec(method):
    argspec = inspect.getargspec(method)
    args = argspec[0]
    if args and args[0] == 'self':
        return argspec
    if hasattr(method, '__func__'):
        method = method.__func__
    if not hasattr(method, 'func_closure') or method.func_closure is None:
        raise Exception(&quot;No closure for method.&quot;)

    method = method.func_closure[0].cell_contents
    return get_true_argspec(method)</pre>
<p>当然，我相信大多数人的程序都不会去getargspec。所以，用functools的wraps应该够用了。</p>
<h4>一些decorator的示例</h4>
<p>好了，现在我们来看一下各种decorator的例子：</p>
<h5>给函数调用做缓存</h5>
<p>这个例实在是太经典了，整个网上都用这个例子做decorator的经典范例，因为太经典了，所以，我这篇文章也不能免俗。</p>
<pre class="brush: python; title: ; notranslate" title="">from functools import wraps
def memo(fn):
    cache = {}
    miss = object()

    @wraps(fn)
    def wrapper(*args):
        result = cache.get(args, miss)
        if result is miss:
            result = fn(*args)
            cache[args] = result
        return result

    return wrapper

@memo
def fib(n):
    if n &lt; 2:
        return n
    return fib(n - 1) + fib(n - 2)
</pre>
<p>上面这个例子中，是一个斐波拉契数例的递归算法。我们知道，这个递归是相当没有效率的，因为会重复调用。比如：我们要计算fib(5)，于是其分解成fib(4) + fib(3)，而fib(4)分解成fib(3)+fib(2)，fib(3)又分解成fib(2)+fib(1)…… 你可看到，基本上来说，fib(3), fib(2), fib(1)在整个递归过程中被调用了两次。</p>
<p>而我们用decorator，在调用函数前查询一下缓存，如果没有才调用了，有了就从缓存中返回值。一下子，这个递归从二叉树式的递归成了线性的递归。</p>
<h5>Profiler的例子</h5>
<p>这个例子没什么高深的，就是实用一些。</p>
<pre class="brush: python; title: ; notranslate" title="">import cProfile, pstats, StringIO

def profiler(func):
    def wrapper(*args, **kwargs):
        datafn = func.__name__ + &quot;.profile&quot; # Name the data file
        prof = cProfile.Profile()
        retval = prof.runcall(func, *args, **kwargs)
        #prof.dump_stats(datafn)
        s = StringIO.StringIO()
        sortby = 'cumulative'
        ps = pstats.Stats(prof, stream=s).sort_stats(sortby)
        ps.print_stats()
        print s.getvalue()
        return retval

    return wrapper

</pre>
<h5>注册回调函数</h5>
<p>下面这个示例展示了通过URL的路由来调用相关注册的函数示例：</p>
<pre class="brush: python; title: ; notranslate" title="">class MyApp():
    def __init__(self):
        self.func_map = {}

    def register(self, name):
        def func_wrapper(func):
            self.func_map[name] = func
            return func
        return func_wrapper

    def call_method(self, name=None):
        func = self.func_map.get(name, None)
        if func is None:
            raise Exception(&quot;No function registered against - &quot; + str(name))
        return func()

app = MyApp()

@app.register('/')
def main_page_func():
    return &quot;This is the main page.&quot;

@app.register('/next_page')
def next_page_func():
    return &quot;This is the next page.&quot;

print app.call_method('/')
print app.call_method('/next_page')
</pre>
<p>注意：<br />
1）上面这个示例中，用类的实例来做decorator。<br />
2）decorator类中没有__call__()，但是wrapper返回了原函数。所以，原函数没有发生任何变化。</p>
<h5>给函数打日志</h5>
<p>下面这个示例演示了一个logger的decorator，这个decorator输出了函数名，参数，返回值，和运行时间。</p>
<pre class="brush: python; title: ; notranslate" title="">from functools import wraps
def logger(fn):
    @wraps(fn)
    def wrapper(*args, **kwargs):
        ts = time.time()
        result = fn(*args, **kwargs)
        te = time.time()
        print &quot;function      = {0}&quot;.format(fn.__name__)
        print &quot;    arguments = {0} {1}&quot;.format(args, kwargs)
        print &quot;    return    = {0}&quot;.format(result)
        print &quot;    time      = %.6f sec&quot; % (te-ts)
        return result
    return wrapper

@logger
def multipy(x, y):
    return x * y

@logger
def sum_num(n):
    s = 0
    for i in xrange(n+1):
        s += i
    return s

print multipy(2, 10)
print sum_num(100)
print sum_num(10000000)</pre>
<p>上面那个打日志还是有点粗糙，让我们看一个更好一点的（带log level参数的）：</p>
<pre class="brush: python; title: ; notranslate" title="">
import inspect
def get_line_number():
    return inspect.currentframe().f_back.f_back.f_lineno

def logger(loglevel):
    def log_decorator(fn):
        @wraps(fn)
        def wrapper(*args, **kwargs):
            ts = time.time()
            result = fn(*args, **kwargs)
            te = time.time()
            print &quot;function   = &quot; + fn.__name__,
            print &quot;    arguments = {0} {1}&quot;.format(args, kwargs)
            print &quot;    return    = {0}&quot;.format(result)
            print &quot;    time      = %.6f sec&quot; % (te-ts)
            if (loglevel == 'debug'):
                print &quot;    called_from_line : &quot; + str(get_line_number())
            return result
        return wrapper
    return log_decorator</pre>
<p>但是，上面这个带log level参数的有两具不好的地方，<br />
1） loglevel不是debug的时候，还是要计算函数调用的时间。<br />
2） 不同level的要写在一起，不易读。</p>
<p>我们再接着改进：</p>
<pre class="brush: python; title: ; notranslate" title="">import inspect

def advance_logger(loglevel):

    def get_line_number():
        return inspect.currentframe().f_back.f_back.f_lineno

    def _basic_log(fn, result, *args, **kwargs):
        print &quot;function   = &quot; + fn.__name__,
        print &quot;    arguments = {0} {1}&quot;.format(args, kwargs)
        print &quot;    return    = {0}&quot;.format(result)

    def info_log_decorator(fn):
        @wraps(fn)
        def wrapper(*args, **kwargs):
            result = fn(*args, **kwargs)
            _basic_log(fn, result, args, kwargs)
        return wrapper

    def debug_log_decorator(fn):
        @wraps(fn)
        def wrapper(*args, **kwargs):
            ts = time.time()
            result = fn(*args, **kwargs)
            te = time.time()
            _basic_log(fn, result, args, kwargs)
            print &quot;    time      = %.6f sec&quot; % (te-ts)
            print &quot;    called_from_line : &quot; + str(get_line_number())
        return wrapper

    if loglevel is &quot;debug&quot;:
        return debug_log_decorator
    else:
        return info_log_decorator
</pre>
<p>你可以看到两点，<br />
1）我们分了两个log level，一个是info的，一个是debug的，然后我们在外尾根据不同的参数返回不同的decorator。<br />
2）我们把info和debug中的相同的代码抽到了一个叫_basic_log的函数里，DRY原则。</p>
<h5>一个MySQL的Decorator</h5>
<p>下面这个decorator是我在工作中用到的代码，我简化了一下，把DB连接池的代码去掉了，这样能简单点，方便阅读。</p>
<pre class="brush: python; title: ; notranslate" title="">import umysql
from functools import wraps

class Configuraion:
    def __init__(self, env):
        if env == &quot;Prod&quot;:
            self.host    = &quot;coolshell.cn&quot;
            self.port    = 3306
            self.db      = &quot;coolshell&quot;
            self.user    = &quot;coolshell&quot;
            self.passwd  = &quot;fuckgfw&quot;
        elif env == &quot;Test&quot;:
            self.host   = 'localhost'
            self.port   = 3300
            self.user   = 'coolshell'
            self.db     = 'coolshell'
            self.passwd = 'fuckgfw'

def mysql(sql):

    _conf = Configuraion(env=&quot;Prod&quot;)

    def on_sql_error(err):
        print err
        sys.exit(-1)

    def handle_sql_result(rs):
        if rs.rows &gt; 0:
            fieldnames = [f[0] for f in rs.fields]
            return [dict(zip(fieldnames, r)) for r in rs.rows]
        else:
            return []

    def decorator(fn):
        @wraps(fn)
        def wrapper(*args, **kwargs):
            mysqlconn = umysql.Connection()
            mysqlconn.settimeout(5)
            mysqlconn.connect(_conf.host, _conf.port, _conf.user, \
                              _conf.passwd, _conf.db, True, 'utf8')
            try:
                rs = mysqlconn.query(sql, {})
            except umysql.Error as e:
                on_sql_error(e)

            data = handle_sql_result(rs)
            kwargs[&quot;data&quot;] = data
            result = fn(*args, **kwargs)
            mysqlconn.close()
            return result
        return wrapper

    return decorator

@mysql(sql = &quot;select * from coolshell&quot; )
def get_coolshell(data):
    ... ...
    ... ..
</pre>
<h5>线程异步</h5>
<p>下面量个非常简单的异步执行的decorator，注意，异步处理并不简单，下面只是一个示例。</p>
<pre class="brush: python; title: ; notranslate" title="">from threading import Thread
from functools import wraps

def async(func):
    @wraps(func)
    def async_func(*args, **kwargs):
        func_hl = Thread(target = func, args = args, kwargs = kwargs)
        func_hl.start()
        return func_hl

    return async_func

if __name__ == '__main__':
    from time import sleep

    @async
    def print_somedata():
        print 'starting print_somedata'
        sleep(2)
        print 'print_somedata: 2 sec passed'
        sleep(2)
        print 'print_somedata: 2 sec passed'
        sleep(2)
        print 'finished print_somedata'

    def main():
        print_somedata()
        print 'back in main'
        print_somedata()
        print 'back in main'

    main()
</pre>
<h4>其它</h4>
<p>关于更多的示例，你可以参看： <a href="https://wiki.python.org/moin/PythonDecoratorLibrary" target="_blank">Python Decorator Library</a></p>
<p>关于Python Decroator的各种提案，可以参看：<a href="https://wiki.python.org/moin/PythonDecoratorProposals" target="_blank">Python Decorator Proposals</a></p>
<p>（全文完）
<div style="margin-top: 15px; font-size: 11px;color: #cc0000;">
<p align=center><strong>（转载本站文章请注明作者和出处 <a href="http://coolshell.cn/">酷 壳 &#8211; CoolShell.cn</a> ，请勿用于任何商业用途）</strong></div>
<div style="text-align:center;padding:0px;font-size: 14px;margin-bottom: 50px;">——=== <b>访问 <a href=http://coolshell.cn/404/ target=_blank>酷壳404页面</a> 寻找遗失儿童。</b> ===——</div>
<div style="clear:both; margin-top:5px; margin-bottom:5px;"></div><div style="float:left"><!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<a class="jiathis_button_tsina"></a>
<a class="jiathis_button_tqq"></a>
<a class="jiathis_button_tsohu"></a>
<a class="jiathis_button_t163"></a>
<a class="jiathis_button_douban"></a>
<a class="jiathis_button_renren"></a>
<a class="jiathis_button_zhuaxia"></a>
<a class="jiathis_button_fanfou"></a>
<a class="jiathis_button_twitter"></a>
<a class="jiathis_button_fb"></a>
<a class="jiathis_button_gmail"></a>
<a class="jiathis_button_linkedin"></a>
<a class="jiathis_button_friendfeed"></a>
<a class="jiathis_button_digg"></a>
<a href="http://www.jiathis.com/share?uid=1541368" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
	data_track_clickback:true,
	summary:"",
	hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1541368" charset="utf-8"></script>
<!-- JiaThis Button END --></div><div style="clear:both; margin-top:5px; margin-bottom:5px;"></div>			<div class="fixed"></div>
		</div>
		<div class="under">
			<span class="categories">分类: </span><span><a href="http://coolshell.cn/category/proglanguage/pythondev" rel="category tag">Python</a>, <a href="http://coolshell.cn/category/progdesign" rel="category tag">程序设计</a>, <a href="http://coolshell.cn/category/proglanguage" rel="category tag">编程语言</a></span>			<span class="tags">标签: </span><span><a href="http://coolshell.cn/tag/decorator" rel="tag">Decorator</a>, <a href="http://coolshell.cn/tag/functional" rel="tag">functional</a>, <a href="http://coolshell.cn/tag/programming" rel="tag">Programming</a>, <a href="http://coolshell.cn/tag/pythondev" rel="tag">Python</a>, <a href="http://coolshell.cn/tag/%e5%87%bd%e6%95%b0%e5%bc%8f" rel="tag">函数式</a></span>		</div>
<div id="post-ratings-11265" class="post-ratings" itemscope itemtype="http://schema.org/Article" data-nonce="f200978745"><img id="rating_11265_1" src="http://coolshell.cn//wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="好烂啊" title="好烂啊" onmouseover="current_rating(11265, 1, '好烂啊');" onmouseout="ratings_off(5, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating_11265_2" src="http://coolshell.cn//wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="有点差" title="有点差" onmouseover="current_rating(11265, 2, '有点差');" onmouseout="ratings_off(5, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating_11265_3" src="http://coolshell.cn//wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="凑合看看" title="凑合看看" onmouseover="current_rating(11265, 3, '凑合看看');" onmouseout="ratings_off(5, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating_11265_4" src="http://coolshell.cn//wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="还不错" title="还不错" onmouseover="current_rating(11265, 4, '还不错');" onmouseout="ratings_off(5, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /><img id="rating_11265_5" src="http://coolshell.cn//wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="很精彩" title="很精彩" onmouseover="current_rating(11265, 5, '很精彩');" onmouseout="ratings_off(5, 0, 0);" onclick="rate_post();" onkeypress="rate_post();" style="cursor: pointer; border: 0px;" /> (<strong>13</strong> 人打了分，平均分： <strong>5.00</strong> )<br /><span class="post-ratings-text" id="ratings_11265_text"></span><meta itemprop="name" content="Python修饰器的函数式编程" /><meta itemprop="description" content="Python的修饰器的英文名叫Decorator，当你看到这个英文名的时候，你可能会把其跟Design Pattern里的Decorator搞混了，其实这是完全不同的两个东西。虽然好像，他们要干的事都很相似&mdash;&mdash;都是想要对一个已有的模块做一些&ldquo;修饰工作&rdquo;，所谓修饰工作就是想给现有的模块加上一些小装饰（一些小功能，这些小功能可能好多模块都会用到），但又不让这个小装饰（小功能）侵入到原有的模块中的代码里..." /><meta itemprop="url" content="http://coolshell.cn/articles/11265.html" /><div style="display: none;" itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating"><meta itemprop="bestRating" content="5" /><meta itemprop="ratingValue" content="5" /><meta itemprop="ratingCount" content="13" /></div></div><div id="post-ratings-11265-loading" class="post-ratings-loading">
			<img src="http://coolshell.cn//wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" alt="Loading..." title="Loading..." class="post-ratings-image" />Loading...</div> 
	</div>

	<!-- related posts START -->
	<div id="related_posts">
<div class="wp_rp_wrap  wp_rp_plain" id="wp_rp_first"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li data-position="0" data-poid="in-10822" data-post-type="none" ><small class="wp_rp_publish_date">2013年12月27日</small> <a href="http://coolshell.cn/articles/10822.html" class="wp_rp_title">函数式编程</a></li><li data-position="1" data-poid="in-12052" data-post-type="none" ><small class="wp_rp_publish_date">2014年10月23日</small> <a href="http://coolshell.cn/articles/12052.html" class="wp_rp_title">Leetcode 编程训练</a></li><li data-position="2" data-poid="in-11656" data-post-type="none" ><small class="wp_rp_publish_date">2014年06月09日</small> <a href="http://coolshell.cn/articles/11656.html" class="wp_rp_title">开发团队的效率</a></li><li data-position="3" data-poid="in-11170" data-post-type="none" ><small class="wp_rp_publish_date">2014年03月06日</small> <a href="http://coolshell.cn/articles/11170.html" class="wp_rp_title">如何用最有创造力的方式输出42</a></li><li data-position="4" data-poid="in-11094" data-post-type="none" ><small class="wp_rp_publish_date">2014年02月22日</small> <a href="http://coolshell.cn/articles/11094.html" class="wp_rp_title">可视化编程</a></li><li data-position="5" data-poid="in-10169" data-post-type="none" ><small class="wp_rp_publish_date">2013年07月22日</small> <a href="http://coolshell.cn/articles/10169.html" class="wp_rp_title">类型的本质和函数式实现</a></li><li data-position="6" data-poid="in-8387" data-post-type="none" ><small class="wp_rp_publish_date">2012年10月14日</small> <a href="http://coolshell.cn/articles/8387.html" class="wp_rp_title">Bret Victor &#8211; Learnable Programming</a></li><li data-position="7" data-poid="in-7886" data-post-type="none" ><small class="wp_rp_publish_date">2012年07月13日</small> <a href="http://coolshell.cn/articles/7886.html" class="wp_rp_title">代码执行的效率</a></li></ul></div></div>
</div><div class="fixed"></div>	<!-- related posts END -->

	<script type="text/javascript" src="http://coolshell.cn//wp-content/themes/inove/js/comment.js"></script>



<div id="comments">

<div id="cmtswitcher">
			<a id="commenttab" class="curtab" href="javascript:void(0);" onclick="MGJS.switchTab('thecomments,commentnavi', 'thetrackbacks', 'commenttab', 'curtab', 'trackbacktab', 'tab');">评论 (38)</a>
		<a id="trackbacktab" class="tab" href="javascript:void(0);" onclick="MGJS.switchTab('thetrackbacks', 'thecomments,commentnavi', 'trackbacktab', 'curtab', 'commenttab', 'tab');">Trackbacks (8)</a>
				<span class="addcomment"><a href="#respond">发表评论</a></span>
				<span class="addtrackback"><a href="http://coolshell.cn/articles/11265.html/trackback">Trackback</a></span>
		<div class="fixed"></div>
</div>

<div id="commentlist">
	<!-- comments START -->
	<ol id="thecomments">
		<li class="comment regularcomment" id="comment-1398070">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/2f45223153d2ae1ee9f3c6c6ec180f25?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398070">
				
				kamushin
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:14					 | <a href="#comment-1398070">#1</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398070', 'comment-1398070', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398070', 'comment-1398070', 'commentbody-1398070', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398070">
					<p>沙发. 还有个很常用的功能 @web.authenticated</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398073">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/5fbe9a54086d17592fed83a922484656?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398073">
				
				ljdawn
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:15					 | <a href="#comment-1398073">#2</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398073', 'comment-1398073', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398073', 'comment-1398073', 'commentbody-1398073', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398073">
					<p>好文。。。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398082">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/ee59cc6f674d495e835d48437aee8152?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398082" class="url" href="https://github.com/wks" rel="external nofollow">
				
				wks
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:29					 | <a href="#comment-1398082">#3</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398082', 'comment-1398082', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398082', 'comment-1398082', 'commentbody-1398082', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398082">
					<p>Python 3.4里的asyncio更好玩。coroutine使用generator而不是thread。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398086">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/e28e5d13a8b49ec4915100d0cff1c819?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398086">
				
				子江
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:32					 | <a href="#comment-1398086">#4</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398086', 'comment-1398086', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398086', 'comment-1398086', 'commentbody-1398086', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398086">
					<p>请问get_line_number 在哪里定义的呢？</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

<ul class="children">
	<li class="comment admincomment" id="comment-1398090">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398090" class="url" href="http://coolshell.cn" rel="external nofollow">
				
				陈皓
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:40					 | <a href="#comment-1398090">#5</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398090', 'comment-1398090', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398090', 'comment-1398090', 'commentbody-1398090', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398090">
					<p>代码没贴全，Sorry，已补上。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398087">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/c5d3c59e2c625d3308b6f1cb40124987?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398087">
				
				astrum
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:35					 | <a href="#comment-1398087">#6</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398087', 'comment-1398087', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398087', 'comment-1398087', 'commentbody-1398087', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398087">
					<p>&#8212;&#8211; 要修正这一问，我们还得用Python的反映来解决，下面是相关的代码：</p>
<p>反映应该是反射</p>
<p>文章很棒！</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

<ul class="children">
	<li class="comment admincomment" id="comment-1398092">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398092" class="url" href="http://coolshell.cn" rel="external nofollow">
				
				陈皓
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日10:40					 | <a href="#comment-1398092">#7</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398092', 'comment-1398092', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398092', 'comment-1398092', 'commentbody-1398092', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398092">
					<p>谢谢，已修正。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398133">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/2a6bfae50f7ab1b78db49c4745bf94d2?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398133">
				
				Tydus
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日11:21					 | <a href="#comment-1398133">#8</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398133', 'comment-1398133', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398133', 'comment-1398133', 'commentbody-1398133', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398133">
					<blockquote cite="#commentbody-1398070"><p>
<strong><a href="#comment-1398070" rel="nofollow">kamushin</a> :</strong><br />
沙发. 还有个很常用的功能 @web.authenticated
</p></blockquote>
<p>Tornado党握爪</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398198">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/c13e3a796108199da5d4e09afb612e93?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398198">
				
				地狱星星
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日12:46					 | <a href="#comment-1398198">#9</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398198', 'comment-1398198', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398198', 'comment-1398198', 'commentbody-1398198', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398198">
					<p>好文，强烈推荐</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398208">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/b58f97156251c54126ee609bd00ecb05?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398208">
				
				Ming
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日13:04					 | <a href="#comment-1398208">#10</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398208', 'comment-1398208', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398208', 'comment-1398208', 'commentbody-1398208', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398208">
					<p>可以用来实现AOP</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398246">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/f1ad4800358292dd53cd5cfc4f54d378?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398246">
				
				e3rp4y
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日13:33					 | <a href="#comment-1398246">#11</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398246', 'comment-1398246', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398246', 'comment-1398246', 'commentbody-1398246', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398246">
					<p>所以，Python的functool包中提供了一个叫wrap的decorator来消除这样的副作用。下面是我们新版本的hello.py。<br />
wrap -&gt; wraps</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398324">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/d8756f95244a837897b560d9eb35318d?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398324" class="url" href="http://blog.ithomer.net" rel="external nofollow">
				
				sunboy_2050
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日14:58					 | <a href="#comment-1398324">#12</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398324', 'comment-1398324', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398324', 'comment-1398324', 'commentbody-1398324', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398324">
					<p>每篇都是精品，钦佩之余，更多的是激励自己加倍努力！</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398330">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/3360b090ecd09b1d383f8362567c396d?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398330">
				
				frank
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日15:14					 | <a href="#comment-1398330">#13</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398330', 'comment-1398330', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398330', 'comment-1398330', 'commentbody-1398330', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398330">
					<p>篇篇都是硬货！<br />
不过“注册回调函数”这个例子有些问题，“你调用main_page_func()或是next_page_func()就调到了黑洞了，啥也不会发生。你只有通过app.call_method才行。”，这句话是不对的，@app.register(&#8216;/&#8217;) 注册了函数后直接把原函数返回了，所以main_page_func这个函数没有任何变化，可以跟原来一样调用。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

<ul class="children">
	<li class="comment admincomment" id="comment-1398704">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/af2fbb7372dd5826e44d87e6ceccea40?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398704" class="url" href="http://coolshell.cn" rel="external nofollow">
				
				陈皓
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月21日00:24					 | <a href="#comment-1398704">#14</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398704', 'comment-1398704', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398704', 'comment-1398704', 'commentbody-1398704', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398704">
					<p>谢谢指正，是我眼花了。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398343">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/f6e8f50be1751f1bb1648b0fb473850d?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398343" class="url" href="http://zhouzhenghui@gmail.com" rel="external nofollow">
				
				zhouzhenghui
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日15:28					 | <a href="#comment-1398343">#15</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398343', 'comment-1398343', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398343', 'comment-1398343', 'commentbody-1398343', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398343">
					<p>典型的反框架模式，或者叫非侵入式框架，摒弃了强制性换取灵活性。可以人肉AOP。缺点是复用部分不够彻底，还有感觉这种功能以continuation实现的方式不如放到meta programming层次来的通用。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398406">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/93f4afed3423fc2914dcb4ed35dd50b8?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398406">
				
				expbored
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日16:56					 | <a href="#comment-1398406">#16</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398406', 'comment-1398406', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398406', 'comment-1398406', 'commentbody-1398406', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398406">
					<p>解释下“class式的 Decorator”节中aFunction()多次调用仅输出一次“inside myDecorator.__init__()”背后的动作是不是更有助于理解修饰器呢？</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398533">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/3e3c1cb94b9ad3551cd9d43f2e52e105?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398533" class="url" href="http://lilydjwg.is-programmer.com/" rel="external nofollow">
				
				依云
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日20:23					 | <a href="#comment-1398533">#17</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398533', 'comment-1398533', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398533', 'comment-1398533', 'commentbody-1398533', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398533">
					<blockquote cite="#commentbody-1398133"><p>
<strong><a href="#comment-1398133" rel="nofollow">Tydus</a> :</strong></p>
<blockquote cite="#commentbody-1398070"><p>
<strong><a href="#comment-1398070" rel="nofollow">kamushin</a> :</strong><br />
沙发. 还有个很常用的功能 @web.authenticated
</p></blockquote>
<p>Tornado党握爪
</p></blockquote>
<p>还有 @gen.coroutine 呢喵～<br />
话说那个 @memo 在 Python 3.2+ 可以用 @functools.lru_cache 取代了 :-)</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398541">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/f96c3c8b7bb6f98233637b7372aedc81?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1398541">
				
				飞罗
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日20:38					 | <a href="#comment-1398541">#18</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398541', 'comment-1398541', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398541', 'comment-1398541', 'commentbody-1398541', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398541">
					<p>在带参数及多个Decrorator模块下：<br />
wrapper函数中的 fn(*args, **kwds) 改成fn() 会不会更好点，因为fn调用没有参数</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398564">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/bf1d48585e0f9b50468ecac876dc6840?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398564" class="url" href="http://eleveni386.7axu.com" rel="external nofollow">
				
				eleveni386
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日21:06					 | <a href="#comment-1398564">#19</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398564', 'comment-1398564', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398564', 'comment-1398564', 'commentbody-1398564', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398564">
					<p><a href="#comment-1398133" rel="nofollow">@Tydus </a><br />
tornado党 +1 ,@web.authenticated 好用</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398646">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/b88c3f2c14ff798ede69894d619ee9c5?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398646" class="url" href="http://www.900te.com/" rel="external nofollow">
				
				九百特
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日22:47					 | <a href="#comment-1398646">#20</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398646', 'comment-1398646', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398646', 'comment-1398646', 'commentbody-1398646', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398646">
					<p>正在学习python，收藏了。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1398653">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/7c7a7e0d3179803550e8c35ad4a9324a?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1398653" class="url" href="http://xx.com" rel="external nofollow">
				
				xxxxxxxxx
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月20日22:55					 | <a href="#comment-1398653">#21</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1398653', 'comment-1398653', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1398653', 'comment-1398653', 'commentbody-1398653', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1398653">
					<p>我也是这么理解的<a href="#comment-1398330" rel="nofollow">@frank </a></p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1399087">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/2397f447c7138486dc46ff78c1b966ac?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1399087">
				
				autumnm1981
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月21日09:04					 | <a href="#comment-1399087">#22</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1399087', 'comment-1399087', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1399087', 'comment-1399087', 'commentbody-1399087', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1399087">
					<p>C#中没有Annotation，对应的技术应该是Attribute。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1400097">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/4a017e1023aa320bdcb0e8b4a340fd05?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1400097" class="url" href="http://www.srdz.biz" rel="external nofollow">
				
				私人定制
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月22日10:46					 | <a href="#comment-1400097">#23</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1400097', 'comment-1400097', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1400097', 'comment-1400097', 'commentbody-1400097', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1400097">
					<p>感谢楼主分享，学习了</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1401490">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/2bc5e1494b7ec49d9455c71d513e6091?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1401490">
				
				coneagoe
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月23日15:37					 | <a href="#comment-1401490">#24</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1401490', 'comment-1401490', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1401490', 'comment-1401490', 'commentbody-1401490', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1401490">
					<p>我以前一直深信好的架构能够减少维护成本，不过后来我开始有疑问了。其实不管是开发的人还是维护的人，学习成本是一样的。如果维护的人不能理解设计者的本意，再好的代码也会变成bull shit。所以学习的成本是一样的。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1401889">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/53bad55d100a470e20652bbec92d0a36?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1401889">
				
				blowyourheart
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月23日23:41					 | <a href="#comment-1401889">#25</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1401889', 'comment-1401889', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1401889', 'comment-1401889', 'commentbody-1401889', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1401889">
					<p><a href="#comment-1398564" rel="nofollow">@eleveni386 </a><br />
@login_required 也好用。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1403585">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/7cc8c0a0927d6dbcafd4b6ec3826ce41?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1403585">
				
				kelvinhust
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月25日13:54					 | <a href="#comment-1403585">#26</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1403585', 'comment-1403585', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1403585', 'comment-1403585', 'commentbody-1403585', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1403585">
					<p>= =我昨天面试刚好给人问了什么是Python的Decorator，然后我就回答这其实就是Decorator Pattern的实现。。<br />
我看了stackoverflow的回答（http://stackoverflow.com/questions/8328824/whats-the-difference-between-python-decorators-and-decorator-pattern），上面说Python的Decorator是在定义的时候去修改行为，Decorator模式是在运行期修改行为，所以Python的就高阶一点。<br />
但我觉得从本质上来看，两者都是通过Decorator包装原有的，来修改行为，思想是一样的。。<br />
真心求教，期待回答，谢谢！</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1405146">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/866e444119eea190da856c0c8c5c77b6?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1405146">
				
				zz
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月26日22:42					 | <a href="#comment-1405146">#27</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1405146', 'comment-1405146', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1405146', 'comment-1405146', 'commentbody-1405146', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1405146">
					<p>好文章啊！<br />
不过有一点还不懂，就是使用类方式实现装饰器的时候怎么消除副作用啊，foo.__name__直接就没有了，用@wraps也不行？？？</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1405192">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/866e444119eea190da856c0c8c5c77b6?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1405192">
				
				zz
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年3月26日23:31					 | <a href="#comment-1405192">#28</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1405192', 'comment-1405192', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1405192', 'comment-1405192', 'commentbody-1405192', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1405192">
					<blockquote cite="#commentbody-1405146"><p>
<strong><a href="#comment-1405146" rel="nofollow">zz</a> :</strong><br />
好文章啊！<br />
不过有一点还不懂，就是使用类方式实现装饰器的时候怎么消除副作用啊，foo.__name__直接就没有了，用@wraps也不行？？？
</p></blockquote>
<p>def __init__(self, fn):<br />
          self.fn = fn<br />
          self.__name__ = fn.__name__<br />
用这个倒是可以，请教楼主还有更好的方法么？</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1413230">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/a4be7690be36494e49e23611c15f17ff?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1413230">
				
				zzzz
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年4月3日11:04					 | <a href="#comment-1413230">#29</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1413230', 'comment-1413230', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1413230', 'comment-1413230', 'commentbody-1413230', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1413230">
					<p>return &#8220;Hello, {}&#8221;.format(name)<br />
&#8220;Hello, {0}&#8221;.format(name)</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1417418">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/6ce0a171830f1ce54d584b267c7b27c2?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1417418">
				
				Majoy7
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年4月8日11:05					 | <a href="#comment-1417418">#30</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1417418', 'comment-1417418', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1417418', 'comment-1417418', 'commentbody-1417418', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1417418">
					<p>这样挺酷的。不过有个疑问是，函数本身为何要关注自己如何被decorate，由调用者来决定不是更好，而且不同的调用者可能会有不同的decorate需求。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1422337">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/9a694aaff0df2a4fe7d31d7f198cd342?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1422337" class="url" href="http://www.cnblogs.com/fbwfbi" rel="external nofollow">
				
				fbw
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年4月13日17:53					 | <a href="#comment-1422337">#31</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1422337', 'comment-1422337', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1422337', 'comment-1422337', 'commentbody-1422337', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1422337">
					<p>自习分析了一下，html.py的调用执行流程，发现这个带参数的多个decorator的执行流程和优先级顺序，让人有点费解</p>
<pre class="brush: python; title: ; notranslate" title="">def makeHtmlTag(tag, *args, **kwds):
    print &quot;Enter the makeHtmlTag &quot;,tag,args,kwds
    def real_decorator(fn):
        print &quot;Enter the real_dec&quot;
        css_class = &quot; class='{0}'&quot;.format(kwds[&quot;css_class&quot;]) \
                            if &quot;css_class&quot; in kwds else &quot;&quot;
        print &quot;\tcss_class:&quot;+css_class
        print &quot;\tfn.__name__:&quot;+fn.__name__
        def wrapped(*args, **kwds):
            print &quot;Enter the warapped&quot;,args,kwds
            print &quot;\twarp_fn.__name__:&quot;+fn.__name__
            print &quot;\tcurrnt css_calss:&quot;+css_class
            print &quot;leave the warapped&quot;,args,kwds
            return  &quot;&quot; + fn(*args, **kwds) + &quot;&quot;
        print &quot;leave the real_dec&quot;
        return wrapped
    print &quot;      ...........     &quot;
    print &quot;leave the makeHtmlTag &quot;,tag,args,kwds
    return real_decorator

@makeHtmlTag(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)
@makeHtmlTag(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)
def hello():
    return &quot;hello world&quot;

print hello()</pre>
<p>——————————————————————————————<br />
输出结果如下：</p>
<pre class="brush: bash; title: ; notranslate" title="">Enter the makeHtmlTag  b () {'css_class': 'bold_css'}
      ...........     
leave the makeHtmlTag  b () {'css_class': 'bold_css'}
Enter the makeHtmlTag  i () {'css_class': 'italic_css'}
      ...........     
leave the makeHtmlTag  i () {'css_class': 'italic_css'}
Enter the real_dec
	css_class: class='italic_css'
	fn.__name__:hello
leave the real_dec
Enter the real_dec
	css_class: class='bold_css'
	fn.__name__:wrapped
leave the real_dec
Enter the warapped () {}
	warp_fn.__name__:wrapped
	currnt css_calss: class='bold_css'
leave the warapped () {}
Enter the warapped () {}
	warp_fn.__name__:hello
	currnt css_calss: class='italic_css'
leave the warapped () {}
&lt;b&gt;&lt;i&gt;hello world&lt;/i&gt;&lt;/b&gt;</pre>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1446218">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/7f906f3e4088f5272cd74adc81827fe4?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1446218" class="url" href="http://addbook.cn" rel="external nofollow">
				
				addbook
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年4月25日17:35					 | <a href="#comment-1446218">#32</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1446218', 'comment-1446218', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1446218', 'comment-1446218', 'commentbody-1446218', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1446218">
					<p>@Tydus </p>
<p>`@gen.coroutine`<br />
更常用吧，否则tornado用着没意思了。。。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1446225">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/7f906f3e4088f5272cd74adc81827fe4?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1446225" class="url" href="http://addbook.cn" rel="external nofollow">
				
				addbook
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年4月25日17:40					 | <a href="#comment-1446225">#33</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1446225', 'comment-1446225', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1446225', 'comment-1446225', 'commentbody-1446225', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1446225">
					<blockquote cite="#commentbody-1446218"><p>
<strong><a href="#comment-1446218" rel="nofollow">addbook</a> :</strong><br />
@Tydus<br />
@gen.coroutine<br />
更常用吧，否则tornado用着没意思了。。。<br />
博主可以使用markdown编辑器，可能更方便。。
</p></blockquote>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1460636">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/0e89c6c50e32ab6bd04a1949f2a07641?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1460636">
				
				winlin
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年5月13日19:51					 | <a href="#comment-1460636">#34</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1460636', 'comment-1460636', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1460636', 'comment-1460636', 'commentbody-1460636', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1460636">
					<blockquote cite="#commentbody-1398541"><p>
<strong><a href="#comment-1398541" rel="nofollow">飞罗</a> :</strong><br />
在带参数及多个Decrorator模块下：<br />
wrapper函数中的 fn(*args, **kwds) 改成fn() 会不会更好点，因为fn调用没有参数
</p></blockquote>
<p>同问，能不能同时适用于fn() 与 fn(*args, **kwargs)</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1489636">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/e94656cb82a8f7228e13e1d9d56fb101?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1489636">
				
				virusdefender
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年7月2日09:28					 | <a href="#comment-1489636">#35</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1489636', 'comment-1489636', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1489636', 'comment-1489636', 'commentbody-1489636', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1489636">
					<p>赞！！篇篇都是干货！</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1492401">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/3a9464e2d54834a399e4afc0ad60eba4?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1492401">
				
				轨迹
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年7月8日12:27					 | <a href="#comment-1492401">#36</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1492401', 'comment-1492401', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1492401', 'comment-1492401', 'commentbody-1492401', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1492401">
					<p>很棒</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1512191">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/8cdfdf1d7a8456aeb222ce303b9d6c25?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-1512191" class="url" href="http://www.digglife.net" rel="external nofollow">
				
				摩摩诘
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年8月14日00:49					 | <a href="#comment-1512191">#37</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1512191', 'comment-1512191', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1512191', 'comment-1512191', 'commentbody-1512191', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1512191">
					<p>解决了困扰我很长时间的疑问，目前为止看过关于decorator解释得最清楚的文章。</p>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-1523681">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/4b5032c26bf6c0b2a2e9eb00db8f1d01?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-1523681">
				
				gaoxiao
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				2014年9月1日12:08					 | <a href="#comment-1523681">#38</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-1523681', 'comment-1523681', 'comment');">回复</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-1523681', 'comment-1523681', 'commentbody-1523681', 'comment');">引用</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-1523681">
					<pre class="brush: python; title: ; notranslate" title="">def makeHtmlTag(tag, *args, **kwds):
    def real_decorator(fn):
        css_class = &quot; class='{0}'&quot;.format(kwds[&quot;css_class&quot;]) \
                                     if &quot;css_class&quot; in kwds else &quot;&quot;
        def wrapped(*args, **kwds):
            return &quot;&quot; + fn(*args, **kwds) + &quot;&quot;
        return wrapped
    return real_decorator
 
@makeHtmlTag(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)
@makeHtmlTag(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)
def hello():
    return &quot;hello world&quot;
 
print hello()</pre>
<p>上面这段代码，wrapped函数应该没必要传参吧？改成下面这样结果是一样的：</p>
<pre class="brush: python; title: ; notranslate" title="">def makeHtmlTag(tag, *args, **kwds):
    def real_decorator(fn):
        css_class = &quot; class='{0}'&quot;.format(kwds[&quot;css_class&quot;]) \
                                     if &quot;css_class&quot; in kwds else &quot;&quot;
        def wrapped():
            return &quot;&quot; + fn() + &quot;&quot;
        return wrapped
    return real_decorator
 
@makeHtmlTag(tag=&quot;b&quot;, css_class=&quot;bold_css&quot;)
@makeHtmlTag(tag=&quot;i&quot;, css_class=&quot;italic_css&quot;)
def hello():
    return &quot;hello world&quot;
 
print hello()</pre>
				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	</ol>
	<!-- comments END -->


	<!-- trackbacks START -->
			<ol id="thetrackbacks">
												<li class="trackback">
						<div class="date">
							2014年6月5日10:35							 | <a href="#comment-1475708">#1</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://debugo.com/reading-list-1/">
								Reading List 1 | Debugo							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年6月8日15:49							 | <a href="#comment-1477606">#2</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://makaidong.com/10258.html">
								函数式编程 &#8211; IT牛人博客聚合							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年6月9日21:17							 | <a href="#comment-1478480">#3</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://www.xdhcn.com/?p=991">
								开发团队的效率 | 星达红							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年8月11日12:37							 | <a href="#comment-1510549">#4</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://www.makaidong.com/blog/30217.html">
								如何用最有创造力的方式输出42 &#8211; 马开东博客							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年9月3日17:35							 | <a href="#comment-1525134">#5</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://tanx.in/understanding-python-decorator/">
								understanding Python decorator &#8211; 麦克谈心							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年9月8日19:36							 | <a href="#comment-1529155">#6</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://diyun.ga/wp/383">
								Python修饰器的函数式编程 | Yun&#039;s Blog							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年12月1日11:57							 | <a href="#comment-1618382">#7</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://www.leesven.com/?p=1172">
								python 参考博文 | Running Snail							</a>
						</div>
					</li>
									<li class="trackback">
						<div class="date">
							2014年12月25日21:38							 | <a href="#comment-1635404">#8</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://www.chawenti.com/articles/28172.html">
								使用Flask设计带认证token的RESTful API接口[翻译] &#8211; Vovolie | 查问题							</a>
						</div>
					</li>
				
					</ol>
		<div class="fixed"></div>
	<!-- trackbacks END -->
</div>

</div>

	<form action="http://coolshell.cn/wp-comments-post.php" method="post" id="commentform">
	<div id="respond">

					
			<div id="author_info">
				<div class="row">
					<input type="text" name="author" id="author" class="textfield" value="" size="24" tabindex="1" />
					<label for="author" class="small">昵称 (必填)</label>
				</div>
				<div class="row">
					<input type="text" name="email" id="email" class="textfield" value="" size="24" tabindex="2" />
					<label for="email" class="small">电子邮箱 (我们会为您保密) (必填)</label>
				</div>
				<div class="row">
					<input type="text" name="url" id="url" class="textfield" value="" size="24" tabindex="3" />
					<label for="url" class="small">网址</label>
				</div>
			</div>

			
		
		<!-- comment input -->
		<div class="row">
			<textarea name="comment" id="comment" tabindex="4" rows="8" cols="50"></textarea>
		</div>

		<!-- comment submit and rss -->
		<div id="submitbox">
			<a class="feed" href="http://coolshell.cn/comments/feed">订阅评论</a>
			<div class="submitbutton">
				<input name="submit" type="submit" id="submit" class="button" tabindex="5" value="提交评论" />
			</div>
						<input type="hidden" name="comment_post_ID" value="11265" />
			<div class="fixed"></div>
		</div>

	</div>
	<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="a54cb7ff26" /></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="43"/></p>	</form>

	

	<div id="postnavi">
		<span class="prev"><a href="http://coolshell.cn/articles/11312.html" rel="next">无插件Vim编程技巧</a></span>
		<span class="next"><a href="http://coolshell.cn/articles/11235.html" rel="prev">一个浮点数跨平台产生的问题</a></span>
		<div class="fixed"></div>
	</div>


<script type='text/javascript'>
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-7486123-1']);
_gaq.push(['_trackPageview']);

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
	</div>
	<!-- main END -->

	
<!-- sidebar START -->
<div id="sidebar">

<!-- sidebar north START -->
<div id="northsidebar" class="sidebar">

	<!-- feeds -->
	<div class="widget widget_feeds">
		<div class="content">
			<div id="subscribe">
				<a rel="external nofollow" id="feedrss" title="订阅这个博客的文章" href="http://coolshell.cn/feed">订阅</a>
									<ul id="feed_readers">
						<li id="google_reader"><a rel="external nofollow" class="reader" title="订阅到 Google" href="http://fusion.google.com/add?feedurl=http://coolshell.cn/feed"><span> Google</span></a></li>
						<li id="youdao_reader"><a rel="external nofollow" class="reader" title="订阅到有道" href="http://reader.youdao.com/#url=http://coolshell.cn/feed"><span>有道</span></a></li>
						<li id="xianguo_reader"><a rel="external nofollow" class="reader" title="订阅到鲜果" href="http://www.xianguo.com/subscribe.php?url=http://coolshell.cn/feed"><span>鲜果</span></a></li>
						<li id="zhuaxia_reader"><a rel="external nofollow" class="reader" title="订阅到抓虾" href="http://www.zhuaxia.com/add_channel.php?url=http://coolshell.cn/feed"><span>抓虾</span></a></li>
						<li id="yahoo_reader"><a rel="external nofollow" class="reader" title="订阅到 My Yahoo!"	href="http://add.my.yahoo.com/rss?url=http://coolshell.cn/feed"><span> My Yahoo!</span></a></li>
						<li id="newsgator_reader"><a rel="external nofollow" class="reader" title="订阅到 newsgator"	href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://coolshell.cn/feed"><span> newsgator</span></a></li>
						<li id="bloglines_reader"><a rel="external nofollow" class="reader" title="订阅到 Bloglines"	href="http://www.bloglines.com/sub/http://coolshell.cn/feed"><span> Bloglines</span></a></li>
						<li id="inezha_reader"><a rel="external nofollow" class="reader" title="订阅到哪吒"	href="http://inezha.com/add?url=http://coolshell.cn/feed"><span>哪吒</span></a></li>
<li id="qq_reader"><a class="reader" title="订阅到QQ Mail" onclick="window.open(this.href);return false;" rel="external nofollow" href="http://mail.qq.com/cgi-bin/feed?u=http://coolshell.cn/feed"><span>
			QQ Mail            </span></a></li>
            <li id="douban_reader"><a class="reader" title="订阅到Douban" onclick="window.open(this.href);return false;" rel="external nofollow" href="http://9.douban.com/reader/subscribe?url=http://coolshell.cn/feed"><span>
			Douban            </span></a></li>
            <li id="rojo_reader"><a class="reader" title="订阅到Rojo" onclick="window.open(this.href);return false;" rel="external nofollow" href="http://www.rojo.com/add-subscription?resource=http://coolshell.cn/feed"><span>
            Rojo            </span></a></li>
            <li id="pageflakes_reader"><a class="reader" title="订阅到Pageflakes" onclick="window.open(this.href);return false;" rel="external nofollow" href="http://www.pageflakes.com/subscribe.aspx?url=http://coolshell.cn/feed"><span>
            Pageflakes            </span></a></li>
					</ul>
							</div>
							<a id="followme" title="Follow me!" href="http://twitter.com/haoel/">Twitter</a>
						<div class="fixed"></div>
		</div>
	</div>

	<!-- showcase -->
			<div class="widget">
							<h3>本站公告</h3>
						<div class="content">
				<p align="center" style="background-color: #777;padding: 5px;color: white;font-weight: bold;border: solid 1px black;text-shadow: 0px 0px 3px black;">访问 <a href="http://coolshell.cn/404/" target=_blank style="color: #FFE249;">酷壳404页面</a> 寻找遗失儿童！</p>

<p>酷壳建议大家多使用RSS访问阅读（本站已经是全文输出，推荐使用cloud.feedly.com 或 digg.com）。有相关事宜欢迎电邮：haoel(at)hotmail.com。最后，感谢大家对酷壳的支持和体谅！</p>
			</div>
		</div>
	
		<div id="recent-posts-2" class="widget widget_recent_entries">		<h3>最新文章</h3>		<ul>
					<li>
				<a href="http://coolshell.cn/articles/12225.html">DHH 谈混合移动应用开发</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/12206.html">HTML6 展望</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/12136.html">Google Inbox如何跨平台重用代码？</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/12103.html">vfork 挂掉的一个问题</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/12052.html">Leetcode 编程训练</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/12012.html">State Threads 回调终结者</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11973.html">bash代码注入的安全漏洞</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11928.html">互联网之子 &#8211; Aaron Swartz</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11847.html">谜题的答案和活动的心得体会</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11832.html">【活动】解迷题送礼物</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11656.html">开发团队的效率</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11609.html">TCP 的那些事儿（下）</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11564.html">TCP 的那些事儿（上）</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11629.html">「我只是认真」聊聊工匠情怀</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11541.html">面向GC的Java编程</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11466.html">C语言的整型溢出问题</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11454.html">从LongAdder看更高效的无锁实现</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11432.html">从Code Review 谈如何做技术</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11377.html">C语言结构体里的成员数组和指针</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11312.html">无插件Vim编程技巧</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11265.html">Python修饰器的函数式编程</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11235.html">一个浮点数跨平台产生的问题</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11175.html">Java中的CopyOnWrite容器</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11170.html">如何用最有创造力的方式输出42</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11112.html">由苹果的低级Bug想到的</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11094.html">可视化编程</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/11021.html">从“黑掉Github”学Web安全开发</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/10975.html">一个“蝇量级” C 语言协程库</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/10910.html">分布式系统的事务处理</a>
						</li>
					<li>
				<a href="http://coolshell.cn/articles/10822.html">函数式编程</a>
						</li>
				</ul>
		</div><div id="views-4" class="widget widget_views"><h3>全站热门</h3><ul>
<li><a href="http://coolshell.cn/articles/4990.html"  title="程序员技术练级攻略 - 504,034 人阅读">程序员技术练级攻略</a></li><li><a href="http://coolshell.cn/articles/5426.html"  title="简明 Vim 练级攻略 - 418,035 人阅读">简明 Vim 练级攻略</a></li><li><a href="http://coolshell.cn/articles/7186.html"  title="做个环保主义的程序员 - 209,791 人阅读">做个环保主义的程序员</a></li><li><a href="http://coolshell.cn/articles/4102.html"  title="如何学好C语言 - 176,192 人阅读">如何学好C语言</a></li><li><a href="http://coolshell.cn/articles/914.html"  title="6个变态的C语言Hello World程序 - 145,785 人阅读">6个变态的C语言Hello World程序</a></li><li><a href="http://coolshell.cn/articles/8883.html"  title="应该知道的Linux技巧 - 142,621 人阅读">应该知道的Linux技巧</a></li><li><a href="http://coolshell.cn/articles/2250.html"  title="&ldquo;21天教你学会C++&rdquo; - 140,103 人阅读">&ldquo;21天教你学会C++&rdquo;</a></li><li><a href="http://coolshell.cn/articles/6470.html"  title="由12306.cn谈谈网站性能技术 - 132,841 人阅读">由12306.cn谈谈网站性能技术</a></li><li><a href="http://coolshell.cn/articles/9308.html"  title="&ldquo;作环保的程序员，从不用百度开始&rdquo; - 127,336 人阅读">&ldquo;作环保的程序员，从不用百度开始&rdquo;</a></li><li><a href="http://coolshell.cn/articles/1870.html"  title="我是怎么招聘程序员的 - 121,583 人阅读">我是怎么招聘程序员的</a></li><li><a href="http://coolshell.cn/articles/10688.html"  title="编程能力与编程年龄 - 119,799 人阅读">编程能力与编程年龄</a></li><li><a href="http://coolshell.cn/articles/7829.html"  title="28个Unix/Linux的命令行神器 - 117,600 人阅读">28个Unix/Linux的命令行神器</a></li><li><a href="http://coolshell.cn/articles/9070.html"  title="AWK 简明教程 - 114,544 人阅读">AWK 简明教程</a></li><li><a href="http://coolshell.cn/articles/3549.html"  title="Android将允许纯C/C++开发应用 - 109,092 人阅读">Android将允许纯C/C++开发应用</a></li><li><a href="http://coolshell.cn/articles/6043.html"  title="Web开发中需要了解的东西 - 107,020 人阅读">Web开发中需要了解的东西</a></li><li><a href="http://coolshell.cn/articles/2287.html"  title="C++ 程序员自信心曲线图 - 100,423 人阅读">C++ 程序员自信心曲线图</a></li><li><a href="http://coolshell.cn/articles/4119.html"  title="如何学好C++语言 - 95,584 人阅读">如何学好C++语言</a></li><li><a href="http://coolshell.cn/articles/4758.html"  title="如何写出无法维护的代码 - 93,025 人阅读">如何写出无法维护的代码</a></li><li><a href="http://coolshell.cn/articles/11564.html"  title="TCP 的那些事儿（上） - 93,008 人阅读">TCP 的那些事儿（上）</a></li><li><a href="http://coolshell.cn/articles/355.html"  title="20本最好的Linux免费书籍 - 92,981 人阅读">20本最好的Linux免费书籍</a></li><li><a href="http://coolshell.cn/articles/1391.html"  title="编程真难啊 - 92,508 人阅读">编程真难啊</a></li><li><a href="http://coolshell.cn/articles/7490.html"  title="性能调优攻略 - 90,040 人阅读">性能调优攻略</a></li><li><a href="http://coolshell.cn/articles/3008.html"  title="Windows编程革命简史 - 88,560 人阅读">Windows编程革命简史</a></li><li><a href="http://coolshell.cn/articles/5761.html"  title="深入理解C语言 - 87,606 人阅读">深入理解C语言</a></li><li><a href="http://coolshell.cn/articles/5701.html"  title="SteveY对Amazon和Google平台的吐槽 - 86,153 人阅读">SteveY对Amazon和Google平台的吐槽</a></li><li><a href="http://coolshell.cn/articles/10217.html"  title="加班与效率 - 82,682 人阅读">加班与效率</a></li><li><a href="http://coolshell.cn/articles/2058.html"  title="各种流行的编程风格 - 82,500 人阅读">各种流行的编程风格</a></li><li><a href="http://coolshell.cn/articles/945.html"  title="C语言的谜题 - 82,348 人阅读">C语言的谜题</a></li><li><a href="http://coolshell.cn/articles/8790.html"  title="程序算法与人生选择 - 81,247 人阅读">程序算法与人生选择</a></li><li><a href="http://coolshell.cn/articles/4429.html"  title="面试题：火车运煤问题 - 80,941 人阅读">面试题：火车运煤问题</a></li></ul>
</div><div id="text-400151743" class="widget widget_text"><h3>新浪微博</h3>			<div class="textwidget"><iframe width="100%" height="120" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1401880315&verifier=f47cc89f&dpc=1"></iframe></div>
		</div><div id="tag_cloud-2" class="widget widget_tag_cloud"><h3>标签</h3><div class="tagcloud"><a href='http://coolshell.cn/tag/agile' class='tag-link-17' title='15个话题' style='font-size: 11.8532110092pt;'>agile</a>
<a href='http://coolshell.cn/tag/ajax' class='tag-link-34' title='11个话题' style='font-size: 10.3119266055pt;'>AJAX</a>
<a href='http://coolshell.cn/tag/algorithm' class='tag-link-76' title='25个话题' style='font-size: 14.5504587156pt;'>Algorithm</a>
<a href='http://coolshell.cn/tag/android' class='tag-link-145' title='10个话题' style='font-size: 9.79816513761pt;'>Android</a>
<a href='http://coolshell.cn/tag/bash' class='tag-link-190' title='9个话题' style='font-size: 9.28440366972pt;'>Bash</a>
<a href='http://coolshell.cn/tag/c' class='tag-link-59' title='90个话题' style='font-size: 21.6146788991pt;'>C++</a>
<a href='http://coolshell.cn/tag/coding' class='tag-link-135' title='25个话题' style='font-size: 14.5504587156pt;'>Coding</a>
<a href='http://coolshell.cn/tag/css' class='tag-link-96' title='21个话题' style='font-size: 13.6513761468pt;'>CSS</a>
<a href='http://coolshell.cn/tag/database' class='tag-link-109' title='7个话题' style='font-size: 8pt;'>Database</a>
<a href='http://coolshell.cn/tag/design' class='tag-link-71' title='18个话题' style='font-size: 12.880733945pt;'>Design</a>
<a href='http://coolshell.cn/tag/design-pattern' class='tag-link-25' title='8个话题' style='font-size: 8.64220183486pt;'>design pattern</a>
<a href='http://coolshell.cn/tag/ebook' class='tag-link-101' title='15个话题' style='font-size: 11.8532110092pt;'>ebook</a>
<a href='http://coolshell.cn/tag/flash' class='tag-link-98' title='7个话题' style='font-size: 8pt;'>Flash</a>
<a href='http://coolshell.cn/tag/game' class='tag-link-125' title='9个话题' style='font-size: 9.28440366972pt;'>Game</a>
<a href='http://coolshell.cn/tag/go' class='tag-link-238' title='9个话题' style='font-size: 9.28440366972pt;'>Go</a>
<a href='http://coolshell.cn/tag/google' class='tag-link-32' title='32个话题' style='font-size: 15.9633027523pt;'>Google</a>
<a href='http://coolshell.cn/tag/html' class='tag-link-38' title='33个话题' style='font-size: 16.0917431193pt;'>HTML</a>
<a href='http://coolshell.cn/tag/ie' class='tag-link-175' title='10个话题' style='font-size: 9.79816513761pt;'>IE</a>
<a href='http://coolshell.cn/tag/java' class='tag-link-13' title='48个话题' style='font-size: 18.1467889908pt;'>Java</a>
<a href='http://coolshell.cn/tag/javascript' class='tag-link-114' title='51个话题' style='font-size: 18.5321100917pt;'>Javascript</a>
<a href='http://coolshell.cn/tag/jquery' class='tag-link-191' title='11个话题' style='font-size: 10.3119266055pt;'>jQuery</a>
<a href='http://coolshell.cn/tag/linux' class='tag-link-37' title='60个话题' style='font-size: 19.4311926606pt;'>Linux</a>
<a href='http://coolshell.cn/tag/mysql' class='tag-link-106' title='7个话题' style='font-size: 8pt;'>MySQL</a>
<a href='http://coolshell.cn/tag/oop' class='tag-link-245' title='8个话题' style='font-size: 8.64220183486pt;'>OOP</a>
<a href='http://coolshell.cn/tag/password' class='tag-link-319' title='8个话题' style='font-size: 8.64220183486pt;'>password</a>
<a href='http://coolshell.cn/tag/performance' class='tag-link-120' title='15个话题' style='font-size: 11.8532110092pt;'>Performance</a>
<a href='http://coolshell.cn/tag/php' class='tag-link-35' title='25个话题' style='font-size: 14.5504587156pt;'>PHP</a>
<a href='http://coolshell.cn/tag/programmer' class='tag-link-70' title='94个话题' style='font-size: 21.871559633pt;'>Programmer</a>
<a href='http://coolshell.cn/tag/programming' class='tag-link-499' title='8个话题' style='font-size: 8.64220183486pt;'>Programming</a>
<a href='http://coolshell.cn/tag/programming-language' class='tag-link-115' title='12个话题' style='font-size: 10.6972477064pt;'>programming language</a>
<a href='http://coolshell.cn/tag/puzzle' class='tag-link-514' title='11个话题' style='font-size: 10.3119266055pt;'>Puzzle</a>
<a href='http://coolshell.cn/tag/pythondev' class='tag-link-33' title='29个话题' style='font-size: 15.4495412844pt;'>Python</a>
<a href='http://coolshell.cn/tag/ruby' class='tag-link-69' title='10个话题' style='font-size: 9.79816513761pt;'>Ruby</a>
<a href='http://coolshell.cn/tag/sql' class='tag-link-131' title='10个话题' style='font-size: 9.79816513761pt;'>SQL</a>
<a href='http://coolshell.cn/tag/tdd' class='tag-link-485' title='8个话题' style='font-size: 8.64220183486pt;'>TDD</a>
<a href='http://coolshell.cn/tag/ui' class='tag-link-47' title='12个话题' style='font-size: 10.6972477064pt;'>UI</a>
<a href='http://coolshell.cn/tag/unix' class='tag-link-21' title='33个话题' style='font-size: 16.0917431193pt;'>Unix</a>
<a href='http://coolshell.cn/tag/vim' class='tag-link-50' title='19个话题' style='font-size: 13.1376146789pt;'>vim</a>
<a href='http://coolshell.cn/tag/web' class='tag-link-30' title='40个话题' style='font-size: 17.119266055pt;'>Web</a>
<a href='http://coolshell.cn/tag/windows' class='tag-link-49' title='17个话题' style='font-size: 12.623853211pt;'>Windows</a>
<a href='http://coolshell.cn/tag/xml' class='tag-link-104' title='8个话题' style='font-size: 8.64220183486pt;'>XML</a>
<a href='http://coolshell.cn/tag/%e5%ae%89%e5%85%a8' class='tag-link-318' title='18个话题' style='font-size: 12.880733945pt;'>安全</a>
<a href='http://coolshell.cn/tag/%e7%a8%8b%e5%ba%8f%e5%91%98' class='tag-link-58' title='96个话题' style='font-size: 22pt;'>程序员</a>
<a href='http://coolshell.cn/tag/%e7%ae%97%e6%b3%95' class='tag-link-77' title='10个话题' style='font-size: 9.79816513761pt;'>算法</a>
<a href='http://coolshell.cn/tag/interview' class='tag-link-164' title='16个话题' style='font-size: 12.2385321101pt;'>面试</a></div>
</div></div>
<!-- sidebar north END -->

<div id="centersidebar">

	<!-- sidebar east START -->
	<div id="eastsidebar" class="sidebar">
	<div id="categories-367921423" class="widget widget_categories"><h3>分类目录</h3>		<ul>
	<li class="cat-item cat-item-189"><a href="http://coolshell.cn/category/proglanguage/dotnet" >.NET编程</a> (3)
</li>
	<li class="cat-item cat-item-8"><a href="http://coolshell.cn/category/proglanguage/ajaxdev" >Ajax开发</a> (9)
</li>
	<li class="cat-item cat-item-5"><a href="http://coolshell.cn/category/proglanguage/cplusplus" >C/C++语言</a> (70)
</li>
	<li class="cat-item cat-item-186"><a href="http://coolshell.cn/category/proglanguage/erlang" >Erlang</a> (1)
</li>
	<li class="cat-item cat-item-4"><a href="http://coolshell.cn/category/proglanguage/javadev" >Java语言</a> (32)
</li>
	<li class="cat-item cat-item-11"><a href="http://coolshell.cn/category/proglanguage/phpdev" >PHP脚本</a> (11)
</li>
	<li class="cat-item cat-item-33"><a href="http://coolshell.cn/category/proglanguage/pythondev" >Python</a> (23)
</li>
	<li class="cat-item cat-item-100"><a href="http://coolshell.cn/category/proglanguage/rubydev" >Ruby</a> (5)
</li>
	<li class="cat-item cat-item-20"><a href="http://coolshell.cn/category/operatingsystem/unixlinux" >Unix/Linux</a> (69)
</li>
	<li class="cat-item cat-item-7"><a href="http://coolshell.cn/category/proglanguage/webdev" >Web开发</a> (102)
</li>
	<li class="cat-item cat-item-19"><a href="http://coolshell.cn/category/operatingsystem/mswindows" >Windows</a> (12)
</li>
	<li class="cat-item cat-item-195"><a href="http://coolshell.cn/category/itnews" >业界新闻</a> (26)
</li>
	<li class="cat-item cat-item-509"><a href="http://coolshell.cn/category/%e4%bc%81%e4%b8%9a%e5%ba%94%e7%94%a8" >企业应用</a> (2)
</li>
	<li class="cat-item cat-item-9"><a href="http://coolshell.cn/category/technews" >技术新闻</a> (33)
</li>
	<li class="cat-item cat-item-550"><a href="http://coolshell.cn/category/%e6%8a%80%e6%9c%af%e7%ae%a1%e7%90%86" >技术管理</a> (12)
</li>
	<li class="cat-item cat-item-12"><a href="http://coolshell.cn/category/techarticle" >技术读物</a> (117)
</li>
	<li class="cat-item cat-item-18"><a href="http://coolshell.cn/category/operatingsystem" >操作系统</a> (45)
</li>
	<li class="cat-item cat-item-105"><a href="http://coolshell.cn/category/datebase" >数据库</a> (10)
</li>
	<li class="cat-item cat-item-10"><a href="http://coolshell.cn/category/misc" >杂项资源</a> (262)
</li>
	<li class="cat-item cat-item-15"><a href="http://coolshell.cn/category/process" >流程方法</a> (46)
</li>
	<li class="cat-item cat-item-23"><a href="http://coolshell.cn/category/progdesign" >程序设计</a> (81)
</li>
	<li class="cat-item cat-item-602"><a href="http://coolshell.cn/category/%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84" >系统架构</a> (8)
</li>
	<li class="cat-item cat-item-1"><a href="http://coolshell.cn/category/tools" >编程工具</a> (65)
</li>
	<li class="cat-item cat-item-3"><a href="http://coolshell.cn/category/proglanguage" >编程语言</a> (173)
</li>
	<li class="cat-item cat-item-6"><a href="http://coolshell.cn/category/netsecurity" >网络安全</a> (26)
</li>
	<li class="cat-item cat-item-39"><a href="http://coolshell.cn/category/career" >职场生涯</a> (33)
</li>
	<li class="cat-item cat-item-271"><a href="http://coolshell.cn/category/funny" >趣味问题</a> (18)
</li>
	<li class="cat-item cat-item-52"><a href="http://coolshell.cn/category/story" >轶事趣闻</a> (147)
</li>
		</ul>
</div>	</div>
	<!-- sidebar east END -->

	<!-- sidebar west START -->
	<div id="westsidebar" class="sidebar">
	<div id="archives-2" class="widget widget_archive"><h3>归档</h3>		<ul>
	<li><a href='http://coolshell.cn/articles/date/2014/12'>2014年十二月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/11'>2014年十一月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/10'>2014年十月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/09'>2014年九月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/08'>2014年八月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/06'>2014年六月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/05'>2014年五月</a>&nbsp;(4)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/04'>2014年四月</a>&nbsp;(4)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/03'>2014年三月</a>&nbsp;(5)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/02'>2014年二月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2014/01'>2014年一月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/12'>2013年十二月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/11'>2013年十一月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/10'>2013年十月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/08'>2013年八月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/07'>2013年七月</a>&nbsp;(8)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/06'>2013年六月</a>&nbsp;(2)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/05'>2013年五月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/04'>2013年四月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/03'>2013年三月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/02'>2013年二月</a>&nbsp;(5)</li>
	<li><a href='http://coolshell.cn/articles/date/2013/01'>2013年一月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/12'>2012年十二月</a>&nbsp;(4)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/11'>2012年十一月</a>&nbsp;(4)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/10'>2012年十月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/09'>2012年九月</a>&nbsp;(4)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/08'>2012年八月</a>&nbsp;(8)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/07'>2012年七月</a>&nbsp;(4)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/06'>2012年六月</a>&nbsp;(7)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/05'>2012年五月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/04'>2012年四月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/03'>2012年三月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/02'>2012年二月</a>&nbsp;(3)</li>
	<li><a href='http://coolshell.cn/articles/date/2012/01'>2012年一月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/12'>2011年十二月</a>&nbsp;(5)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/11'>2011年十一月</a>&nbsp;(9)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/10'>2011年十月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/09'>2011年九月</a>&nbsp;(5)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/08'>2011年八月</a>&nbsp;(14)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/07'>2011年七月</a>&nbsp;(6)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/06'>2011年六月</a>&nbsp;(12)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/05'>2011年五月</a>&nbsp;(5)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/04'>2011年四月</a>&nbsp;(18)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/03'>2011年三月</a>&nbsp;(16)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/02'>2011年二月</a>&nbsp;(16)</li>
	<li><a href='http://coolshell.cn/articles/date/2011/01'>2011年一月</a>&nbsp;(18)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/12'>2010年十二月</a>&nbsp;(11)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/11'>2010年十一月</a>&nbsp;(11)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/10'>2010年十月</a>&nbsp;(19)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/09'>2010年九月</a>&nbsp;(15)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/08'>2010年八月</a>&nbsp;(10)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/07'>2010年七月</a>&nbsp;(20)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/06'>2010年六月</a>&nbsp;(9)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/05'>2010年五月</a>&nbsp;(13)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/04'>2010年四月</a>&nbsp;(12)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/03'>2010年三月</a>&nbsp;(11)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/02'>2010年二月</a>&nbsp;(7)</li>
	<li><a href='http://coolshell.cn/articles/date/2010/01'>2010年一月</a>&nbsp;(9)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/12'>2009年十二月</a>&nbsp;(22)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/11'>2009年十一月</a>&nbsp;(27)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/10'>2009年十月</a>&nbsp;(17)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/09'>2009年九月</a>&nbsp;(14)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/08'>2009年八月</a>&nbsp;(21)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/07'>2009年七月</a>&nbsp;(18)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/06'>2009年六月</a>&nbsp;(19)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/05'>2009年五月</a>&nbsp;(27)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/04'>2009年四月</a>&nbsp;(53)</li>
	<li><a href='http://coolshell.cn/articles/date/2009/03'>2009年三月</a>&nbsp;(43)</li>
	<li><a href='http://coolshell.cn/articles/date/2008/10'>2008年十月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2007/12'>2007年十二月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2006/11'>2006年十一月</a>&nbsp;(1)</li>
	<li><a href='http://coolshell.cn/articles/date/2004/06'>2004年六月</a>&nbsp;(1)</li>
		</ul>
</div>	</div>
	<!-- sidebar west END -->
	<div class="fixed"></div>
</div>

<!-- sidebar south START -->
<div id="southsidebar" class="sidebar">
<div id="get-recent-comments" class="widget widget_get_recent_comments"><h3>最新评论</h3><div id="get_recent_comments_wrap"><ul>	<li><a href="http://coolshell.cn/articles/7829.html#comment-1635975" title="28个Unix/Linux的命令行神器, 2012年07月11日">wanoer</a>: 最后那个。 还真是无聊啊~</li>
	<li><a href="http://coolshell.cn/articles/11432.html#comment-1635886" title="从Code Review 谈如何做技术, 2014年04月12日">lua</a>: 非常赞同您的观点，本人也很欣赏有追求的程序员。 程序设计到一定高度，其实是一种艺术美感的享受，就像一幅完美的 画和建筑一样。 我觉得在中国，正是因为很多程序员过于浮躁很功利，所以到现在少 有大师级的人物（比如说云风）出现。</li>
	<li><a href="http://coolshell.cn/articles/3363.html#comment-1635743" title="偷了世界的程序员, 2010年12月16日">Qianxing</a>: @woyaoatp 比尔·盖茨是最牛的人，是个成功的人 上文提到的是最牛的程序员，既然落脚在程序员上，思维就是要偏技 术</li>
	<li><a href="http://coolshell.cn/articles/6441.html#comment-1635426" title="Javascript 面向对象编程, 2012年01月09日">wangyuxi</a>: 不兼容es5的proto函数无法替代Student里面代码： var proto = Object.getPrototypeOf; proto(Student.prototype).co...</li>
	<li><a href="http://coolshell.cn/articles/12052.html#comment-1635330" title="Leetcode 编程训练, 2014年10月23日">jianggest</a>: 我提个题外的话：搞不懂这个评论是怎么显示的？为何第二页的评论 时间比第一页的部分早呢？</li>
	<li><a href="http://coolshell.cn/articles/11928.html#comment-1635277" title="互联网之子 &#8211; Aaron Swartz, 2014年09月08日">木易</a>: 看了深有感触，学习了</li>
	<li><a href="http://coolshell.cn/guestbook#comment-1635161" title="留言小本, 2009年03月02日">alex</a>: 哥哥，出本技术类杂文集吧，UP＋＋</li>
	<li><a href="http://coolshell.cn/articles/1608.html#comment-1635119" title="Javascript的两本书, 2009年10月22日">ynwzhao</a>: the most import books in JavaScript world.</li>
	<li><a href="http://coolshell.cn/articles/12225.html#comment-1634878" title="DHH 谈混合移动应用开发, 2014年12月15日">Ragnarok</a>: @stackvoid 那是4.4以后的系统才有一定程度上的解决，而且每个厂商的ro m webview实现也有不同，某些厂商，例如HTC的机器，单个 webview占用的内存可以达到200多M&#8230;.</li>
	<li><a href="http://coolshell.cn/articles/8088.html#comment-1634848" title="对技术的态度, 2012年08月16日">IDeal2real</a>: 受益匪浅</li>
	<li><a href="http://coolshell.cn/articles/12225.html#comment-1634750" title="DHH 谈混合移动应用开发, 2014年12月15日">zeeler</a>: iOS上可以考虑这种模式；android上暂时还是算了吧，实 在不敢恭维，或者说要看具体业务，很多功能在webview上都 泡不理想，另外，做手机屏幕适配操作起来更不方便，还不如原生A PI</li>
	<li><a href="http://coolshell.cn/articles/12206.html#comment-1634622" title="HTML6 展望, 2014年12月06日">foolyoghurt</a>: @Hyde H5 的厉害之处又不是那些标签，H5 通常指的是一个比较宽泛的概念，包含 CSS3 以及 HTML5 中的那些 API，比如 drag &amp; drop，File API，...</li>
	<li><a href="http://coolshell.cn/articles/4102.html#comment-1634546" title="如何学好C语言, 2011年03月29日">miral</a>: 我在此留言，只为自己2年后的见证</li>
	<li><a href="http://coolshell.cn/guestbook#comment-1634285" title="留言小本, 2009年03月02日">Silver</a>: 博主你好，我是一名学生，接触C语言有些时日，指针觉得使用问题 不算很大，但是一直不能明白你讲的内存模型。另外，很想知道如何 将汇编与C语言结合起来学习，使自己的能力有所提升。如果...</li>
	<li><a href="http://coolshell.cn/articles/7186.html#comment-1634278" title="做个环保主义的程序员, 2012年04月27日">i</a>: lz，你的网站这么丰富，不妨去申请一下google adsense ,然后等你结账的时候被k号。那时候你就知道，商业公司，没有高 上大和不环保的区别。 以前我也是g粉。但是只从被k号之后，呵呵，没感觉了。</li>
</ul></div></div><div id="text-2" class="widget widget_text"><h3>友情链接</h3>			<div class="textwidget"><ul class='blogroll'>
<li><a href="http://blog.csdn.net/haoel" target="_blank" onclick="pageTracker._trackPageview('/outgoing/blog.csdn.net/haoel?referer=http://coolshell.cn');">陈皓的博客</a></li>

<li><a href="http://ifeve.com/" target="_blank" title="促进并发编程的研究和推广" onclick="pageTracker._trackPageview('/outgoing/ifeve.com/?referer=http://coolshell.cn');">并发编程</a></li>


<li><a href="http://www.raychase.net/" target="_blank" title="一个啰嗦的程序员" onclick="pageTracker._trackPageview('/outgoing/www.raychase.net/?referer=http://coolshell.cn');">四火的唠叨</a></li>



<li><a href="http://www.hellogcc.org/" target=_blank title="致力于讨论和学习GNU Toolchain方面的工作组" onclick="pageTracker._trackPageview('/outgoing/www.hellogcc.org//?referer=http://coolshell.cn/');">HelloGcc Working Group</a></li>

<li><a href="http://http://blog.lvscar.info/" target=_blank title="Just for Fun" onclick="pageTracker._trackPageview('/outgoing/http://blog.lvscar.info/?referer=http://coolshell.cn/');">吕毅的Blog</a></li>

<li><a href="http://www.cnblogs.com/weidagang2046/" target=_blank title="Just for Fun" onclick="pageTracker._trackPageview('/outgoing/http://www.cnblogs.com/weidagang2046/?referer=http://coolshell.cn/');">Todd Wei的Blog</a></li>

<li><a href="http://www.cppfans.org/" target=_blank title="记录我们点滴学习工作生活" onclick="pageTracker._trackPageview('/outgoing/http://www.cppfans.org/?referer=http://coolshell.cn/');">C++爱好者博客</a></li>

<li><a href="http://www.mhtml5.com/" target=_blank title="致力于HTML5在中国的发展与应用" onclick="pageTracker._trackPageview('/outgoing/http://www.mhtml5.com/?referer=http://coolshell.cn/');">HTML5研究小组</a></li>


<li><a href="http://zhuwenhao.com/" target=_blank title="朱文昊的中文博客－－专注技术，向往自由" onclick="pageTracker._trackPageview('/outgoing/http://zhuwenhao.com/?referer=http://coolshell.cn/');">朱文昊Albert Zhu</a></li>


<li><a href="http://www.cguage.com/" target=_blank title="某VC++软件开发爱好者" onclick="pageTracker._trackPageview('/outgoing/http://www.cguage.com/?referer=http://coolshell.cn/');">C瓜哥的博客</a></li>


<li><a href="http://www.kaiyuanba.cn/" target=_blank title="汇聚各种开源项目的中英文混合介绍并分类排列，致力于软件项目的开源事业" onclick="pageTracker._trackPageview('/outgoing/http://www.kaiyuanba.cn/?referer=http://coolshell.cn/');">开源吧</a></li>



<li><a href="http://HelloACM.com/" target=_blank title="Smart Ideas, Smart Algorithms" onclick="pageTracker._trackPageview('/outgoing/http://HelloACM.com/?referer=http://coolshell.cn/');">ACMer</a></li>

<li><a href="http://chenpeng.info/" target=_blank title="优秀的开源软件让生活更简单" onclick="pageTracker._trackPageview('/outgoing/http://chenpeng.info/?referer=http://coolshell.cn/');">陈鹏个人博客</a></li>

<li><a href="http://www.coderli.com/" target=_blank title="一个普通的coder，coding为了生活，coding因为消遣:-) Just a coder" onclick="pageTracker._trackPageview('/outgoing/http://www.coderli.com/?referer=http://coolshell.cn/');">OneCoder</a></li>

<li><a href="http://www.crazyshell.org/" target=_blank title="专注于底层基础, TCP/IP, 存储, (高性能.高可用.分布式.高并发系统) 研究" onclick="pageTracker._trackPageview('/outgoing/http://www.crazyshell.org/?referer=http://coolshell.cn/');">狂Shell – Happy Hacking</a></li>

<li><a href="http://www.tektea.com" target=_blank title="关注IT技术 | 分享 | 交流 | 记录" onclick="pageTracker._trackPageview('/outgoing/http://www.tektea.com/?referer=http://coolshell.cn/');">TekTea's Blog </a></li>

<li><a href="http://shellblog.sinaapp.com/" target=_blank title="我有一颗百度的心。" onclick="pageTracker._trackPageview('/outgoing/http://blog.tektea.comshellblog.sinaapp.com/?referer=http://coolshell.cn/');">夕水溪下 </a></li>
</ul></div>
		</div><div id="meta-3" class="widget widget_meta"><h3>功能</h3>			<ul>
			<li><a href="http://coolshell.cn/wp-login.php?action=register">注册</a></li>			<li><a href="http://coolshell.cn/wp-login.php">登录</a></li>
			<li><a href="http://coolshell.cn/feed">文章<abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://coolshell.cn/comments/feed">评论<abbr title="Really Simple Syndication">RSS</abbr></a></li>
<li><a href="https://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。">WordPress.org</a></li>			</ul>
</div><div id="text-400151742" class="widget widget_text">			<div class="textwidget"><script src="http://s50.cnzz.com/stat.php?id=1785679&web_id=1785679&show=pic1" language="JavaScript" charset="gb2312"></script>



</div>
		</div></div>
<!-- sidebar south END -->

</div>
<!-- sidebar END -->
	<div class="fixed"></div>
</div>
<!-- content END -->

<!-- footer START -->
<div id="footer">
	<a id="gotop" href="#" onclick="MGJS.goTop();return false;">回到顶部</a>
	<a id="powered" href="http://wordpress.org/">WordPress</a>
	<div id="copyright">
		版权所有 &copy; 2004-2014 酷 壳 &#8211; CoolShell.cn	</div>
	<div id="themeinfo">
		主题由 <a href="http://www.neoease.com/">NeoEase</a> 提供, 通过 <a href="http://validator.w3.org/check?uri=referer">XHTML 1.1</a> 和 <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3">CSS 3</a> 验证.	</div>
</div>
<!-- footer END -->

</div>
<!-- container END -->
</div>
<!-- wrap END -->

<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shCore.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushCSharp.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushPhp.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushJScript.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushJava.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushVb.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushSql.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushXml.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushDelphi.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushPython.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushRuby.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushCss.js"></script>
<script class="javascript" src="http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/shBrushCpp.js"></script>
<script class="javascript">
dp.SyntaxHighlighter.ClipboardSwf = 'http://coolshell.cn//wp-content/plugins/google-syntax-highlighter/Scripts/clipboard.swf';
dp.SyntaxHighlighter.HighlightAll('code');
</script>
    <!-- Start of StatCounter Code -->
    <script type="text/javascript">
    <!-- 
        var sc_project=8326668; 
        var sc_security="cccb27f2"; 
      var sc_invisible=1;
        var scJsHost = (("https:" == document.location.protocol) ?
        "https://secure." : "http://www.");
    //-->
document.write("<sc"+"ript type='text/javascript' src='" +scJsHost +"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web analytics" href="http://statcounter.com/"><img class="statcounter" src="http://c.statcounter.com/8326668/0/cccb27f2/1/" alt="web analytics" /></a></div></noscript>   
    <!-- End of StatCounter Code -->
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/akismet/_inc/form.js?ver=3.0.4'></script>
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9'></script>
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushPython.js?ver=3.0.9'></script>
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.9'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://coolshell.cn//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://coolshell.cn//wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '帮助';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = '无法找到Brush：';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush不能设置 html-script选项';
	SyntaxHighlighter.defaults['class-name'] = 'coolshell_syntaxhighlighter';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"http:\/\/coolshell.cn\/wp-content\/plugins\/wp-postratings","ajax_url":"http:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 post at a time.","image":"stars_crystal","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src=ratingsL10n.plugin_url+"/images/"+ratingsL10n.image+"/rating_over."+ratingsL10n.image_ext;;
/* ]]> */
</script>
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/wp-postratings/postratings-js.js?ver=1.8'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"http:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","post_id":"11265"};
/* ]]> */
</script>
<script type='text/javascript' src='http://coolshell.cn//wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script>
<script src="http://s50.cnzz.com/stat.php?id=1785679&web_id=1785679&show=pic1" language="JavaScript" charset="gb2312"></script>


</body>
</html>


<script src="http://coolshell.cn//wp-content/themes/inove/js/1.9.0/jquery.min.js"></script>
<script src="http://coolshell.cn//wp-content/themes/inove/js/jquery.bpopup-0.8.0.min.js"></script>

<script type="text/javascript">
;(function($) {
    $(function() {
        var url=document.referrer;
        if ( url && url.search("http://")>-1) {
            var refurl =  url.match(/:\/\/(.[^/]+)/)[1];
            if(refurl.indexOf("baidu.com")>-1){
                $('#nobaidu_dlg').bPopup();
            }
        }
    });

})(jQuery);
</script>



<div id="nobaidu_dlg" style="background-color:#fff; border-radius:15px;color:#000;display:none;padding:20px;min-width:450px;min-height:180px;">
    <!--<span class="bClose" style="cursor:pointer; position:absolute; right:10px;top:5px;">x<span/>-->
    <img src="http://coolshell.cn//wp-content/themes/inove/img/nobaidu.jpg" align="left">
     <p style="margin-left:200px;margin-top: 20px; line-height: 30px;">
     检测到你还在使用百度这个搜索引擎，<br/>
     作为一个程序员，这是一种自暴自弃！<br/>
     <br/>
     </p>
     <p align="center" style="margin-top:20px;">
     <b><a href="http://coolshell.cn/articles/7186.html">作环保的程序员，从不用百度开始！</a></b>
     </p>
</div>


<!-- Dynamic page generated in 0.439 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2014-12-27 08:23:37 -->

<!-- Compression = gzip -->