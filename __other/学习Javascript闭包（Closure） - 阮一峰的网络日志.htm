<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0072)http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html -->
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
<meta name="generator" content="Movable Type  5.2.2">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/styles.css" type="text/css">
<link rel="start" href="http://www.ruanyifeng.com/blog/" title="Home">
<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="http://feeds.feedburner.com/ruanyifeng">
<script type="text/javascript" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/mt.js"></script><style type="text/css"></style>
<!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://www.ruanyifeng.com/blog/2004/01/post_21.html">
<dc:title>菜谱&quot;凉拌摘耳根&quot;怎么译？</dc:title>
<dc:description>这是我在《经典搜索案例1001》一文中读到的一个例子。我把它引用过来，希望通过这个例子，可以帮助大家更好地利用搜索引擎。...</dc:description>
<dc:creator>阮一峰</dc:creator>
<dc:date>2004-01-19T14:44:41+08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
-->


    
    <link rel="prev" href="http://www.ruanyifeng.com/blog/2009/08/what_is_web_service.html" title="Web service是什么？">
    <link rel="next" href="http://www.ruanyifeng.com/blog/2009/09/code_rush.html" title="纪录片《Code Rush》">
    
    <title>学习Javascript闭包（Closure） - 阮一峰的网络日志</title>
<script src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/bsStatic.js" type="text/javascript" charset="utf-8"></script><script src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/bs-engine.js" type="text/javascript" charset="utf-8"></script><style type="text/css">a.bshareDiv,#bsPanel,#bsMorePanel,#bshareF{border:none;background:none;padding:0;margin:0;font:12px Helvetica,Calibri,Tahoma,Arial,宋体,sans-serif;line-height:14px;}#bsPanel div,#bsMorePanel div,#bshareF div{display:block;}.bsRlogo .bsPopupAwd,.bsRlogoSel .bsPopupAwd,.bsLogo .bsPopupAwd,.bsLogoSel .bsPopupAwd{line-height:16px !important;}a.bshareDiv div,#bsFloatTab div{*display:inline;zoom:1;display:inline-block;}a.bshareDiv img,a.bshareDiv div,a.bshareDiv span,a.bshareDiv a,#bshareF table,#bshareF tr,#bshareF td{text-decoration:none;background:none;margin:0;padding:0;border:none;line-height:1.2}a.bshareDiv span{display:inline;float:none;}div.buzzButton{cursor:pointer;font-weight:bold;}.buzzButton .shareCount a{color:#333}.bsStyle1 .shareCount a{color:#fff}span.bshareText{white-space:nowrap;}span.bshareText:hover{text-decoration:underline;}a.bshareDiv .bsPromo,div.bshare-custom .bsPromo{display:none;position:absolute;z-index:100;}a.bshareDiv .bsPromo.bsPromo1,div.bshare-custom .bsPromo.bsPromo1{width:51px;height:18px;top:-18px;left:0;line-height:16px;font-size:12px !important;font-weight:normal !important;color:#fff;text-align:center;background:url(http://static.bshare.cn/frame/images/bshare_box_sprite2.gif) no-repeat 0 -606px;}div.bshare-custom .bsPromo.bsPromo2{background:url(http://static.bshare.cn/frame/images/bshare_promo_sprite.gif) no-repeat;cursor:pointer;}</style><style type="text/css">.bsBox{display:none;z-index:100000001;font-size:12px;background:url(http://static.bshare.cn/frame/images//background-opaque-dark.gif) !important;padding:6px !important;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;}.bsClose{_overflow:hidden;cursor:pointer;position:absolute;z-index:10000000;color:#666;font-weight:bold;font-family:Helvetica,Arial;font-size:14px;line-height:20px;}.bsTop{color:#666;background:#f2f2f2;height:24px;line-height:24px;border-bottom:1px solid #e8e8e8;}.bsTop span{float:left;}.bsFrameDiv,#bsMorePanel{border:none;background:#fff;}.bsReturn{float:right;*margin-right:20px;margin-right:36px;text-align:right;cursor:pointer;line-height:24px;color:#666;opacity:0.5;}#bsReturn:hover{text-decoration:underline;opacity:1;}</style><script src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/bsMore.js" type="text/javascript" charset="utf-8"></script><script src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/bshareS1.js" type="text/javascript" charset="utf-8"></script><style type="text/css">div.bsClear{clear:both;height:0;line-height:0;overflow:hidden;font-size:0;}.bsSearchDiv{padding:5px 15px;background-color:#fafafa;}.bFind-wrapper-top{background:#fff;border-color:#ccc #aaa #aaa #ccc;border-style:solid;border-width:1px;height:16px;padding:4px;margin:0;}.bFind-wrapper-top input{padding:0 !important;border:none !important;box-shadow:none !important;line-height:16px !important;}.bFind-placeholder{background:url("http://static.bshare.cn/css/images/search-icon.gif") no-repeat;display:block;float:left;height:16px;width:16px;}.bFind{background:none;border:none;float:left;font-size:11px !important;height:16px !important;margin-left:3px;outline:none;padding:0;width:400px;}.bsPlatDiv{height:322px;background:#fff;overflow:auto;padding:0 15px;}#bsLogoList{display:block;list-style:none;overflow:hidden;margin:0;padding:0;}#bsLogoList li{float:left;display:inline-block;width:71px;text-align:center;font-size:12px;height:80px;margin:0 !important;}#bsLogoList .bsPlatIcon{cursor:pointer;display:block !important;text-align:center;}#bsLogoList .bsPlatImg{width:32px;height:32px;border:none !important;display:inline-block;}#bsLogoList .bsPlatImg:hover{-moz-border-radius:7px;-webkit-border-radius:7px;border-radius:7px;box-shadow:0 0 15px #a7a8ac;}#bsLogoList .bsPlatName{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align:center;color:#333 !important;margin-top:2px;line-height:140%;*width:70px;}#bsLogoList .bsPromoM{text-align:center;}.bsFooterDiv{height:24px;line-height:24px;padding:0 15px;border-top:1px solid #e8e8e8;background:#f2f2f2;text-align:right;}a.bsLogoLink{color:#666;}.bsLogoLink:hover{text-decoration:underline;}.bsPromoM{background:url(http://static.bshare.cn/frame/images//bshare_box_sprite2.gif) no-repeat top left;}.bsNew,.bsHot,.bsRec,.bsAwd{background-position:0 -552px;width:19px;margin:5px auto 1px;line-height:16px;height:18px;font-size:12px;color:#fff;overflow:hidden;}.bsNew{background-position:0 -570px;}.bsRec{width:30px;background-position:0 -588px;}.bsAwd{background:url(http://static.bshare.cn/frame/images//promot/promote.gif) no-repeat;}</style><script src="http://b.bshare.cn/bshare_view?Callback=bShare.viewcb&url=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2009%2F08%2Flearning_javascript_closures.html&h=&uuid=15e016b4-0028-44f1-a40d-a3c9d9c13c28&l=17&lite=1&ref=https%3A%2F%2Fwww.google.com.hk%2F&ot=%E5%AD%A6%E4%B9%A0Javascript%E9%97%AD%E5%8C%85%EF%BC%88Closure%EF%BC%89%20-%20%E9%98%AE%E4%B8%80%E5%B3%B0%E7%9A%84%E7%BD%91%E7%BB%9C%E6%97%A5%E5%BF%97&cs=UTF-8&b=bs160e01" type="text/javascript" charset="utf-8"></script><script src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/bsPlatforms.js" type="text/javascript" charset="utf-8"></script><style type="text/css">a.bsSiteLink{text-decoration:none;color:#666;}a.bsSiteLink:hover{text-decoration:underline;}a.bshareDiv{overflow:hidden;height:16px;line-height:18px;font-size:14px;color:#333;padding-left:0;}a.bshareDiv:hover{text-decoration:none;}div.bsTitle{padding:0 8px;border-bottom:1px solid #e8e8e8;color:#666;background:#f2f2f2;text-align:left;}div.buzzButton{cursor:pointer;}div.bsRlogo,div.bsRlogoSel{width:68px;float:left;margin:0;padding:2px 0;}div.bsRlogo a,div.bsRlogoSel a{float:left;}div.bsLogo,div.bsLogoSel{float:left;width:111px;text-align:left;height:auto;padding:2px 4px;margin:2px 0;white-space:nowrap;overflow:hidden;}div.bsLogoSel,div.bsRlogoSel{border:1px solid #ddd;background:#f1f1f1;}div.bsLogo,div.bsRlogo{border:1px solid #fff;background:#fff;}div.bsLogo a,div.bsLogoSel a{display:block;height:16px;line-height:16px;padding:0 0 0 24px;text-decoration:none;float:left;overflow:hidden;}div.bsLogoSel a,div.bsRlogoSel a{color:#000;border:none;}div.bsLogo a,div.bsRlogo a{color:#666;border:none;}div.bsLogoLink{width:121px;overflow:hidden;background:#FFF;float:left;margin:3px 0;}#bsLogin{float:right;text-align:right;overflow:hidden;height:100%;}#bsPanel{position:absolute;z-index:100000000;font-size:12px;width:258px;background:url(http://static.bshare.cn/frame/images/background-opaque-dark.png) !important;padding:6px !important;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;}div.bsClear{clear:both;height:0;line-height:0;font-size:0;overflow:hidden;}div.bsPopupAwd{background:url(http://static.bshare.cn/frame/images//bshare_box_sprite2.gif) no-repeat top left;background-position:0 -624px;width:18px;padding-left:3px;text-align:center;float:left;margin-left: 2px;height:15px;font-size:12px;color:#fff;overflow:hidden;}div.bsRlogo .bsPopupAwd,div.bsRlogoSel .bsPopupAwd{float:left;margin:5px 0 0 -14px;}</style></head>
<body id="scrapbook" class="mt-entry-archive one-column" onload="individualArchivesOnLoad(commenter_name)">
    <div id="container">
        <div id="container-inner">

            <div id="header">
    <div id="header-inner">
        <div id="header-content">


            <div id="header-name">阮一峰的网络日志 <span id="site_location"> » <a href="http://www.ruanyifeng.com/blog/" accesskey="1">首页</a></span><span id="site_archive"> » <a href="http://www.ruanyifeng.com/blog/archives.html">档案</a></span>
</div>

<div id="google_search">
<!-- SiteSearch Google -->
<form action="http://www.ruanyifeng.com/blog/search.html" id="cse-search-box">
      <div>
        <input type="hidden" name="cx" value="016304377626642577906:b_e9skaywzq">
    <input type="hidden" name="cof" value="FORID:11">
    <input type="hidden" name="ie" value="UTF-8">
        <input type="text" name="q" size="20" class="searchbox" id="sbi" value="">
        <input type="image" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/top_search_submit.gif" class="searchbox_submit" value="" alt="搜索" name="sa">
      </div>
    </form>
<!-- SiteSearch Google -->
</div>
<div id="feed_icon">
<a href="http://www.ruanyifeng.com/feed.html" title="订阅Feed">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAUzSURBVHjavFdbbFRVFF3nPjoz7dTWTittaW0jUDRAUqaNojyqREnEQKgfUj9MqqAmhqRt/OCD4CuY+Kckoh+aiGKC+gMJbdHoRysJ8dkhhmJLNdDKtJU+6GMK87j3Hs85d2Z6HzNtMYWb3Dn3NWftvfba+5xNYDl+e6Fkj6yqb/oDRbWq14vlPBLRKCITkxf0ROLt+hNjp1PPSRK4kA3vF1dXNRcWlyA2OQU9eos9opAkAiKxD+XkKO6t15aRWO7J/MgmAZU8MEgexgZHMX518Dh72sYMmVKShnxWuWHdHtxKIDIYTgMuDzgfmSOIQkYMpdUF8OY92Hytt4/jvkg47czzU16iQovM3QFwmNck+Yyduu7D6NA0Z6JR4THntFs9V4tWQg6Ui3s6MwKDncsFTnXKLJhDSeUK3AgPtyhccDzmVs999buRt/1Vm4i0od+hX7+MRG87jPGB/w1u8FPj9xEw7McVrnYuOCvtpjTth3J/nTg99c8LRhKhr6D3dTB5R24bXFwbMXBsyZzeoXaycEpJ95TB09AGX/NpqLVNtw8urnVzLvHjFNxiFqRy2OOHuqUVnue+ACkoWzo4O6lGzTmuHq6nPvY2m9rVqjrIK2rMEKxqyG5NPAKt+wjo0LklgfNxJkZMA3KJvqRUk3z5UFY3QH14P0h+WUY79HPvgv7VuSg4ZRGY1YgZgqXmORccF17sy2ehnf9AeO085K2HQFbtXBScj0LcpgF2cN+WV+DZ/LJQu6gD4R7oV7pBJwbSgtMvfiPoVp56DySwxm7EtkMs1WdAB7qzggsDJKQYsHucSkOudrkiCPWR/fA2nYCn8SNIK4NptSMyAu3sAdDRkIsJdfth0LzSrODUoPNZ4KI9SxJI5UHk7D4GdQfz2us31c7CoHMjRkKuDPHseCMrONVhNcDJwMJpKFVvg9L4OaTiNWm1x789KCqkrXhVBiEz0WYCT2nAzQAD1/vaETv1GrRfP4Vx5cfMNcDPwvP0h0DhanPym7OIf/+O67vcJ1/PCJ4KgdzaUP6Wz+dU+5yIL6fV+PsHGAOdwlPpvvUOyeeAVGyCdqkDNB6DPjsBSrnndfOGevOh3RhGItxvA+fX1CtbGFhgYUFkFMZPR6F1HnClHq8HyubWtJexX06CRmdt33hrd7nA7SFY4qoGpnYuOKcRykPPgDCBcsHx9Iv+fNL2PueBehCWUfYQIIMGLOCcOmXDXsh1+yCt35tUPfvzGFuSvzvoinXOxqa02qOhM6733nVP2MAdaej2XN11DPKjLZCD+yBvahGCo7JfTKAN9UD7s8Oe9zUNIhz8fWI8DG2k38WCFdxugANcXrvTVd1IEbuv3Jour7Hzn7jLMBNfKs7R3i67gRVrbeCOEDhinmWhAatsqdquM2XzHZINhK2cqTjHr/XZdVJUbgN3MWAVXKbSyg9jesRW2xP9di+lwrL5ojM3m2H/kG9hwcIA37c71W6wJdW2J2S5nrjYbq/t1AHAhJsKQeyfPvf6IMJgghPJhFZ4x0KlfLFvt22du45Au/A1SOlGc0P672XXwhLtOcM0kTTEMMd0qkVmMNXxMd/tsedUjInr4SQDgOfeXMSiN0FCL5WHah4L1qqYXPJOJlttd+a5M+YpcG5poLYKQ5f+6JJ4r8bbJYP47hq4r7QAs9PjYNhHJd4o8l5taiwuOpa7AS4XKqI/5NjJbTnaWK92nLdLuhQAJayRNMiygXPBeQN+Qbvu0zDc3y+aUzhbkGR73sI7ljvUnndx2q3t+X8CDAD66FtrIL864AAAAABJRU5ErkJggg==" alt="" style="border: 0pt none;">
</a></div>

        </div>
    </div>
</div>



            <div id="content">
                <div id="content-inner">


                    <div id="alpha">
                        <div id="alpha-inner">


                            <div id="entry-1276" class="entry-asset asset hentry">
                                <div class="asset-header">
<div class="asset-nav entry-nav">

<div class="entry-location">
<ul>
<li>上一篇：<a href="http://www.ruanyifeng.com/blog/2009/08/what_is_web_service.html" title="Web service是什么？">Web&nbsp;service</a></li>
<li>下一篇：<a href="http://www.ruanyifeng.com/blog/2009/09/code_rush.html" title="纪录片《Code Rush》">纪录片《Code&nbsp;Ru</a></li>
</ul>
</div>


    
                                    <div class="entry-categories">
                                        <p>分类<span class="delimiter">：</span></p>
                                        <ul>
                                            <li><a href="http://www.ruanyifeng.com/blog/javascript/" rel="tag">JavaScript</a></li>
                                        </ul>
                                    </div>
    


                                            
</div>
                                </div>
<article class="hentry">
                                    <h1 id="page-title" class="asset-name entry-title">学习Javascript闭包（Closure）</h1>
                                            <div id="share_button" style="float:right;padding-right:2em;padding-top:1em;"><a class="bshareDiv" href="http://www.bshare.cn/share" style="display: block; text-decoration: none; padding: 0px; margin: 0px; font-size: 12px; height: 21px; width: 51px;"><div class="bsPromo bsPromo1"></div><div class="buzzButton bsStyle10" style="height:21px;color:#333;;background:transparent url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif) no-repeat;text-align:center;width:51px;"></div><div style="clear:both;"></div></a><script type="text/javascript" charset="utf-8" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/buttonLite.js"></script>                                       
<script type="text/javascript" charset="utf-8">
bShare.addEntry({
    title: document.getElementById("page-title").innerHTML,
url:window.location.href
});
</script></div>
                                    <div class="asset-meta">
                                        

                                            <p class="vcard author">作者： <a class="fn url" href="http://www.ruanyifeng.com/">阮一峰</a></p>


                                    </div>
                                
                                <div class="asset-content entry-content" id="main-content">

                                    <!-- div class="asset-body" -->
                                        <p><span class="firstchar">闭</span>包（closure）是Javascript语言的一个难点，也是它的特色，很多高级应用都要依靠闭包实现。</p>
                                    <!-- /div -->


                                    <!-- div id="more" class="asset-more" -->
                                        <p>下面就是我的学习笔记，对于Javascript初学者应该是很有用的。</p>

<p><strong>一、变量的作用域</strong></p>

<p>要理解闭包，首先必须理解Javascript特殊的变量作用域。</p>

<p>变量的作用域无非就是两种：全局变量和局部变量。</p>

<p>Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量。</p>

<blockquote>

<p>　　var n=999;</p>

<p>　　function f1(){<br>
　　　　alert(n);<br>
　　}</p>

<p>　　f1(); // 999</p>

</blockquote>

<p>另一方面，在函数外部自然无法读取函数内的局部变量。</p>

<blockquote>

<p>　　function f1(){<br>
　　　　var n=999;<br>
　　}</p>

<p>　　alert(n); // error</p>

</blockquote>

<p>这里有一个地方需要注意，函数内部声明变量的时候，一定要使用var命令。如果不用的话，你实际上声明了一个全局变量！</p>

<blockquote>

<p>　　function f1(){<br>
　　　　n=999;<br>
　　}</p>

<p>　　f1();</p>

<p>　　alert(n); // 999</p>

</blockquote>

<p><strong>二、如何从外部读取局部变量？</strong></p>

<p>出于种种原因，我们有时候需要得到函数内的局部变量。但是，前面已经说过了，正常情况下，这是办不到的，只有通过变通方法才能实现。</p>

<p>那就是在函数的内部，再定义一个函数。</p>

<blockquote>

<p>　　function f1(){</p>

<p>　　　　var n=999;</p>

<p>　　　　function f2(){<br>
　　　　　　alert(n); // 999<br>
　　　　}</p>

<p>　　}</p>

</blockquote>

<p>在上面的代码中，函数f2就被包括在函数f1内部，这时f1内部的所有局部变量，对f2都是可见的。但是反过来就不行，f2内部的局部变量，对f1就是不可见的。这就是Javascript语言特有的"链式作用域"结构（chain scope），子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。</p>

<p>既然f2可以读取f1中的局部变量，那么只要把f2作为返回值，我们不就可以在f1外部读取它的内部变量了吗！</p>

<blockquote>

<p>　　function f1(){</p>

<p>　　　　var n=999;</p>

<p>　　　　function f2(){<br>
　　　　　　alert(n); <br>
　　　　}</p>

<p>　　　　return f2;</p>

<p>　　}</p>

<p>　　var result=f1();</p>

<p>　　result(); // 999</p>

</blockquote>

<p><strong>三、闭包的概念</strong></p>

<p>上一节代码中的f2函数，就是闭包。</p>

<p>各种专业文献上的"闭包"（closure）定义非常抽象，很难看懂。我的理解是，闭包就是能够读取其他函数内部变量的函数。</p>

<p>由于在Javascript语言中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成"定义在一个函数内部的函数"。</p>

<p>所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p>

<p><strong>四、闭包的用途</strong></p>

<p>闭包可以用在许多地方。它的最大用处有两个，一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中。</p>

<p>怎么来理解这句话呢？请看下面的代码。</p>

<blockquote>

<p>　　function f1(){</p>

<p>　　　　var n=999;</p>

<p>　　　　nAdd=function(){n+=1}</p>

<p>　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}</p>

<p>　　　　return f2;</p>

<p>　　}</p>

<p>　　var result=f1();</p>

<p>　　result(); // 999</p>

<p>　　nAdd();</p>

<p>　　result(); // 1000</p>

</blockquote>

<p>在这段代码中，result实际上就是闭包f2函数。它一共运行了两次，第一次的值是999，第二次的值是1000。这证明了，函数f1中的局部变量n一直保存在内存中，并没有在f1调用后被自动清除。</p>

<p>为什么会这样呢？原因就在于f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。</p>

<p>这段代码中另一个值得注意的地方，就是"nAdd=function(){n+=1}"这一行，首先在nAdd前面没有使用var关键字，因此nAdd是一个全局变量，而不是局部变量。其次，nAdd的值是一个匿名函数（anonymous function），而这个匿名函数本身也是一个闭包，所以nAdd相当于是一个setter，可以在函数外部对函数内部的局部变量进行操作。</p>

<p><strong>五、使用闭包的注意点</strong></p>

<p>1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。</p>

<p>2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。</p>

<p><strong>六、思考题</strong></p>

<p>如果你能理解下面两段代码的运行结果，应该就算理解闭包的运行机制了。</p>

<p>代码片段一。</p>

<blockquote>

<p>　　var name = "The Window";</p>

<p>　　var object = {<br>
　　　　name : "My Object",</p>

<p>　　　　getNameFunc : function(){<br>
　　　　　　return function(){<br>
　　　　　　　　return this.name;<br>
　　　　　　};</p>

<p>　　　　}</p>

<p>　　};</p>

<p>　　alert(object.getNameFunc()());</p>

</blockquote>

<p><br>
代码片段二。</p>

<blockquote>

<p>　　var name = "The Window";</p>

<p>　　var object = {<br>
　　　　name : "My Object",</p>

<p>　　　　getNameFunc : function(){<br>
　　　　　　var that = this;<br>
　　　　　　return function(){<br>
　　　　　　　　return that.name;<br>
　　　　　　};</p>

<p>　　　　}</p>

<p>　　};</p>

<p>　　alert(object.getNameFunc()()); </p>

</blockquote>

<p>（完）</p>
                                    <!-- /div -->

                                </div>
    <script type="text/javascript" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/newwindow.js"></script>
                                <div class="asset-footer">

<h3>文档信息</h3>
<ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）</li>
<li>发表日期： <abbr class="published" title="2009-08-30T21:33:23+08:00">2009年8月30日</abbr></li>
<li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAG1BMVEUxAAAdHRseHhwfHx0fHx4gIB4hIR8iIiAjIyCMbVMLAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeBgwBJS9jlhpuAAAAcUlEQVQI122OOxKAIAwFQYfegGCLBdjKUfAGNNZ6A49uws/GVDtvdnbCGB6fWLux4SnSNtwZg5PRQLKIMjiIGg5EHD1xFiBVQV0OnsWWRuvKoNFcaXEyIc80UtPklKBOEZjPo6pfDN9nfO8obMd/oawvhiwOwjTYfd0AAAAASUVORK5CYII=" style="border:0;"> 档案</a>  » 
<a href="http://www.ruanyifeng.com/blog/javascript/"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAG1BMVEUxAAAdHRseHhwfHx0fHx4gIB4hIR8iIiAjIyCMbVMLAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfeBgwBJS9jlhpuAAAAcUlEQVQI122OOxKAIAwFQYfegGCLBdjKUfAGNNZ6A49uws/GVDtvdnbCGB6fWLux4SnSNtwZg5PRQLKIMjiIGg5EHD1xFiBVQV0OnsWWRuvKoNFcaXEyIc80UtPklKBOEZjPo6pfDN9nfO8obMd/oawvhiwOwjTYfd0AAAAASUVORK5CYII=" style="border:0;"> JavaScript</a> 
</li>
<li>付费支持：<a href="http://www.ruanyifeng.com/blog/2014/05/my_blog_book.html" target="_blank"><img src="data:image/png;base64,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" style="border:0;"> 购买文集</a></li>
<li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" style="border:0;"> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank"><img src="data:image/png;base64,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" style="border:0;"> weibo</a></li>
<li>Feed订阅： <a href="http://www.ruanyifeng.com/feed.html" target="_blank"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" style="border:0;"></a></li>

</ul>
                                </div>
</article>
                            </div>

   <div id="gegz1">
<p style="text-align:center;"><a href="http://www.ruanyifeng.com/ads.html" target="_blank"><img src="http://www.ruanyifeng.com/blog/images/ad_sale.png" style="border: none; display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 1px 1px;" width="0" height="0"></a></p>
   </div>

<div id="related_entries">
<h2>相关文章</h2>
<ul>

<li><strong>2014.10.08: <a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html">JavaScript 运行机制详解：再谈Event Loop</a></strong>

                           <div class="entry-body">
                              一年前，我写了一篇《什么是 Event Loop？》，谈了我对Event Loop的理解。

                           </div>

</li>

 
<li><strong>2014.09.14: <a href="http://www.ruanyifeng.com/blog/2014/09/package-management.html">前端模块管理器简介</a></strong>

                           <div class="entry-body">
                              模块化结构已经成为网站开发的主流。

                           </div>

</li>

 
<li><strong>2014.04.30: <a href="http://www.ruanyifeng.com/blog/2014/04/ecmascript_6_primer.html">《ECMAScript 6入门》上线了</a></strong>

                           <div class="entry-body">
                              过去的一个月，我写了一本书《ECMAScript 6入门》，今天上线了。

                           </div>

</li>

 
<li><strong>2014.03.28: <a href="http://www.ruanyifeng.com/blog/2014/03/undefined-vs-null.html">undefined与null的区别</a></strong>

                           <div class="entry-body">
                              大多数计算机语言，有且仅有一个表示"无"的值，比如，C语言的NULL，Java语言的null，Python语言的None，Ruby语言的nil。

                           </div>

</li>

 
</ul>
</div>


<div id="googlead1">
<h2>广告<a href="http://www.ruanyifeng.com/ads.html">（购买广告位）</a></h2>
<div id="googlead1-inner">
<div id="googlead1-left">
<a href="http://dxy.com/?utm_source=ruanyifeng.com" target="_blank"><img src="http://www.ruanyifeng.com/blog/images/ad_dxy.jpg" style="border: none; display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 0px 0px;" width="0" height="0"></a>
</div>
<div id="googlead1-right">

<a href="http://www.payssion.cn/?utm_source=ruanyifeng.com" target="_blank"><img src="http://www.ruanyifeng.com/blog/images/ad_payssion_300.gif" style="border: none; display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 1px 1px;" width="0" height="0"></a>

</div>
</div>
</div>
                    

                    <div id="comments" class="comments">


    
    
        
    <h2 class="comments-header">留言（121条）</h2>

    <div id="comments-content" class="comments-content" style="clear: left;">
        
        <div id="comment-189783" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://forex88.cn" href="http://forex88.cn/" target="_blank" rel="nofollow">forex88</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189783">
            <p>讲的很清楚明了，连我都懂了，要是我们大学时的老师也能这么讲课。。。他们只会放幻灯片</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189783"><abbr class="published" title="2009-08-30T22:29:30+08:00">2009年8月30日 22:29</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/forex88.html" title="forex88的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用forex88的这条留言" onclick="return CommentQuote(&#39;comment-quote-189783&#39;,&#39;forex88&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189784" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.gracecode.com/" href="http://www.gracecode.com/" target="_blank" rel="nofollow">明城</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189784">
            <p>这里有个 PPT 用于说明 JS 闭包，说明得很透彻： <a href="http://www.gracecode.com/archives/2385/" rel="nofollow">http://www.gracecode.com/archives/2385/</a></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189784"><abbr class="published" title="2009-08-30T22:44:45+08:00">2009年8月30日 22:44</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%98%8E%E5%9F%8E.html" title="明城的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用明城的这条留言" onclick="return CommentQuote(&#39;comment-quote-189784&#39;,&#39;明城&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189808" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.niubaobao.org" href="http://www.niubaobao.org/" target="_blank" rel="nofollow">张昭</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189808">
            <p>呵呵，可以作为面试题了！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189808"><abbr class="published" title="2009-08-31T09:30:08+08:00">2009年8月31日 09:30</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%BC%A0%E6%98%AD.html" title="张昭的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用张昭的这条留言" onclick="return CommentQuote(&#39;comment-quote-189808&#39;,&#39;张昭&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189809" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">十三</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189809">
            <p>闭包个人感觉是一种描述函数内部的数据结构，来描述函数的运行上下文.Javascript编程精粹 这本书算是讲的比较好一点.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189809"><abbr class="published" title="2009-08-31T09:40:53+08:00">2009年8月31日 09:40</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%8D%81%E4%B8%89.html" title="十三的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用十三的这条留言" onclick="return CommentQuote(&#39;comment-quote-189809&#39;,&#39;十三&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189810" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">迷途小书童</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189810">
            <p>类是有行为的数据，闭包是有数据的行为。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189810"><abbr class="published" title="2009-08-31T10:26:01+08:00">2009年8月31日 10:26</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%BF%B7%E9%80%94%E5%B0%8F%E4%B9%A6%E7%AB%A5.html" title="迷途小书童的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用迷途小书童的这条留言" onclick="return CommentQuote(&#39;comment-quote-189810&#39;,&#39;迷途小书童&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189834" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">tt</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189834">
            <p>阮兄：<br>
有点疑问：<br>
function f1(){</p>

<p>　　　　n=999;</p>

<p>　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}</p>

<p>　　　　return f2;</p>

<p>　　}</p>

<p>　　var result=f1();</p>

<p>　　result(); // 999<br>
可以写成如下的不也一样么？<br><br>
function f1(){</p>

<p>　　　　n=999;</p>

<p>　　　　return n;</p>

<p>　　}<br>
var result=f1();<br>
alert(result);</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189834"><abbr class="published" title="2009-08-31T21:16:06+08:00">2009年8月31日 21:16</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/tt.html" title="tt的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用tt的这条留言" onclick="return CommentQuote(&#39;comment-quote-189834&#39;,&#39;tt&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189869" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.gracecode.com" href="http://www.gracecode.com/" target="_blank" rel="nofollow">明城</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189869">
            <p>@tt 实际上后种方法每次调用 f1 时，都会声明 n = 999，而且 n 无法保留状态值（严格按照你的代码，其实 n 为全局变量，我理解你的本意为 var n = 999;）。</p>

<p>而第一种 f1 实际上返回的是个匿名函数，这样 n 作用域被另外个 f2 函数作用域所使用，因此它会保留。n 不会被重复声明，且内容会被保存</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189869"><abbr class="published" title="2009-09-01T13:20:53+08:00">2009年9月 1日 13:20</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%98%8E%E5%9F%8E.html" title="明城的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用明城的这条留言" onclick="return CommentQuote(&#39;comment-quote-189869&#39;,&#39;明城&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189881" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">SpiderMan</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189881">
            <p>感觉这里的例子更好一些 <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures" rel="nofollow">https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures</a></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189881"><abbr class="published" title="2009-09-01T20:46:34+08:00">2009年9月 1日 20:46</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/SpiderMan.html" title="SpiderMan的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用SpiderMan的这条留言" onclick="return CommentQuote(&#39;comment-quote-189881&#39;,&#39;SpiderMan&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189949" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://wbb-5.blog.163.com" href="http://wbb-5.blog.163.com/" target="_blank" rel="nofollow">ahwing</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189949">
            <p> 这是我见过最简单易懂的闭包教程。</p>

<p> 支持下。</p>

<p> 博主的博客写的不错，简单易懂，东西涉及的很多方面我都有兴趣，看来是同道中人，^_^</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189949"><abbr class="published" title="2009-09-02T16:49:18+08:00">2009年9月 2日 16:49</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/ahwing.html" title="ahwing的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用ahwing的这条留言" onclick="return CommentQuote(&#39;comment-quote-189949&#39;,&#39;ahwing&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-189987" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://hi.baidu.com/heroguang" href="http://hi.baidu.com/heroguang" target="_blank" rel="nofollow">星光</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-189987">
            <p>一文中的!!!!!!!!!!!!<br>
学习了!!</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-189987"><abbr class="published" title="2009-09-03T11:08:25+08:00">2009年9月 3日 11:08</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%98%9F%E5%85%89.html" title="星光的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用星光的这条留言" onclick="return CommentQuote(&#39;comment-quote-189987&#39;,&#39;星光&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-190860" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://zhaorui.cnblogs.com" href="http://zhaorui.cnblogs.com/" target="_blank" rel="nofollow">zhaorui</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-190860">
            <p>想知道思考题的答案，<br>
我以为是：My Object</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-190860"><abbr class="published" title="2009-09-15T00:09:34+08:00">2009年9月15日 00:09</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/zhaorui.html" title="zhaorui的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用zhaorui的这条留言" onclick="return CommentQuote(&#39;comment-quote-190860&#39;,&#39;zhaorui&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-194820" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">steven</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-194820">
            <p>顶楼主，我读了一些文章。不是特明白。<br>
有个问题。<br>
记得有人说。外面的函数是closure,<br>
好像楼主说里面的函数是closure.</p>

<p>不知道到底哪个是？谢谢。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-194820"><abbr class="published" title="2009-11-21T14:51:36+08:00">2009年11月21日 14:51</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/steven.html" title="steven的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用steven的这条留言" onclick="return CommentQuote(&#39;comment-quote-194820&#39;,&#39;steven&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-195151" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">jkd___w</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-195151">
            <p>楼主讲讲最后一个思考题，没明白</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-195151"><abbr class="published" title="2009-11-26T09:21:22+08:00">2009年11月26日 09:21</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/jkd___w.html" title="jkd___w的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用jkd___w的这条留言" onclick="return CommentQuote(&#39;comment-quote-195151&#39;,&#39;jkd___w&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-195340" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">hou</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-195340">
            <p>请版主讲一讲最后一个例子怎么回事，没有看明白</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-195340"><abbr class="published" title="2009-11-30T16:00:52+08:00">2009年11月30日 16:00</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/hou.html" title="hou的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用hou的这条留言" onclick="return CommentQuote(&#39;comment-quote-195340&#39;,&#39;hou&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-196070" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">George Wing</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-196070">
            <p>函数中的this一般是指向window中的变量。</p>

<blockquote><pre>引用hou的发言：</pre> 请版主讲一讲最后一个例子怎么回事，没有看明白</blockquote>

        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-196070"><abbr class="published" title="2009-12-13T09:55:09+08:00">2009年12月13日 09:55</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/George%20Wing.html" title="George Wing的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用George Wing的这条留言" onclick="return CommentQuote(&#39;comment-quote-196070&#39;,&#39;George Wing&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-196071" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">George Wing</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-196071">
            <p>上面本人说得不太正确。<br>
this的指向是由它所在函数调用的上下文决定的，而不是由它所在函数定义的上下文决定的。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-196071"><abbr class="published" title="2009-12-13T10:23:34+08:00">2009年12月13日 10:23</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/George%20Wing.html" title="George Wing的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用George Wing的这条留言" onclick="return CommentQuote(&#39;comment-quote-196071&#39;,&#39;George Wing&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-196073" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">George Wing</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-196073">
            <p>如果非要指向object，可显式的控制--把代码的最后一句改为 alert(object.getName().call(object));</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-196073"><abbr class="published" title="2009-12-13T11:39:19+08:00">2009年12月13日 11:39</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/George%20Wing.html" title="George Wing的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用George Wing的这条留言" onclick="return CommentQuote(&#39;comment-quote-196073&#39;,&#39;George Wing&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-196430" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">c-star</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-196430">
            <p>阮大哥讲的很透彻 受益匪浅</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-196430"><abbr class="published" title="2009-12-18T16:32:40+08:00">2009年12月18日 16:32</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/c-star.html" title="c-star的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用c-star的这条留言" onclick="return CommentQuote(&#39;comment-quote-196430&#39;,&#39;c-star&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-198124" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">ya</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-198124">
            <p>大道至简，给予我这个初学者很大的帮助，谢谢！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-198124"><abbr class="published" title="2010-01-11T09:30:41+08:00">2010年1月11日 09:30</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/ya.html" title="ya的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用ya的这条留言" onclick="return CommentQuote(&#39;comment-quote-198124&#39;,&#39;ya&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-199792" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">过客</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-199792">
            <p>浅显易懂，很好。</p>

<p> 如下看法，认为有待商榷：<br>
#1、有一个地方需要注意，函数内部声明变量的时候，一定要使用var命令。如果不用的话，你实际上声明了一个全局变量！</p>

<p>#2、这段代码中另一个值得注意的地方，就是“nAdd=function(){n+=1}”这一行，首先在nAdd前面没有使用var关键字，因此nAdd是一个全局变量，而不是局部变量。其次，nAdd的值是一个匿名函数（anonymous function），而这个匿名函数本身也是一个闭包，所以nAdd相当于是一个setter，可以在函数外部对函数内部的局部变量进行操作。</p>

<p>　　function f1(){<br>
       test = 10;<br>
　　　　var n=999;<br>
　　　　nAdd=function(){n+=1}<br>
　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}<br>
　　　　return f2;<br>
　　}<br>
   //如果 #1 说法正确，下句会打印10，实际结果是test未定义。<br>
   //alert(test);  // error test 未定义<br>
　 <br>
   //如果 #2 正确，语句 nAdd(); 位置在何处应该都能执行，测试结果在下面这个位置，也就是语句 var result=f1(); 前。是不能执行的。<br>
   //nAdd();<br>
   var result=f1();<br>
   result(); // 999<br>
　 nAdd();<br>
   result(); // 1000</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-199792"><abbr class="published" title="2010-01-28T11:36:02+08:00">2010年1月28日 11:36</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%BF%87%E5%AE%A2.html" title="过客的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用过客的这条留言" onclick="return CommentQuote(&#39;comment-quote-199792&#39;,&#39;过客&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-203007" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.uniq.cn" href="http://www.uniq.cn/" target="_blank" rel="nofollow">ning</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-203007">
            <p>To 过客：</p>

<p>函数内部定义的方法和变量，要等到函数执行过以后，才会真正定义</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-203007"><abbr class="published" title="2010-03-20T16:17:28+08:00">2010年3月20日 16:17</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/ning.html" title="ning的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用ning的这条留言" onclick="return CommentQuote(&#39;comment-quote-203007&#39;,&#39;ning&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-205063" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://blog.csdn.net/awayings" href="http://blog.csdn.net/awayings" target="_blank" rel="nofollow">Jason</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-205063">
            <p>但是从过客说的里面可以引出另外的问题，当使用这样的代码时。<br>
<br>
　　function f1(){<br>
test = 10;<br>
　　　　var n=999;<br>
　　　　nAdd=function(){n+=1}<br>
　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}<br>
　　　　return f2;<br>
　　}<br>
<br>
如果在函数f1定义之前添加变量定义</p><pre>var n = 1;</pre>然后调用<pre>f1()();</pre>则显示为999。说明nAdd中的n确实是作为全局变量存在。于是问题就来了——有什么方法让他可以是父函数中定义的n呢？<p></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-205063"><abbr class="published" title="2010-04-26T15:28:08+08:00">2010年4月26日 15:28</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Jason.html" title="Jason的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Jason的这条留言" onclick="return CommentQuote(&#39;comment-quote-205063&#39;,&#39;Jason&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-205138" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.gaoshou.org/bolg" href="http://www.gaoshou.org/bolg" target="_blank" rel="nofollow">西子湖畔的树人</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-205138">
            <p>大道至简,很不错!~ 这篇文章我要转了...</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-205138"><abbr class="published" title="2010-04-28T22:48:51+08:00">2010年4月28日 22:48</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%A5%BF%E5%AD%90%E6%B9%96%E7%95%94%E7%9A%84%E6%A0%91%E4%BA%BA.html" title="西子湖畔的树人的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用西子湖畔的树人的这条留言" onclick="return CommentQuote(&#39;comment-quote-205138&#39;,&#39;西子湖畔的树人&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-205160" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://iworm.net" href="http://iworm.net/" target="_blank" rel="nofollow">iworm</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-205160">
            <blockquote>
<pre>引用George Wing的发言：</pre>

<p>函数中的this一般是指向window中的变量。</p>

</blockquote>

<p>this关键字代表的实例会根据环境不同而变化的. 他总是指向owner 看看这篇你大概就动this这个关键字了</p>

<p><a href="http://www.quirksmode.org/js/this.html" rel="nofollow">http://www.quirksmode.org/js/this.html</a><br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-205160"><abbr class="published" title="2010-04-29T12:34:54+08:00">2010年4月29日 12:34</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/iworm.html" title="iworm的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用iworm的这条留言" onclick="return CommentQuote(&#39;comment-quote-205160&#39;,&#39;iworm&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-205759" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">tomwang</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-205759">
            <p>最后一个题感觉和闭包没什么关系啊，能详细解释一下吗？因为当一个函数作为函数而不是方法来调用的时候，this指向的是全局对象，这在《Javascript权威指南》上说的很清楚，所以答案肯定是“The Window”，和闭包没什么关系啊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-205759"><abbr class="published" title="2010-05-23T18:24:59+08:00">2010年5月23日 18:24</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/tomwang.html" title="tomwang的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用tomwang的这条留言" onclick="return CommentQuote(&#39;comment-quote-205759&#39;,&#39;tomwang&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-207496" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.afity.com" href="http://www.afity.com/" target="_blank" rel="nofollow">afity</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-207496">
            <p>最后一题重点在this</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-207496"><abbr class="published" title="2010-08-25T23:26:39+08:00">2010年8月25日 23:26</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/afity.html" title="afity的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用afity的这条留言" onclick="return CommentQuote(&#39;comment-quote-207496&#39;,&#39;afity&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-207759" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">bao</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-207759">
            <p>如果把f2申明成全局变量，道理一样吗？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-207759"><abbr class="published" title="2010-09-06T17:45:21+08:00">2010年9月 6日 17:45</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/bao.html" title="bao的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用bao的这条留言" onclick="return CommentQuote(&#39;comment-quote-207759&#39;,&#39;bao&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-207922" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小猫</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-207922">
            <p>太经典了！<br>
终于理解了，一箭双雕啊！既理解了this的用法，又理解了闭包</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-207922"><abbr class="published" title="2010-09-16T20:22:03+08:00">2010年9月16日 20:22</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E7%8C%AB.html" title="小猫的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小猫的这条留言" onclick="return CommentQuote(&#39;comment-quote-207922&#39;,&#39;小猫&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-208413" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">soberlevi</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-208413">
            <p>这个例子很不错，真的是一箭双雕</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-208413"><abbr class="published" title="2010-10-15T09:29:16+08:00">2010年10月15日 09:29</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/soberlevi.html" title="soberlevi的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用soberlevi的这条留言" onclick="return CommentQuote(&#39;comment-quote-208413&#39;,&#39;soberlevi&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-208572" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小彘</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-208572">
            <p>前面讲得挺好的，浅显易懂。对最后的两个例子搞不清楚为啥。版主能不能具体分析下。<br>
var obj=function()<br>
{<br>
  var MyFunc=function()<br>
  {<br>
   alert("hello world");<br>
  }<br>
  return function()<br>
  {<br>
   return MyFunc;<br>
  }<br>
}()<br>
var f3=obj();<br>
var f4=obj();<br>
alert(f3 === f4);//为啥是TRUE；搞不懂</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-208572"><abbr class="published" title="2010-10-24T09:39:42+08:00">2010年10月24日 09:39</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E5%BD%98.html" title="小彘的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小彘的这条留言" onclick="return CommentQuote(&#39;comment-quote-208572&#39;,&#39;小彘&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-208943" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.nosite.com" href="http://www.nosite.com/" target="_blank" rel="nofollow">hellowang</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-208943">
            <p>最后两个例子很精炼 ^ ^</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-208943"><abbr class="published" title="2010-11-11T15:24:11+08:00">2010年11月11日 15:24</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/hellowang.html" title="hellowang的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用hellowang的这条留言" onclick="return CommentQuote(&#39;comment-quote-208943&#39;,&#39;hellowang&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-209966" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">陈锐达</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-209966">
            <p>尝试解答代码段一：<br>
getNameFunc: function() {//假设函数名为Ａ<br>
   return function()/*假设函数名为Ｂ*/ { return this.name; };<br>
}<br>
在函数里面构建函数的时候，闭包产生。<br>
在函数Ｂ内调用函数Ａ的this.name,由于函数Ａ没有name属性，所以就去找全局变量name，找到了，所以返回“The Window”，要是没有找到，则返回“undefined”。</p>

<p>代码段二可以尝试将代码更改为：<br>
var _this = this;<br>
return function() { return _this.name +"__"+ this.name; };<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-209966"><abbr class="published" title="2010-12-13T15:50:18+08:00">2010年12月13日 15:50</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E9%99%88%E9%94%90%E8%BE%BE.html" title="陈锐达的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用陈锐达的这条留言" onclick="return CommentQuote(&#39;comment-quote-209966&#39;,&#39;陈锐达&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-210969" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">LuckyGeb</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-210969">
            <p>只有一点没弄懂，如下代码，nAdd在函数外为什么可以有意义？而test不行？想了好久，不知道那里有解答<br>
　　function f1(){<br>
test=10;<br>
　　　　var n=999;<br>
　　　　nAdd=function(){n+=1}<br>
　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}<br>
　　　　return f2;<br>
　　}<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-210969"><abbr class="published" title="2011-01-17T01:17:27+08:00">2011年1月17日 01:17</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/LuckyGeb.html" title="LuckyGeb的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用LuckyGeb的这条留言" onclick="return CommentQuote(&#39;comment-quote-210969&#39;,&#39;LuckyGeb&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-211160" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">qdsang</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-211160">
            <p>通俗易懂,, 阅览无数教程, 看了这篇, 终于明白了点.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-211160"><abbr class="published" title="2011-01-24T13:21:41+08:00">2011年1月24日 13:21</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/qdsang.html" title="qdsang的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用qdsang的这条留言" onclick="return CommentQuote(&#39;comment-quote-211160&#39;,&#39;qdsang&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-212024" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">sf</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-212024">
            <p>写得太好了<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-212024"><abbr class="published" title="2011-02-15T16:47:37+08:00">2011年2月15日 16:47</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/sf.html" title="sf的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用sf的这条留言" onclick="return CommentQuote(&#39;comment-quote-212024&#39;,&#39;sf&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-212666" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://blog.lukewang.net" href="http://blog.lukewang.net/" target="_blank" rel="nofollow">Luke</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-212666">
            <p>这篇文章是阮兄一贯的风格，我喜欢，不过　"Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量。"这句有点奇怪，c不一样可以在函数内部直接读取全局变量么？难道不是么？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-212666"><abbr class="published" title="2011-03-02T22:02:10+08:00">2011年3月 2日 22:02</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Luke.html" title="Luke的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Luke的这条留言" onclick="return CommentQuote(&#39;comment-quote-212666&#39;,&#39;Luke&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-212795" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">ignition</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-212795">
            <p>阮大哥能不能具体讲下最后的思考题啊？ 感觉关键在this</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-212795"><abbr class="published" title="2011-03-08T15:56:55+08:00">2011年3月 8日 15:56</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/ignition.html" title="ignition的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用ignition的这条留言" onclick="return CommentQuote(&#39;comment-quote-212795&#39;,&#39;ignition&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-213470" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">三少爷</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-213470">
            <p>变量的作用域无非就是两种：全局变量和局部变量。<br>
这句话值得商榷, 变量的作用域确实只有两种, 不过他们是全局对象和函数.<br>
你想说的或许是变量的类型有两种?</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-213470"><abbr class="published" title="2011-03-25T20:15:35+08:00">2011年3月25日 20:15</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E4%B8%89%E5%B0%91%E7%88%B7.html" title="三少爷的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用三少爷的这条留言" onclick="return CommentQuote(&#39;comment-quote-213470&#39;,&#39;三少爷&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216630" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">轩脉刃</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216630">
            <p>理解最后两个例子：</p>

<p>1 函数中的this指的是调用这个函数的owner<br>
2 object.getNameFunc()是返回一个函数，并没有执行函数中的代码<br>
3 增加一个例子0：<br>
<br>
var name = "The Window";<br>
　　var object = {<br>
　　　　name : "My Object",<br>
　　　　getNameFunc : function(){<br>
				return (this.name);<br>
　　　　　　}<br>
　　};<br>
	var name = object.getNameFunc();<br>
　　alert(name); <br>
</p>

<p>4 把例子1变成<br>
<br>
　　var name = "The Window";<br>
　　var object = {<br>
　　　　name : "My Object",<br>
　　　　getNameFunc : function(){<br>
　　　　　　return function(){<br>
　　　　　　　　return this.name;	//这个this是有上下文的限制的<br>
　　　　　　};<br>
　　　　}<br>
　　};<br>
var tmp = Object.getNameFunc(); //此时没有执行this.name<br>
var name = tmp();//这个时候才执行，这时候的this上下文为全局<br>
alert(name);<br>
//alert(object.getNameFunc()())<br>
</p>

<p>5 把例子2变成：<br>
<br>
var name = "The Window";</p>

<p>　　var object = {<br>
　　　　name : "My Object",</p>

<p>　　　　getNameFunc : function(){<br>
　　　　　　var that = this;<br>
　　　　　　return function(){<br>
　　　　　　　　return that.name;<br>
　　　　　　};<br>
　　　　}<br>
　　};<br>
var tmp = Object.getNameFunc();	//这个时候执行了that = this，这里的this上下文是object,所以that指的是object<br>
var name = Object.getNameFunc();	//这个时候执行了that.name<br>
alert(name);<br>
//alert(object.getNameFunc()()); <br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216630"><abbr class="published" title="2011-04-19T15:28:31+08:00">2011年4月19日 15:28</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%BD%A9%E8%84%89%E5%88%83.html" title="轩脉刃的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用轩脉刃的这条留言" onclick="return CommentQuote(&#39;comment-quote-216630&#39;,&#39;轩脉刃&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216717" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://xqin.cn" href="http://xqin.cn/" target="_blank" rel="nofollow">小秦</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216717">
            <blockquote>
<pre>引用Jason的发言：</pre>

<p>但是从过客说的里面可以引出另外的问题，当使用这样的代码时。</p>

<p>　　function f1(){<br>
test = 10;<br>
　　　　var n=999;<br>
　　　　nAdd=function(){n+=1}<br>
　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}<br>
　　　　return f2;<br>
　　}</p>

<p>如果在函数f1定义之前添加变量定义var n = 1;然后调用f1()();则显示为999。说明nAdd中的n确实是作为全局变量存在。于是问题就来了——有什么方法让他可以是父函数中定义的n呢？</p>

</blockquote>

<pre>var n = 1;
function f1(){
	var n = 999;
	nAdd = function(){
		n++;
	}
	function f2(){
		alert(n);
	}
	return f2;
}
var b = f1();
nAdd();//n = 999+1 = 1000
b();//弹出 n 的值是 1000 (闭包内的变量n)
alert(n);//弹出n的值是 1 (全局)
</pre>
全局的函数 nAdd 和 由f1返回的函数中 所使用到的变量n全部为f1函数内的局部变量n,而不是全局变量n,证据就是上面的代码中最后一句 alert(n) 弹出的值是1, 也就是说 nAdd中的n++并没有改变全局变量中n的值.

<p>你自己描述的是 f1()() 显示的是999,说明 n 是使用的f1内部的变量n,而非是全局变量n,不知道你为什么会有</p><blockquote>说明nAdd中的n确实是作为全局变量存在。</blockquote>这种想法呢? 如果想在nAdd中使用全局变量n(即在函数外面定义的n)的话,使用window.n来访问.<p></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216717"><abbr class="published" title="2011-04-20T14:56:11+08:00">2011年4月20日 14:56</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E7%A7%A6.html" title="小秦的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小秦的这条留言" onclick="return CommentQuote(&#39;comment-quote-216717&#39;,&#39;小秦&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216718" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://xqin.cn" href="http://xqin.cn/" target="_blank" rel="nofollow">小秦</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216718">
            <p>楼主文章中的:<br>
</p><blockquote><br>
二、如何从外部读取局部变量？<br>
</blockquote><br>
这一整大段中的<br>
<blockquote>n=999;</blockquote><br>
根据整篇文章所表达的内容,应该为:<br>
<blockquote>var n=999;</blockquote><br>
因为如果没有加var,则声明的是全局变量,既然是全局变量,则在所有函数内部都是可见的,也就不会存在闭包这种说法.<p></p>

<p>请求楼主修正.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216718"><abbr class="published" title="2011-04-20T15:02:09+08:00">2011年4月20日 15:02</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E7%A7%A6.html" title="小秦的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小秦的这条留言" onclick="return CommentQuote(&#39;comment-quote-216718&#39;,&#39;小秦&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216719" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://xqin.cn" href="http://xqin.cn/" target="_blank" rel="nofollow">小秦</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216719">
            <blockquote>
<pre>引用小彘的发言：</pre>

<p>前面讲得挺好的，浅显易懂。对最后的两个例子搞不清楚为啥。版主能不能具体分析下。<br>
var obj=function()<br>
{<br>
var MyFunc=function()<br>
{<br>
 alert("hello world");<br>
}<br>
return function()<br>
{<br>
 return MyFunc;<br>
}<br>
}()<br>
var f3=obj();<br>
var f4=obj();<br>
alert(f3 === f4);//为啥是TRUE；搞不懂</p>

</blockquote>

<p>因为f3和f4都指向同一个地址(即MyFunc).<br>
</p><blockquote><br>
var obj = (function() {<br>
	var MyFunc=function() {<br>
		alert("hello world");<br>
	}<br>
	return function() {<br>
		return MyFunc;<br>
	}<br>
})();<br>
var f3=obj();<br>
var f4=obj();<br>
alert(f3 === f4);//为啥是TRUE；搞不懂<br>
</blockquote><p></p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216719"><abbr class="published" title="2011-04-20T15:05:09+08:00">2011年4月20日 15:05</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E7%A7%A6.html" title="小秦的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小秦的这条留言" onclick="return CommentQuote(&#39;comment-quote-216719&#39;,&#39;小秦&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216722" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小洪</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216722">
            <p>我测试了一下，为什么第一个例子输出的什么都没有是null，第二个我理解是myobject。谁能解释下</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216722"><abbr class="published" title="2011-04-20T16:48:48+08:00">2011年4月20日 16:48</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E6%B4%AA.html" title="小洪的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小洪的这条留言" onclick="return CommentQuote(&#39;comment-quote-216722&#39;,&#39;小洪&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216723" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Ruan YiFeng</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216723">
            <blockquote>
<pre>引用小秦的发言：</pre>

<p>请求楼主修正.</p>

</blockquote>

<p>谢谢指出，已更正。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216723"><abbr class="published" title="2011-04-20T16:53:56+08:00">2011年4月20日 16:53</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Ruan%20YiFeng.html" title="Ruan YiFeng的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Ruan YiFeng的这条留言" onclick="return CommentQuote(&#39;comment-quote-216723&#39;,&#39;Ruan YiFeng&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-216857" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://blog.sitearth.com" href="http://blog.sitearth.com/" target="_blank" rel="nofollow">sitearth</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-216857">
            <p>起初以为函数内用var声明变量，就等于用了this声明，其实不是<br>
var w=100;<br>
function f1(){<br>
	//var w=101;<br>
	//this.w=102;<br>
	function f2(){<br>
		document.write(this.w);<br>
	}<br>
	return f2;<br>
}<br>
f1()();<br>
输出：100</p>

<p>var w=100;<br>
function f1(){<br>
	var w=101;<br>
	//this.w=102;<br>
	function f2(){<br>
		document.write(this.w);<br>
	}<br>
	return f2;<br>
}<br>
f1()();<br>
输出：100</p>

<p>var w=100;<br>
function f1(){<br>
	w=101;<br>
	//this.w=102;<br>
	function f2(){<br>
		document.write(this.w);<br>
	}<br>
	return f2;<br>
}<br>
f1()();<br>
输出：101</p>

<p>var w=100;<br>
function f1(){<br>
	//var w=101;<br>
	this.w=102;<br>
	function f2(){<br>
		document.write(this.w);<br>
	}<br>
	return f2;<br>
}<br>
f1()();<br>
输出：102</p>

<p>看起来函数中的var和this并不是一个概念，函数内的局部变量与函数的属性不是一回事，不过通过上面的情况能够加深理解this和闭包</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-216857"><abbr class="published" title="2011-04-22T11:27:39+08:00">2011年4月22日 11:27</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/sitearth.html" title="sitearth的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用sitearth的这条留言" onclick="return CommentQuote(&#39;comment-quote-216857&#39;,&#39;sitearth&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-217761" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Aizen</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-217761">
            <p>很不错的讲解，楼主写的通俗易懂，很棒的理解，很受用！我的qq：290913917 希望有机会成为共同研究javascript和html5的伙伴，谢谢！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-217761"><abbr class="published" title="2011-05-01T00:10:19+08:00">2011年5月 1日 00:10</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Aizen.html" title="Aizen的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Aizen的这条留言" onclick="return CommentQuote(&#39;comment-quote-217761&#39;,&#39;Aizen&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-217978" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">lily</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-217978">
            <p>我感觉第一个思考题是不是这样理解：<br>
首先this指向的是当前运行该函数的对象,<br>
1、object.getNameFunc()得到了一个函数，函数为function(){return this.name}<br>
2、object.getNameFunc()()，此时为window运行该函数，所以this指向的是window,所以this.name为The window</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-217978"><abbr class="published" title="2011-05-04T11:29:38+08:00">2011年5月 4日 11:29</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/lily.html" title="lily的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用lily的这条留言" onclick="return CommentQuote(&#39;comment-quote-217978&#39;,&#39;lily&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-220091" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">foxracle</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-220091">
            <p>做习题之前有一点需要很清楚：</p>

<p>内部函数可以访问定义它们的外部函数的参数和变量（除了this和arguments之外）<br>
如果需要访问对象的name属性的话，就需要显示的定义一个变量that来引用this，而这个变量此时就指向object对象了。</p>

<p>第一题改成下面这样就很清楚了。getNameFunc的第一个()是属于方法调用，所以this绑定到了object对象，自然this.name为"My Object"，但是闭包函数无法访问这个this，它只能访问到全局的this。</p>

<p>       var name = "The Window";<br>
　　var object = {<br>
　　　　name : "My Object",<br>
　　　　getNameFunc : function(){<br>
                      alert(this.name);<br>
　　　　　　return function(){<br>
　　　　　　　　return this.name;<br>
　　　　　　};<br>
　　　　}<br>
　　};<br>
　　alert(object.getNameFunc()());</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-220091"><abbr class="published" title="2011-05-23T15:44:40+08:00">2011年5月23日 15:44</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/foxracle.html" title="foxracle的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用foxracle的这条留言" onclick="return CommentQuote(&#39;comment-quote-220091&#39;,&#39;foxracle&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-220660" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">CODER</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-220660">
            <p>写的真不错。。。看了很多文章讲闭包都是云里雾里的。。看了本文才恍然大悟。。。哦原来闭包如此简单。。。。楼主写的不错。。。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-220660"><abbr class="published" title="2011-06-02T15:56:51+08:00">2011年6月 2日 15:56</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/CODER.html" title="CODER的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用CODER的这条留言" onclick="return CommentQuote(&#39;comment-quote-220660&#39;,&#39;CODER&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-221603" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小超</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-221603">
            <p>前面讲的我都明白，但是最后两个例子还是不明白，好多处都不懂！<br>
1.　var object = {。。。} 这是在干什么？是在声明一个变量？还是在声明一个类，然后里面有许多属性？</p>

<p>2 .   object.getNameFunc()(); 怎么会有两个括号？</p>

<p><br>
3.   如何判断 this指向的是object 对象还是全局对象 ？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-221603"><abbr class="published" title="2011-06-14T16:30:06+08:00">2011年6月14日 16:30</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E8%B6%85.html" title="小超的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小超的这条留言" onclick="return CommentQuote(&#39;comment-quote-221603&#39;,&#39;小超&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-222342" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">anoymous</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-222342">
            <p>闭包是运行时中的概念，不能讲哪个函数是一个闭包！而是哪个函数在运行时存在一个闭包！有时候，好几个函数都可以组成一个闭包呢：<br>
function ff()<br>
{<br>
	var local=1;<br>
	this.add1=function()<br>
	{<br>
		return ++local;<br>
	};<br>
	this.add2=function()<br>
	{<br>
		return ++local;<br>
	}<br>
}</p>

<p>var f=new ff();</p>

<p>alert(f.add1());//2<br>
alert(f.add2());//3</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-222342"><abbr class="published" title="2011-06-24T14:33:14+08:00">2011年6月24日 14:33</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/anoymous.html" title="anoymous的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用anoymous的这条留言" onclick="return CommentQuote(&#39;comment-quote-222342&#39;,&#39;anoymous&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-224358" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Joe</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-224358">
            <p>最后两个例子中，第一个其实不是闭包，第二个是，但第二个例子其实不用那么复杂，直接把第一个例子中的this去掉就可以了。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-224358"><abbr class="published" title="2011-07-25T14:02:47+08:00">2011年7月25日 14:02</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Joe.html" title="Joe的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Joe的这条留言" onclick="return CommentQuote(&#39;comment-quote-224358&#39;,&#39;Joe&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-225423" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Revo</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-225423">
            <p>为什么第一个运行以后结果是result？！既不是window也不是object....???</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-225423"><abbr class="published" title="2011-08-12T15:31:53+08:00">2011年8月12日 15:31</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Revo.html" title="Revo的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Revo的这条留言" onclick="return CommentQuote(&#39;comment-quote-225423&#39;,&#39;Revo&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-226716" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">eva</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-226716">
            <p>　function f1(){<br>
　　　　n=999;<br>
　　}</p>

<p>　　alert(n); // error</p>

<p>这段代码在IE8和FIREFOX5上根本不能运行，求解释...</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-226716"><abbr class="published" title="2011-09-02T10:03:35+08:00">2011年9月 2日 10:03</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/eva.html" title="eva的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用eva的这条留言" onclick="return CommentQuote(&#39;comment-quote-226716&#39;,&#39;eva&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-226725" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">rush</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-226725">
            <p>@eva <br>
function f1(){<br>
　　　　n=999;<br>
　　}</p>

<p>　　alert(n); // error<br>
很明显啊，全局变量n是在函数f1中定义的，你不调用函数f1，n怎么定义呢<br>
function f1(){<br>
　　　　n=999;<br>
　　}<br>
    f1();<br>
　　alert(n);<br>
这样不就OK了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-226725"><abbr class="published" title="2011-09-02T11:27:54+08:00">2011年9月 2日 11:27</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/rush.html" title="rush的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用rush的这条留言" onclick="return CommentQuote(&#39;comment-quote-226725&#39;,&#39;rush&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-227235" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://wikitags.info/user.php?login=mistyletmy&amp;view=history" href="http://wikitags.info/user.php?login=mistyletmy&view=history" target="_blank" rel="nofollow">Kris Agnelli</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-227235">
            <p>At this time enhancements in could also be noticed in a point of contention.</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-227235"><abbr class="published" title="2011-09-08T11:20:23+08:00">2011年9月 8日 11:20</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Kris%20Agnelli.html" title="Kris Agnelli的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Kris Agnelli的这条留言" onclick="return CommentQuote(&#39;comment-quote-227235&#39;,&#39;Kris Agnelli&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-232672" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://Blog.zhuli.me" href="http://blog.zhuli.me/" target="_blank" rel="nofollow">Leigh</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-232672">
            <p>思考题中的例子貌似是  javascript高级程序设计里的。今天刚看到。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-232672"><abbr class="published" title="2011-09-28T22:19:55+08:00">2011年9月28日 22:19</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Leigh.html" title="Leigh的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Leigh的这条留言" onclick="return CommentQuote(&#39;comment-quote-232672&#39;,&#39;Leigh&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-236673" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">hyant</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-236673">
            <p>你真是个有趣的人，为什么我总能在你这里找到我感兴趣的博文？……</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-236673"><abbr class="published" title="2011-10-11T16:41:05+08:00">2011年10月11日 16:41</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/hyant.html" title="hyant的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用hyant的这条留言" onclick="return CommentQuote(&#39;comment-quote-236673&#39;,&#39;hyant&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-238233" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Legend1988</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-238233">
            <p>楼主可以解释一下思考题一吗？我看很多人跟我一样都不是很懂思考题一啊，万分感谢！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-238233"><abbr class="published" title="2011-10-28T10:13:16+08:00">2011年10月28日 10:13</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Legend1988.html" title="Legend1988的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Legend1988的这条留言" onclick="return CommentQuote(&#39;comment-quote-238233&#39;,&#39;Legend1988&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-238683" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">huangyunbin</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-238683">
            <blockquote>
<pre>引用Legend1988的发言：</pre>

<p>楼主可以解释一下思考题一吗？我看很多人跟我一样都不是很懂思考题一啊，万分感谢！</p>

</blockquote>

<p>同问，为什么this在嵌套函数中的意义不一样<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-238683"><abbr class="published" title="2011-11-02T16:37:04+08:00">2011年11月 2日 16:37</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/huangyunbin.html" title="huangyunbin的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用huangyunbin的这条留言" onclick="return CommentQuote(&#39;comment-quote-238683&#39;,&#39;huangyunbin&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-239613" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">apple</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-239613">
            <p>this始终表示调用者的应用，第一个的闭包返回出来的一个函数，就是在window的环境下调用了这个函数，所以这个this是指向的window,而第二个把this保存在了that中。不知道说清楚没有</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-239613"><abbr class="published" title="2011-11-14T18:03:55+08:00">2011年11月14日 18:03</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/apple.html" title="apple的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用apple的这条留言" onclick="return CommentQuote(&#39;comment-quote-239613&#39;,&#39;apple&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-239794" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Richard.Chou</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-239794">
            <p>不错，小伙子讲的很到位，比一些书上生硬的翻译要好一些。Good！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-239794"><abbr class="published" title="2011-11-16T10:39:25+08:00">2011年11月16日 10:39</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Richard.Chou.html" title="Richard.Chou的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Richard.Chou的这条留言" onclick="return CommentQuote(&#39;comment-quote-239794&#39;,&#39;Richard.Chou&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-240687" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">布田</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-240687">
            <p>后面第1个例子怎么输出result, result 是什么意思</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-240687"><abbr class="published" title="2011-11-25T10:19:21+08:00">2011年11月25日 10:19</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B8%83%E7%94%B0.html" title="布田的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用布田的这条留言" onclick="return CommentQuote(&#39;comment-quote-240687&#39;,&#39;布田&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-241077" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">noodles</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-241077">
            <p>@陈锐达：</p>

<p>根据您的解释，运行结果是不对的！如在A中定义name，执行结果一样<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-241077"><abbr class="published" title="2011-11-30T23:24:28+08:00">2011年11月30日 23:24</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/noodles.html" title="noodles的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用noodles的这条留言" onclick="return CommentQuote(&#39;comment-quote-241077&#39;,&#39;noodles&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-241585" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">追逐我的梦</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-241585">
            <p>实际上，我认为闭包只是给外部函数提供了一个操作局部变量的途径，局部变量本身并没有改变，仍然为局部变量。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-241585"><abbr class="published" title="2011-12-05T23:04:36+08:00">2011年12月 5日 23:04</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%BF%BD%E9%80%90%E6%88%91%E7%9A%84%E6%A2%A6.html" title="追逐我的梦的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用追逐我的梦的这条留言" onclick="return CommentQuote(&#39;comment-quote-241585&#39;,&#39;追逐我的梦&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-241938" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">艳阳天</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-241938">
            <p>我也觉得最后两个例子，好像跟this的关系更大……</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-241938"><abbr class="published" title="2011-12-09T15:15:57+08:00">2011年12月 9日 15:15</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%89%B3%E9%98%B3%E5%A4%A9.html" title="艳阳天的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用艳阳天的这条留言" onclick="return CommentQuote(&#39;comment-quote-241938&#39;,&#39;艳阳天&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-242495" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">avatasia</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-242495">
            <p>@tt 发问需谨慎， 文中的写法是一种类的写法， 域里有动作，你这个是函数。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-242495"><abbr class="published" title="2011-12-15T10:45:38+08:00">2011年12月15日 10:45</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/avatasia.html" title="avatasia的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用avatasia的这条留言" onclick="return CommentQuote(&#39;comment-quote-242495&#39;,&#39;avatasia&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-243099" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">清流鱼</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-243099">
            <p>渐渐地对闭包和this有点了解，尤其加上各位网友的激情讨论，并附上示例，通俗易懂！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-243099"><abbr class="published" title="2011-12-22T23:09:01+08:00">2011年12月22日 23:09</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%B8%85%E6%B5%81%E9%B1%BC.html" title="清流鱼的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用清流鱼的这条留言" onclick="return CommentQuote(&#39;comment-quote-243099&#39;,&#39;清流鱼&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-247847" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">alex</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-247847">
            <blockquote>
<pre>引用Joe的发言：</pre>
最后两个例子中，第一个其实不是闭包，第二个是，但第二个例子其实不用那么复杂，直接把第一个例子中的this去掉就可以了。
</blockquote>

<p>不行哦，一定要引用一次，不然还不是闭包。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-247847"><abbr class="published" title="2012-02-10T16:08:29+08:00">2012年2月10日 16:08</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/alex.html" title="alex的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用alex的这条留言" onclick="return CommentQuote(&#39;comment-quote-247847&#39;,&#39;alex&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-249453" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">黄黄</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-249453">
            <blockquote>
<pre>引用apple的发言：</pre>

<p>this始终表示调用者的应用，第一个的闭包返回出来的一个函数，就是在window的环境下调用了这个函数，所以这个this是指向的window,而第二个把this保存在了that中。不知道说清楚没有</p>

</blockquote>

<p>我赞成。。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-249453"><abbr class="published" title="2012-02-28T13:32:41+08:00">2012年2月28日 13:32</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E9%BB%84%E9%BB%84.html" title="黄黄的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用黄黄的这条留言" onclick="return CommentQuote(&#39;comment-quote-249453&#39;,&#39;黄黄&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-250330" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">林子</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-250330">
            <p>个人觉着楼主说的不是闭包</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-250330"><abbr class="published" title="2012-03-12T17:37:48+08:00">2012年3月12日 17:37</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%9E%97%E5%AD%90.html" title="林子的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用林子的这条留言" onclick="return CommentQuote(&#39;comment-quote-250330&#39;,&#39;林子&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-251995" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">daniel</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-251995">
            <p>初学者就这么理解闭包，最好不过了。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-251995"><abbr class="published" title="2012-04-06T15:28:07+08:00">2012年4月 6日 15:28</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/daniel.html" title="daniel的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用daniel的这条留言" onclick="return CommentQuote(&#39;comment-quote-251995&#39;,&#39;daniel&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-256571" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.cnblogs.com/super-d2/" href="http://www.cnblogs.com/super-d2/" target="_blank" rel="nofollow">甄超文</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-256571">
            <p>思考题答案：The Window、My Object；其实最关键的就是要明白作用域链和闭包所起到的作用，其实闭包说到底就是一个函数，而且函数调用返回后其资源所占用的栈区并没有释放，，所以变量就还保存在内存中，由于作用域链的关系，它会去寻找离其最近的var声明，var声明所在就是该闭包所在的层，从而在这层里面所得到的结果就是它最后的值，于是乎返回值也就是这个最终的值了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-256571"><abbr class="published" title="2012-06-12T14:13:17+08:00">2012年6月12日 14:13</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E7%94%84%E8%B6%85%E6%96%87.html" title="甄超文的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用甄超文的这条留言" onclick="return CommentQuote(&#39;comment-quote-256571&#39;,&#39;甄超文&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-257626" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">袁huhu</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-257626">
            <p>最后两道思考题～  其实和函数调用还有关系的~   在以上例子中使用的是函数调用的方式，this这时候是指全局变量</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-257626"><abbr class="published" title="2012-06-27T10:51:17+08:00">2012年6月27日 10:51</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%A2%81huhu.html" title="袁huhu的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用袁huhu的这条留言" onclick="return CommentQuote(&#39;comment-quote-257626&#39;,&#39;袁huhu&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-258485" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">红雨</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-258485">
            <blockquote>
<pre>引用afity的发言：</pre>

<p>最后一题重点在this</p>

</blockquote>

<p> 正解，和闭包有什么关系啊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-258485"><abbr class="published" title="2012-07-10T23:47:51+08:00">2012年7月10日 23:47</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E7%BA%A2%E9%9B%A8.html" title="红雨的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用红雨的这条留言" onclick="return CommentQuote(&#39;comment-quote-258485&#39;,&#39;红雨&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-259080" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://weibo.com/xiaotaostory" href="http://weibo.com/xiaotaostory" target="_blank" rel="nofollow">小涛故事</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-259080">
            <blockquote>
<pre>引用红雨的发言：</pre>

<p> 正解，和闭包有什么关系啊</p>

</blockquote>

<p>对于代码片段一</p>

<p>object.getnameFunc() 返回的匿名闭包函数被全局变量所引用，其中的this指向</p>

<p>全局变量，当执行时打印The Window 。</p>

<p>对于代码片段二</p>

<p>object.getnameFunc() 在返回闭包函数前，将this赋给that，此时getnameFunc是由</p>

<p>object调用的，故而this指向object，当内部函数被返回时，由于闭包的特性，仍然</p>

<p>能访问到外部函数中的值，当执行打印My Object 。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-259080"><abbr class="published" title="2012-07-20T19:37:06+08:00">2012年7月20日 19:37</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E6%B6%9B%E6%95%85%E4%BA%8B.html" title="小涛故事的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小涛故事的这条留言" onclick="return CommentQuote(&#39;comment-quote-259080&#39;,&#39;小涛故事&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-260280" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">徐相</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-260280">
            <p>代码段一、<br>
当一个函数作为函数而不是方法调用的时候，这个this关键字引用全局对象。容易令人混淆的是，当一个嵌套的函数（作为函数）在一个包含的函数中调用，而这个包含的函数是作为方法调用的，这也是成立的：this关键字在包含的函数中有一个值，但是它却（不太直观地）引用嵌套的函数体的内部的全局对象。<br>
     所以第一个打印出来的是"The Window"<br>
代码段二、<br>
由于this关键字不是在包含的函数中引用的，而是通过that=this这个调用的，所以这个this不是在闭包内的，因此这个this就不能调用函数体内的全局对象，而是他的局部对象object.name，所以第二个打印出来的是"My Object"</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-260280"><abbr class="published" title="2012-08-02T10:33:25+08:00">2012年8月 2日 10:33</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%BE%90%E7%9B%B8.html" title="徐相的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用徐相的这条留言" onclick="return CommentQuote(&#39;comment-quote-260280&#39;,&#39;徐相&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-261572" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">编程大师</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-261572">
            <p>说多无用,关键是理清函数什么时候作为对象使用，什么时候作为函数使用。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-261572"><abbr class="published" title="2012-08-18T00:46:46+08:00">2012年8月18日 00:46</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E7%BC%96%E7%A8%8B%E5%A4%A7%E5%B8%88.html" title="编程大师的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用编程大师的这条留言" onclick="return CommentQuote(&#39;comment-quote-261572&#39;,&#39;编程大师&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-261573" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">编程大师</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-261573">
            <p>object.getnameFunc()() 也可以改为object.getnameFunc().call()<br>
这就是javascript狡猾的地方。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-261573"><abbr class="published" title="2012-08-18T00:49:26+08:00">2012年8月18日 00:49</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E7%BC%96%E7%A8%8B%E5%A4%A7%E5%B8%88.html" title="编程大师的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用编程大师的这条留言" onclick="return CommentQuote(&#39;comment-quote-261573&#39;,&#39;编程大师&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-263774" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://zernmal.1yweb.com" href="http://zernmal.1yweb.com/" target="_blank" rel="nofollow">zernmal</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-263774">
            <p>讲得很易懂 ··· 然后，最后思考题 感觉 是this关键字的问题，暂时还不懂··</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-263774"><abbr class="published" title="2012-09-22T20:11:18+08:00">2012年9月22日 20:11</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/zernmal.html" title="zernmal的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用zernmal的这条留言" onclick="return CommentQuote(&#39;comment-quote-263774&#39;,&#39;zernmal&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-264407" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.hetaoblog.com/myblogs/post/javascript-closure-chain-scope-anonymous-function-module.jhtml" href="http://www.hetaoblog.com/myblogs/post/javascript-closure-chain-scope-anonymous-function-module.jhtml" target="_blank" rel="nofollow">核桃博客</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-264407">
            <p>谢谢，关于闭包本身的概念非常清晰， 不过我当初读你这篇文章的时候最大的困惑是为什么要搞出闭包这个东西来， 我这里写了我的理解<br>
<a href="http://www.hetaoblog.com/myblogs/post/javascript-closure-chain-scope-anonymous-function-module.jhtml" rel="nofollow"> <br>
</a><a href="http://www.hetaoblog.com/myblogs/post/javascript-closure-chain-scope-anonymous-function-module.jhtml" rel="nofollow">http://www.hetaoblog.com/myblogs/post/javascript-closure-chain-scope-anonymous-function-module.jhtml</a><br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-264407"><abbr class="published" title="2012-10-06T22:22:18+08:00">2012年10月 6日 22:22</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%A0%B8%E6%A1%83%E5%8D%9A%E5%AE%A2.html" title="核桃博客的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用核桃博客的这条留言" onclick="return CommentQuote(&#39;comment-quote-264407&#39;,&#39;核桃博客&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-265620" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://..." href="http://.../" target="_blank" rel="nofollow">哥的传说</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-265620">
            <p>请问阮兄/各位高人，假如某个JavaScript的函数对象已被调用过一次，如何用代码验证/判断当该函数对象被第二次调用时，它是新创建的还是使用的内存中已有的？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-265620"><abbr class="published" title="2012-11-03T18:52:49+08:00">2012年11月 3日 18:52</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%93%A5%E7%9A%84%E4%BC%A0%E8%AF%B4.html" title="哥的传说的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用哥的传说的这条留言" onclick="return CommentQuote(&#39;comment-quote-265620&#39;,&#39;哥的传说&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-265951" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">hanvslin</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-265951">
            <blockquote>
<pre>引用tomwang的发言：</pre>
最后一个题感觉和闭包没什么关系啊，能详细解释一下吗？因为当一个函数作为函数而不是方法来调用的时候，this指向的是全局对象，这在《Javascript权威指南》上说的很清楚，所以答案肯定是“The Window”，和闭包没什么关系啊
</blockquote>

<p>完全赞同这位仁兄的看法！！前面闭包讲的不错，但是最后面的思考题出的很烂啊，跟闭包没关系，让人看完了反而糊涂了！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-265951"><abbr class="published" title="2012-11-14T14:21:57+08:00">2012年11月14日 14:21</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/hanvslin.html" title="hanvslin的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用hanvslin的这条留言" onclick="return CommentQuote(&#39;comment-quote-265951&#39;,&#39;hanvslin&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-266867" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="https://github.com/smallsmallwolf/Zonda" href="https://github.com/smallsmallwolf/Zonda" target="_blank" rel="nofollow">Degas</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-266867">
            <p>有个特别大的疑问：</p>

<p>……原因就在于f1是f2的父函数，而f2被赋给了一个全局变量，……</p>

<p>f2真的被赋给一个全局变量了？</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-266867"><abbr class="published" title="2012-12-10T16:15:01+08:00">2012年12月10日 16:15</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Degas.html" title="Degas的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Degas的这条留言" onclick="return CommentQuote(&#39;comment-quote-266867&#39;,&#39;Degas&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-267286" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">rst</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-267286">
            <blockquote>
<pre>引用hanvslin的发言：</pre>

<p>完全赞同这位仁兄的看法！！前面闭包讲的不错，但是最后面的思考题出的很烂啊，跟闭包没关系，让人看完了反而糊涂了！</p>

</blockquote>

<p>最初我也以为思考题与文章主题无关，这两天在反复看 JavaScript 权威指南 函数一章，都看晕了...<br>
产生闭包效果的环境必须是嵌套函数的引用被保存到了一个全局作用域里面，也不难理解 阮老师思考题的设计了<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-267286"><abbr class="published" title="2012-12-25T17:21:20+08:00">2012年12月25日 17:21</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/rst.html" title="rst的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用rst的这条留言" onclick="return CommentQuote(&#39;comment-quote-267286&#39;,&#39;rst&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-267824" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://none" href="http://none/" target="_blank" rel="nofollow">jsnew</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-267824">
            <p>在退出函数之前，将不使用的局部变量全部删除。</p>

<p>请教一下这个改如何做？不太明白。。。Thanks!</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-267824"><abbr class="published" title="2013-01-14T13:35:25+08:00">2013年1月14日 13:35</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/jsnew.html" title="jsnew的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用jsnew的这条留言" onclick="return CommentQuote(&#39;comment-quote-267824&#39;,&#39;jsnew&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-268916" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">初学JS</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-268916">
            <p>保留内存值的解释有点不好，即使var result = f1(); 即使这里不赋值给全局变量result，通过f1()();也不会改变n的值，呵呵~</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-268916"><abbr class="published" title="2013-02-20T17:29:06+08:00">2013年2月20日 17:29</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%88%9D%E5%AD%A6JS.html" title="初学JS的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用初学JS的这条留言" onclick="return CommentQuote(&#39;comment-quote-268916&#39;,&#39;初学JS&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-268920" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://xiaoxiehang.h5.5vv.cc" href="http://xiaoxiehang.h5.5vv.cc/" target="_blank" rel="nofollow">xiaoxiehang</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-268920">
            <p>后面的思考题   阮哥能解释一下吗 <br>
前面的例子是看懂了  但是思考题还是不会做</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-268920"><abbr class="published" title="2013-02-20T17:59:28+08:00">2013年2月20日 17:59</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/xiaoxiehang.html" title="xiaoxiehang的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用xiaoxiehang的这条留言" onclick="return CommentQuote(&#39;comment-quote-268920&#39;,&#39;xiaoxiehang&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-269054" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://mustrank.com" href="http://mustrank.com/" target="_blank" rel="nofollow">wengee</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-269054">
            <blockquote>
<pre>引用SpiderMan的发言：</pre>

<p>感觉这里的例子更好一些 <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures" rel="nofollow">https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Working_with_Closures</a></p>

</blockquote>

<p>这里对于闭包的讲解好一点：普通的函数内嵌，内部函数是先执行；而闭包则是：先把内部函数赋给外部函数，然后在执行。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-269054"><abbr class="published" title="2013-02-23T12:11:08+08:00">2013年2月23日 12:11</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/wengee.html" title="wengee的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用wengee的这条留言" onclick="return CommentQuote(&#39;comment-quote-269054&#39;,&#39;wengee&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-269191" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.cealer.com" href="http://www.cealer.com/" target="_blank" rel="nofollow">西毒</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-269191">
            <p>跟阮老师学JS！</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-269191"><abbr class="published" title="2013-02-27T13:08:34+08:00">2013年2月27日 13:08</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%A5%BF%E6%AF%92.html" title="西毒的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用西毒的这条留言" onclick="return CommentQuote(&#39;comment-quote-269191&#39;,&#39;西毒&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-269287" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">macrotea</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-269287">
            <p>感觉应该从js作用域链及其原理来分析闭包,这样才能彻头彻尾明白!</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-269287"><abbr class="published" title="2013-03-02T12:20:40+08:00">2013年3月 2日 12:20</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/macrotea.html" title="macrotea的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用macrotea的这条留言" onclick="return CommentQuote(&#39;comment-quote-269287&#39;,&#39;macrotea&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-269410" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">zhangyq</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-269410">
            <blockquote>
<pre>引用George Wing的发言：</pre>

<p>上面本人说得不太正确。<br>
this的指向是由它所在函数调用的上下文决定的，而不是由它所在函数定义的上下文决定的。</p>

</blockquote>
这里说的this才是正确的。如果将此处的this能够轻松的理解，我想本文的最后一道题就懂了。你怎样认为呢？

        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-269410"><abbr class="published" title="2013-03-06T10:51:30+08:00">2013年3月 6日 10:51</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/zhangyq.html" title="zhangyq的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用zhangyq的这条留言" onclick="return CommentQuote(&#39;comment-quote-269410&#39;,&#39;zhangyq&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-270594" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">douya0808</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-270594">
            <p>每个函数在被调用时，其活动对象都会自动取得两个特殊变量：this和arguments。内部函数在搜索这个变量时，只会搜索到其活动对象为止，因此永远不可能直接访问外部函数中的这两个变量(这一点通过前面的图可以看得更清楚)。意思就是说找到匿名函数中的this和arguments就不会再往下找了(这里的往下指的是外层的包含函数，和最外层的window全局环境)，而匿名函数的this对象通常指向window，所以输出的是全局的那个字符串。不过，把外部作用域中的this对象保存在一个闭包能够访问到的变量里，就可以让闭包访问该对象了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-270594"><abbr class="published" title="2013-04-09T19:57:40+08:00">2013年4月 9日 19:57</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/douya0808.html" title="douya0808的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用douya0808的这条留言" onclick="return CommentQuote(&#39;comment-quote-270594&#39;,&#39;douya0808&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-271131" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://ifeng.name" href="http://ifeng.name/" target="_blank" rel="nofollow">Fenix</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-271131">
            <p>不执行调用f1肯定不可能生成test变量，第二个问题同样的原因。<br>
</p><blockquote><br>
<pre>引用过客的发言：</pre></blockquote><p></p>

<p>浅显易懂，很好。</p>

<p> 如下看法，认为有待商榷：<br>
#1、有一个地方需要注意，函数内部声明变量的时候，一定要使用var命令。如果不用的话，你实际上声明了一个全局变量！</p>

<p>#2、这段代码中另一个值得注意的地方，就是“nAdd=function(){n+=1}”这一行，首先在nAdd前面没有使用var关键字，因此nAdd是一个全局变量，而不是局部变量。其次，nAdd的值是一个匿名函数（anonymous function），而这个匿名函数本身也是一个闭包，所以nAdd相当于是一个setter，可以在函数外部对函数内部的局部变量进行操作。</p>

<p>　　function f1(){<br>
 test = 10;<br>
　　　　var n=999;<br>
　　　　nAdd=function(){n+=1}<br>
　　　　function f2(){<br>
　　　　　　alert(n);<br>
　　　　}<br>
　　　　return f2;<br>
　　}<br>
 //如果 #1 说法正确，下句会打印10，实际结果是test未定义。<br>
 //alert(test);// error test 未定义<br>
　 <br>
 //如果 #2 正确，语句 nAdd(); 位置在何处应该都能执行，测试结果在下面这个位置，也就是语句 var result=f1(); 前。是不能执行的。<br>
 //nAdd();<br>
 var result=f1();<br>
 result(); // 999<br>
　 nAdd();<br>
 result(); // 1000</p>


        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-271131"><abbr class="published" title="2013-04-30T18:50:28+08:00">2013年4月30日 18:50</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Fenix.html" title="Fenix的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Fenix的这条留言" onclick="return CommentQuote(&#39;comment-quote-271131&#39;,&#39;Fenix&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-271799" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Black</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-271799">
            <blockquote>
<pre>引用George Wing的发言：</pre>

<p>上面本人说得不太正确。<br>
this的指向是由它所在函数调用的上下文决定的，而不是由它所在函数定义的上下文决定的。</p>

</blockquote>

<p>哦。看了你这个解释就了解了<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-271799"><abbr class="published" title="2013-05-28T15:38:59+08:00">2013年5月28日 15:38</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Black.html" title="Black的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Black的这条留言" onclick="return CommentQuote(&#39;comment-quote-271799&#39;,&#39;Black&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-271828" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">curran</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-271828">
            <p>说的很易懂，最后两个例子还是有点模糊</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-271828"><abbr class="published" title="2013-05-30T11:37:23+08:00">2013年5月30日 11:37</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/curran.html" title="curran的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用curran的这条留言" onclick="return CommentQuote(&#39;comment-quote-271828&#39;,&#39;curran&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-271989" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.null.com" href="http://www.null.com/" target="_blank" rel="nofollow">C的边缘</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-271989">
            <p>为什么话要反着说呢，应该说正例，这着用太糟糕了，赞同 @迷途小书童 @steven</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-271989"><abbr class="published" title="2013-06-08T15:11:57+08:00">2013年6月 8日 15:11</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/C%E7%9A%84%E8%BE%B9%E7%BC%98.html" title="C的边缘的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用C的边缘的这条留言" onclick="return CommentQuote(&#39;comment-quote-271989&#39;,&#39;C的边缘&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-272199" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">范小龙</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-272199">
            <blockquote>
<pre>引用tomwang的发言：</pre>

<p>最后一个题感觉和闭包没什么关系啊，能详细解释一下吗？因为当一个函数作为函数而不是方法来调用的时候，this指向的是全局对象，这在《Javascript权威指南》上说的很清楚，所以答案肯定是“The Window”，和闭包没什么关系啊</p>

</blockquote>
《Javascript权威指南》上说：如果嵌套函数作为函数调用，其this值不是全局对象（非严格模式下）就是undefined（严格模式下）; 
  如果嵌套函数作为方法调用，其this值指向调用它的对象。所以代码片段一，getNameFunc()作为object的方法，所以this值应该指向调用它的对象（object），而object自己定义name为"My Object"，所以片段一，我觉得应该是弹出"My Object"。我是新手，我只是从this方向对这个函数分析，有错误的地方，还望高手指点。
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-272199"><abbr class="published" title="2013-06-18T15:50:08+08:00">2013年6月18日 15:50</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E8%8C%83%E5%B0%8F%E9%BE%99.html" title="范小龙的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用范小龙的这条留言" onclick="return CommentQuote(&#39;comment-quote-272199&#39;,&#39;范小龙&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-272346" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="https://github.com/phplaber" href="https://github.com/phplaber" target="_blank" rel="nofollow">phplaber</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-272346">
            <p>“闭包的概念”这一节总结的非常好，浅显易懂。同时，也了解了闭包的两个用处：一个是可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-272346"><abbr class="published" title="2013-06-27T20:59:01+08:00">2013年6月27日 20:59</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/phplaber.html" title="phplaber的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用phplaber的这条留言" onclick="return CommentQuote(&#39;comment-quote-272346&#39;,&#39;phplaber&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-272807" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">zz</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-272807">
            <p>最后两个例子关键是区分object.getnameFunc()调用时和调用后的this指向。<br>
第一个问题，object.getnameFunc()()函数在执行时this属于全局域，因此结果是the window<br>
第二个问题，通过使用that=this 保留了在调用object.getnameFunc()时的this状态值。因此在getnameFunc()的闭包中访问的变量是已经不是this的了，而是that的～</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-272807"><abbr class="published" title="2013-07-25T21:06:38+08:00">2013年7月25日 21:06</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/zz.html" title="zz的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用zz的这条留言" onclick="return CommentQuote(&#39;comment-quote-272807&#39;,&#39;zz&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-272885" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">陈默</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-272885">
            <p>JS新手，学习了，思考题和讨论很强大。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-272885"><abbr class="published" title="2013-07-30T14:34:45+08:00">2013年7月30日 14:34</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E9%99%88%E9%BB%98.html" title="陈默的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用陈默的这条留言" onclick="return CommentQuote(&#39;comment-quote-272885&#39;,&#39;陈默&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-273145" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">张雨阁</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-273145">
            <p>思考题解答（个人见解）：<br>
1、因为闭包最后的返回值是一个函数，注意紧紧是一个函数而已 并没有执行，等到alert调用时才执行，而这时执行调用的方法，前面阮老师说了，函数内没有var声明的事全局变量，所以调用的getName是一个全局的变量，所以对应this找到的是全局的name.<br>
2、因为this的对象引用在编译时就已经确定了，就是object，所以返回值在Object中开始查找，找到了Obeject中的name就不到全局变量中查找。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-273145"><abbr class="published" title="2013-08-19T11:23:40+08:00">2013年8月19日 11:23</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%BC%A0%E9%9B%A8%E9%98%81.html" title="张雨阁的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用张雨阁的这条留言" onclick="return CommentQuote(&#39;comment-quote-273145&#39;,&#39;张雨阁&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-273197" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">abel533</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-273197">
            <p>综合各种理解之后，我明白最后的“代码片段一”中的闭包函数中的this是window对象，也就是说..闭包函数的范围竟然是window。。。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-273197"><abbr class="published" title="2013-08-22T16:43:09+08:00">2013年8月22日 16:43</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/abel533.html" title="abel533的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用abel533的这条留言" onclick="return CommentQuote(&#39;comment-quote-273197&#39;,&#39;abel533&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-275487" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">superx</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-275487">
            <p>这么理解还不如不理解，这样下来对新手是一种误导。所以说才建议大家尽量都去看英文网站。唉</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-275487"><abbr class="published" title="2013-09-24T09:37:59+08:00">2013年9月24日 09:37</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/superx.html" title="superx的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用superx的这条留言" onclick="return CommentQuote(&#39;comment-quote-275487&#39;,&#39;superx&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-277878" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">wei</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-277878">
            <p>其实看完这篇文章，对于闭包的概念就有了更深刻的理解<br>
最后留的两道题目，很好的说明了这一点。<br>
因为第一题中getNameFunc这个方法或者叫函数是属于全局作用域的，所以里面返回的this始终都是指向window的。而第二题中用that=this改变了当前函数指向的作用域，所以第二题中的this最终只想的是myobject。<br>
不知道我的理解正确不正确。<br>
如果说错，请勿见怪...</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-277878"><abbr class="published" title="2013-10-09T23:37:16+08:00">2013年10月 9日 23:37</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/wei.html" title="wei的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用wei的这条留言" onclick="return CommentQuote(&#39;comment-quote-277878&#39;,&#39;wei&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-285949" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">nebula</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-285949">
            <p>return function() {<br>
    return this.name;<br>
}<br>
这里的this代表调用方法时所在的的作用域：全局作用域window。</p>

<p>return function() {<br>
    return that.name;<br>
}<br>
object.getNameFunc()()此处实现了从外部调用局部变量的方法，that会顺着作用域链向上级作用域查找，所以获得是getnameFunc的定义的变量var that = this。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-285949"><abbr class="published" title="2013-11-13T15:23:17+08:00">2013年11月13日 15:23</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/nebula.html" title="nebula的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用nebula的这条留言" onclick="return CommentQuote(&#39;comment-quote-285949&#39;,&#39;nebula&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-285979" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://没有丫亲。" href="http://xn--diqsm563dw9e./" target="_blank" rel="nofollow">汉锐</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-285979">
            <p>@小彘：</p>

<p>是引用类型。f3和f4的值是指针，只想obj()。所以全等是true。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-285979"><abbr class="published" title="2013-11-13T18:47:49+08:00">2013年11月13日 18:47</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E6%B1%89%E9%94%90.html" title="汉锐的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用汉锐的这条留言" onclick="return CommentQuote(&#39;comment-quote-285979&#39;,&#39;汉锐&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-290929" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://silenceper.com" href="http://silenceper.com/" target="_blank" rel="nofollow">silenceper</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-290929">
            <p>后两个应该this的作用域问题，不是闭包的问题吧。 弄的我都糊涂了...  还好找了一篇通俗的问题在,终于弄懂了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-290929"><abbr class="published" title="2013-12-03T10:31:45+08:00">2013年12月 3日 10:31</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/silenceper.html" title="silenceper的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用silenceper的这条留言" onclick="return CommentQuote(&#39;comment-quote-290929&#39;,&#39;silenceper&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-291414" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小小技术员</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-291414">
            <p>执行过f1这个函数后，test如果是局部变量会被销毁，如果是全局变量则会保存在内存堆(heap)里，如果不执行f1函数，test和nadd都是不存在的</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-291414"><abbr class="published" title="2013-12-05T13:53:24+08:00">2013年12月 5日 13:53</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E5%B0%8F%E6%8A%80%E6%9C%AF%E5%91%98.html" title="小小技术员的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小小技术员的这条留言" onclick="return CommentQuote(&#39;comment-quote-291414&#39;,&#39;小小技术员&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-291417" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">小小技术员</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-291417">
            <p>不，我补充一下，我应该是说错了，既然f2函数是闭包，那么f2函数会保持它的外部函数f1的作用域，即使定义test为f1函数的局部变量(var test = 10);那么也要先检查f2是否对test产生引用，如果引用数为0，则在f1()调用完后销毁，再运行f1()()(实际上是调用f2函数)也不会产生对test这个局部变量的引用，所以它就在栈中被销毁了。<br>
如果理解的不对，请大侠们拍砖</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-291417"><abbr class="published" title="2013-12-05T14:19:17+08:00">2013年12月 5日 14:19</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%B0%8F%E5%B0%8F%E6%8A%80%E6%9C%AF%E5%91%98.html" title="小小技术员的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用小小技术员的这条留言" onclick="return CommentQuote(&#39;comment-quote-291417&#39;,&#39;小小技术员&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-296440" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">_____LG</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-296440">
            <p>最后的思考题如果能理解这句话“this的指向是由它所在函数调用的上下文决定的，而不是由它所在函数定义的上下文决定的”，我想就能它们的运行结果了</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-296440"><abbr class="published" title="2014-01-06T16:29:06+08:00">2014年1月 6日 16:29</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/_____LG.html" title="_____LG的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用_____LG的这条留言" onclick="return CommentQuote(&#39;comment-quote-296440&#39;,&#39;_____LG&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-297761" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.codingday.cn" href="http://www.codingday.cn/" target="_blank" rel="nofollow">紧张的小白</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-297761">
            <p>this的指向是由它所在函数调用的上下文决定的，而不是由它所在函数定义的上下文决定的。喜欢这句话，但是闭包还是没有理解透彻。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-297761"><abbr class="published" title="2014-01-14T15:14:08+08:00">2014年1月14日 15:14</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E7%B4%A7%E5%BC%A0%E7%9A%84%E5%B0%8F%E7%99%BD.html" title="紧张的小白的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用紧张的小白的这条留言" onclick="return CommentQuote(&#39;comment-quote-297761&#39;,&#39;紧张的小白&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-300287" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">陈守川</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-300287">
            <p>我觉得大家说了这么多，都没人把代码写出来运行一下来验证自己的答案么，也不管自己的答案是否正确么。通过运行发现：<br>
思考题一：打印：空白<br>
思考题二：打印：My Object<br>
虽然我不太了解，但是评论中的很多人自己也理解错误了。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-300287"><abbr class="published" title="2014-02-17T11:56:52+08:00">2014年2月17日 11:56</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E9%99%88%E5%AE%88%E5%B7%9D.html" title="陈守川的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用陈守川的这条留言" onclick="return CommentQuote(&#39;comment-quote-300287&#39;,&#39;陈守川&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-300706" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">jprovim</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-300706">
            <p>R兄講的非常簡單易懂。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-300706"><abbr class="published" title="2014-02-22T06:25:16+08:00">2014年2月22日 06:25</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/jprovim.html" title="jprovim的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用jprovim的这条留言" onclick="return CommentQuote(&#39;comment-quote-300706&#39;,&#39;jprovim&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-301007" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">bryantzhang</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-301007">
            <p>我觉得是这样的，<br>
第一个里边的this指向的是那个闭包函数，<br>
第二个例子里边的this指向的是object。</p>

<blockquote>
<pre>引用陈守川的发言：</pre>

<p>我觉得大家说了这么多，都没人把代码写出来运行一下来验证自己的答案么，也不管自己的答案是否正确么。通过运行发现：<br>
思考题一：打印：空白<br>
思考题二：打印：My Object<br>
虽然我不太了解，但是评论中的很多人自己也理解错误了。</p>

</blockquote>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-301007"><abbr class="published" title="2014-02-25T10:59:43+08:00">2014年2月25日 10:59</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/bryantzhang.html" title="bryantzhang的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用bryantzhang的这条留言" onclick="return CommentQuote(&#39;comment-quote-301007&#39;,&#39;bryantzhang&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-303275" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">陈辉</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-303275">
            <p>第一个 打印结果为 The window<br>
第二个 打印结果为 My Object</p>

<p>第一个 this为全局对象，所以alert处理的name为The window<br>
第二个 that 为object对象，所以alert 处理的name为My object<br>
第二个好理解，因为在调用前用that 保存了object 自己的this，所以that 就成为是有变量，在闭包内可以调用。<br>
第一个有点晕，因为第一个的this指向自己，然后被window 给调用this 就成了window对象，它的name就是全局的name<br>
</p><blockquote><br>
<pre>引用陈守川的发言：</pre></blockquote><p></p>

<p>我觉得大家说了这么多，都没人把代码写出来运行一下来验证自己的答案么，也不管自己的答案是否正确么。通过运行发现：<br>
思考题一：打印：空白<br>
思考题二：打印：My Object<br>
虽然我不太了解，但是评论中的很多人自己也理解错误了。</p>


        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-303275"><abbr class="published" title="2014-03-16T15:49:44+08:00">2014年3月16日 15:49</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E9%99%88%E8%BE%89.html" title="陈辉的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用陈辉的这条留言" onclick="return CommentQuote(&#39;comment-quote-303275&#39;,&#39;陈辉&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-305643" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author"><a title="http://www.adf.com" href="http://www.adf.com/" target="_blank" rel="nofollow">忍不住要问了</a></span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-305643">
            <p>这篇文章流传很广，看了多次，忍不住要问了。下面这句话：<br>
－－－－－－－－－<br>
Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量。<br>
－－－－－－－－－－－<br>
请问有哪种语言是“不”可以在函数内部直接读取全局变量的？ 全局变量什么意思，就是在任何地方都可以读取。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-305643"><abbr class="published" title="2014-03-29T23:27:17+08:00">2014年3月29日 23:27</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E5%BF%8D%E4%B8%8D%E4%BD%8F%E8%A6%81%E9%97%AE%E4%BA%86.html" title="忍不住要问了的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用忍不住要问了的这条留言" onclick="return CommentQuote(&#39;comment-quote-305643&#39;,&#39;忍不住要问了&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-317095" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Ming</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-317095">
            <blockquote>
<pre>引用忍不住要问了的发言：</pre>

<p>请问有哪种语言是“不”可以在函数内部直接读取全局变量的？ 全局变量什么意思，就是在任何地方都可以读取。</p>

</blockquote>

<p>我觉得这句话可以改成：<br>
Javascript语言的特殊之处，就在于函数内部可以直接声明（不使用var）并读取全局变量。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-317095"><abbr class="published" title="2014-04-23T01:44:31+08:00">2014年4月23日 01:44</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Ming.html" title="Ming的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Ming的这条留言" onclick="return CommentQuote(&#39;comment-quote-317095&#39;,&#39;Ming&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-322716" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">Asakura</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-322716">
            <blockquote>
<pre>引用忍不住要问了的发言：</pre>

<p>这篇文章流传很广，看了多次，忍不住要问了。下面这句话：<br>
－－－－－－－－－<br>
Javascript语言的特殊之处，就在于函数内部可以直接读取全局变量。<br>
－－－－－－－－－－－<br>
请问有哪种语言是“不”可以在函数内部直接读取全局变量的？ 全局变量什么意思，就是在任何地方都可以读取。</p>

</blockquote>

<p>同感啊，一直对此很费解<br>
</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-322716"><abbr class="published" title="2014-05-11T15:34:39+08:00">2014年5月11日 15:34</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/Asakura.html" title="Asakura的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用Asakura的这条留言" onclick="return CommentQuote(&#39;comment-quote-322716&#39;,&#39;Asakura&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-323598" class="comment">
    <div class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">yuanboss</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-323598">
            <p>感觉基本是参考《javascript高级程序设计》这本书里面的</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-323598"><abbr class="published" title="2014-05-15T22:12:42+08:00">2014年5月15日 22:12</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/yuanboss.html" title="yuanboss的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用yuanboss的这条留言" onclick="return CommentQuote(&#39;comment-quote-323598&#39;,&#39;yuanboss&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    
        
        <div id="comment-325398" class="comment">
    <div id="comment-last" class="inner">
        <div class="comment-header">
            <div class="asset-meta">
<p>
                <span class="byline">
                    

                    <span class="vcard author">阮一峰</span>

 说：
                </span>
</p>
            </div>
        </div>
        <div class="comment-content" id="comment-quote-325398">
            <p>本文关闭，不再接受回复。</p>
        </div>
<div class="comment-footer">
<div class="comment-footer-inner">
<p>
                   <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-325398"><abbr class="published" title="2014-05-27T20:42:25+08:00">2014年5月27日 20:42</abbr></a>
 | <a href="http://www.ruanyifeng.com/blog/user/%E9%98%AE%E4%B8%80%E5%B3%B0.html" title="阮一峰的全部留言">档案</a> 
 | <a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html#comment-text" title="引用阮一峰的这条留言" onclick="return CommentQuote(&#39;comment-quote-325398&#39;,&#39;阮一峰&#39;);">引用</a>
</p>
</div>
</div>
    </div>
</div>
        
    </div>
        
    


    
    


</div>




                        </div>
                    </div>

                </div>
            </div>
        <script type="text/javascript" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/prism.js"></script>

            <div id="footer">
    <div id="footer-inner">
        <div id="footer-content">
<p><a href="http://www.ruanyifeng.com/contact.html">联系方式</a> | ruanyifeng.com 2003 - 2014
<!--WEBBOT bot="Script" startspan PREVIEW="Site Meter" -->
<script type="text/javascript" language="JavaScript">var site="sm3bomoocom"</script>
<a target="_top" href="http://www.sitemeter.com/stats.asp?site=sm3bomoocom" id="idSiteMeterHREF"><img border="0" alt="Site Meter" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/meter.asp"></a><iframe frameborder="0" width="0" height="0" src="about:blank" style="display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 0px 0px;"></iframe><script type="text/javascript" language="JavaScript1.2" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/counter.js">
</script>
<noscript>
&lt;a href="http://sm3.sitemeter.com/stats.asp?site=sm3bomoocom" target="_top"&gt;
&lt;img src="http://sm3.sitemeter.com/meter.asp?site=sm3bomoocom" alt="Site Meter" border=0&gt;&lt;/a&gt;
</noscript>
<!-- Copyright (c)2002 Site Meter -->
</p>

        </div>
    </div>
</div>


<div id="share_button_proto" style="display:none;"><a class="bshareDiv" href="http://www.bshare.cn/share" style="display: block; text-decoration: none; padding: 0px; margin: 0px; font-size: 12px; height: 21px; width: 51px;"><div class="bsPromo bsPromo1"></div><div class="buzzButton bsStyle10" style="height:21px;color:#333;;background:transparent url(http://static.bshare.cn/frame/images/button_custom10-zh-Orange.gif) no-repeat;text-align:center;width:51px;"></div><div style="clear:both;"></div></a><script type="text/javascript" charset="utf-8" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/buttonLite.js"></script>                                       
<script type="text/javascript" charset="utf-8">
bShare.addEntry({
    title: document.getElementById("page-title").innerHTML,
url:window.location.href
});
</script></div>
<script>
document.getElementById("share_button").innerHTML=document.getElementById("share_button_proto").innerHTML;
</script>




        </div>
    </div><script type="application/javascript" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/analytics.js"></script>

<div id="bsBox" class="bsBox"><div class="bsClose">X</div><div class="bsTop"><div class="bsReturn">选择其他平台 &gt;&gt;</div><span style="margin-left:15px;">分享到</span><span class="bsPlatName"></span></div><div class="bsFrameDiv"><iframe class="bShareFrame" name="bsFrame47" frameborder="0" scrolling="no" allowtransparency="true"></iframe></div><div id="bsMorePanel" style="display: none;"></div></div><iframe scrolling="no" width="0" height="0" src="about:blank" style="display: none !important; visibility: hidden !important; opacity: 0 !important; background-position: 2px 2px;"></iframe><div id="bsPanelHolder"><div id="bsPanel" style="display:none;"><div class="bsTitle"><a style="float:left;height:20px;line-height:20px;font-weight:bold;" class="bsSiteLink" target="_blank" href="http://www.bshare.cn/intro">分享到...</a><a class="bsSiteLink" style="cursor:pointer;float:right;height:20px;line-height:20px;font-weight:bold;" onclick="document.getElementById(&#39;bsPanel&#39;).style.display=&#39;none&#39;;">X</a><div class="bsClear"></div></div><div class="bsClear"></div><div style="padding-left:8px;background:#fff;*height:218px;"><div style="height:47px;border-bottom:1px #ccc solid;padding:4px 0 4px 16px;margin-right:8px;_padding-left:12px;"><div class="bsRlogo" onmouseover="javascript:this.className=&#39;bsRlogoSel&#39;" onmouseout="javascript:this.className=&#39;bsRlogo&#39;"><a href="javascript:;" onclick="javascript:bShare.share(event,&#39;facebook&#39;);return false;" style="text-decoration:none;line-height:120%;"><div style="cursor:pointer;width:24px;height:24px;margin:0 18px 2px;background:url(http://static.bshare.cn/frame/images//logos/m2/facebook.gif) no-repeat;"></div><div style="cursor:pointer;text-align:center;width:60px;height:16px !important;overflow:hidden;color:inherit;white-space:nowrap;line-height:120% !important;">Facebook</div></a></div><div class="bsRlogo" onmouseover="javascript:this.className=&#39;bsRlogoSel&#39;" onmouseout="javascript:this.className=&#39;bsRlogo&#39;"><a href="javascript:;" onclick="javascript:bShare.share(event,&#39;twitter&#39;);return false;" style="text-decoration:none;line-height:120%;"><div style="cursor:pointer;width:24px;height:24px;margin:0 18px 2px;background:url(http://static.bshare.cn/frame/images//logos/m2/twitter.gif) no-repeat;"></div><div style="cursor:pointer;text-align:center;width:60px;height:16px !important;overflow:hidden;color:inherit;white-space:nowrap;line-height:120% !important;">Twitter</div></a></div><div class="bsRlogo" onmouseover="javascript:this.className=&#39;bsRlogoSel&#39;" onmouseout="javascript:this.className=&#39;bsRlogo&#39;"><a href="javascript:;" onclick="javascript:bShare.share(event,&#39;sinaminiblog&#39;);return false;" style="text-decoration:none;line-height:120%;"><div style="cursor:pointer;width:24px;height:24px;margin:0 18px 2px;background:url(http://static.bshare.cn/frame/images//logos/m2/sinaminiblog.gif) no-repeat;"></div><div style="cursor:pointer;text-align:center;width:60px;height:16px !important;overflow:hidden;color:inherit;white-space:nowrap;line-height:120% !important;">新浪微博</div></a></div></div><div class="bsLogoLink"><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="Google+" onclick="javascript:bShare.share(event,&#39;gplus&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//logos/s4/gplus.png) no-repeat;">Google+</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="QQ空间" onclick="javascript:bShare.share(event,&#39;qzone&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -1566px;">QQ空间</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="网易微博" onclick="javascript:bShare.share(event,&#39;neteasemb&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -1332px;">网易微博</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="飞信" onclick="javascript:bShare.share(event,&#39;feixin&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -702px;">飞信</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="开心网" onclick="javascript:bShare.share(event,&#39;kaixin001&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -1008px;">开心网</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="饭否" onclick="javascript:bShare.share(event,&#39;fanfou&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -666px;">饭否</a></div></div><div class="bsLogoLink"><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="腾讯微博" onclick="javascript:bShare.share(event,&#39;qqmb&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -1512px;">腾讯微博</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="搜狐微博" onclick="javascript:bShare.share(event,&#39;sohuminiblog&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -1800px;">搜狐微博</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="豆瓣网" onclick="javascript:bShare.share(event,&#39;douban&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -540px;">豆瓣网</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="人人网" onclick="javascript:bShare.share(event,&#39;renren&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -1674px;">人人网</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="QQ好友" onclick="javascript:bShare.share(event,&#39;qqim&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//logos/s4/qqim.png) no-repeat;">QQ好友</a></div><div class="bsLogo" onmouseover="javascript:this.className=&#39;bsLogoSel&#39;" onmouseout="javascript:this.className=&#39;bsLogo&#39;"><a href="javascript:;" title="Instapaper" onclick="javascript:bShare.share(event,&#39;instapaper&#39;);return false;" style="background:url(http://static.bshare.cn/frame/images//slogos_sprite8.png) no-repeat 0 -954px;">Instapaper</a></div></div><div class="bsClear"></div></div><div style="height:20px;line-height:20px;padding:0 8px;border-top:1px solid #e8e8e8;color:#666;background:#f2f2f2;"><div class="buzzButton" style="float:left;">更多平台... <font style="font-weight:normal;">(133)</font></div><div id="bsPower" style="float:right;text-align:right;overflow:hidden;height:100%;"><a class="bsSiteLink" style="font-size:10px;vertical-align:text-bottom;line-height:24px;cursor:pointer;" href="http://www.bshare.cn/" target="_blank"><span style="font-size:10px;vertical-align:text-bottom;"><span style="color:#f60;">b</span>Share</span></a></div></div></div></div></body><iframe frameborder="0" marginheight="0" marginwidth="0" scrolling="no" width="2" height="2" src="./学习Javascript闭包（Closure） - 阮一峰的网络日志_files/log.htm" style="display: none;"></iframe></html>