define("utils",["F"],function(e){var t=function(e){if(typeof e!="undefined")for(var t in e)typeof this[t]!="undefined"&&(this[t]=e[t])};return t.prototype={commentBtnId:"js_comment_counts",commentConId:"cmtBox",topBtnId:"js_return_top",moveTime:200,moveCounts:20,topBtnDom:null,commentBtnDom:null,commentConDom:null,topFlag:!1,commentFlag:!1,isOpen:!1,detail:{},commentUrl:"http://comment.ifeng.com/view.php",init:function(){this.topBtnDom=e.query("#"+this.topBtnId),this.topFlag=this.topBtnDom!==null?!0:!1,this.commentBtnDom=e.query("#"+this.commentBtnId),this.commentConDom=e.query("#"+this.commentConId),this.commentFlag=this.commentBtnDom.length!==0&&this.commentConDom.length!==0?!0:!1,(this.topFlag||this.commentFlag)&&this.eventInit()},eventInit:function(){var t=this;t.topFlag&&(e.on(t.topBtnDom,"click",function(){var n=e.scrollTop(document.body),r=n/t.moveCounts,i=t.moveTime/t.moveCounts,s=1,o=setInterval(function(){s<=t.moveCounts?(n-=r,scroll(0,n),s++):clearInterval(o)},i)}),e.on(window,"scroll",function(){e.scrollTop(window)>700?e.show(t.topBtnDom):e.hide(t.topBtnDom)})),t.commentFlag&&!this.isOpen&&e.on(t.commentBtnDom,"click",function(){var n=e.offset(t.commentConDom).top,r=e.scrollTop(document.body),i=(r-n)/t.moveCounts,s=t.moveTime/t.moveCounts,o=1,u=setInterval(function(){o<=t.moveCounts?(r-=i,scroll(0,r),o++):clearInterval(u)},s)}),this.isOpen&&e.on(t.commentBtnDom,"click",function(){var e=t.detail,n=t.commentUrl,r=[];r.push("docUrl="+encodeURIComponent(e.docUrl)),r.push("docName="+encodeURIComponent(e.docName)),r.push("skey="+encodeURIComponent(e.skey)),window.open(n+"?"+r.join("&"),"","")})}},t}),define("picLazy",["F"],function(e){var t=window,n=e.height(t),r=e.query("img.js_lazyImg"),i=function(){var i,s=e.scrollTop(t),o,u;for(var a=r.length-1;a>=0;a--)i=r[a],o=e.offset(i).top,u=e.height(i),u!==0&&o>s-u&&o<s+n&&(i.src=e.attr(i,"data-src"),i.className="",r.splice(a,1))};return i}),define("floatIt.pc",["F"],function(e){var t=window,n=function(n,r){var i=e.offset(n).top,s=1,o=!1;e.on(t,"scroll",function(){o===!1&&s===10&&(s=1,i=e.offset(n).top),o===!1&&i<e.scrollTop(t)?(o=!0,e.addClass(n,r)):i>e.scrollTop(t)&&o===!0&&(o=!1,e.removeClass(n,r)),s++})};return n}),define("share.pc",["F"],function(e){var t={params:{contentFlag:!0,conShareBtnClass:"js_content_share_btn",selectionFlag:!0,imgFlag:!0,selShareBtnClass:"js_select_share_btn",selectAreaClass:"js_selection_area",imgShareBtnClass:"js_img_share_btn",imgShareScopeClass:"js_img_share_area",shareAreaId:"js_select_share",imgAreaId:"js_img_share",wxCloseClass:"js_wx_close",wxIframeClass:"js_weixin_iframe",wxConClass:"js_weixin",wxImgClass:"js_wx_qrcod",imgShareDom:null,urls:{longBlog:"http://share.ifeng.com/",qq:"http://v.t.qq.com/share/share.php",qqZone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",sina:"http://v.t.sina.com.cn/share/share.php",statistic:"http://stadig.ifeng.com/actsta.js",weixin:"http://223.203.209.145/qrcode.php"},sinaRalateUid:"1900552512",selectAreaDom:null,shareAreaDom:null,imgAreaDom:null,beforeFn:null,extClassArr:["photoList","ifengLogo","rightBtn","leftBtn","js_sliderBoxOut"]},model:{contentData:null,startFlag:!1,moveInFlag:!1,imgShareMoveInFlag:!1,endFlag:!1,qrCodeUrl:""},view:{},ctrl:{}},n=t.params,r=t.model,i=t.view,s=t.ctrl;n.init=function(t){typeof t!="undefined"&&(typeof t.contentFlag!="undefined"&&(n.contentFlag=t.contentFlag),typeof t.selectionFlag!="undefined"&&(n.selectionFlag=t.selectionFlag),typeof t.imgFlag!="undefined"&&(n.imgFlag=t.imgFlag),typeof t.contentData!="undefined"&&(r.contentData=t.contentData),typeof t.conShareBtnClass!="undefined"&&t.conShareBtnClass!==""&&(n.conShareBtnClass=t.conShareBtnClass),typeof t.selShareBtnClass!="undefined"&&t.selShareBtnClass!==""&&(n.selShareBtnClass=t.selShareBtnClass),typeof t.selectAreaClass!="undefined"&&t.selectAreaClass!==""&&(n.selectAreaClass=t.selectAreaClass),typeof t.imgShareBtnClass!="undefined"&&t.imgShareBtnClass!==""&&(n.imgShareBtnClass=t.imgShareBtnClass),typeof t.shareAreaId!="undefined"&&t.shareAreaId!==""&&(n.shareAreaId=t.shareAreaId),typeof t.sinaRalateUid!="undefined"&&t.sinaRalateUid!==""&&(n.sinaRalateUid=t.sinaRalateUid),typeof t.urls!="undefined"&&(typeof t.urls.qq!="undefined"&&t.urls.qq!==""&&(n.urls.qq=t.urls.qq),typeof t.urls.qqZone!="undefined"&&t.urls.qqZone!==""&&(n.urls.qqZone=t.urls.qqZone),typeof t.urls.sina!="undefined"&&t.urls.sina!==""&&(n.urls.sina=t.urls.sina),typeof t.urls.weixin!="undefined"&&t.urls.weixin!==""&&(n.urls.weixin=t.urls.weixin))),n.selectAreaDom=e.query("."+n.selectAreaClass),e.query("."+n.conShareBtnClass).length===0&&(n.contentFlag=!1);if(typeof r.contentData=="undefined"||t.contentData===null)n.contentFlag=!1;return e.query("#"+n.shareAreaId).length===0&&(n.selectionFlag=!1),n.selectAreaDom.length===0&&(n.selectionFlag=!1),e.query("#"+n.imgAreaId).length===0&&(n.imgFlag=!1),!n.contentFlag&&!n.selectionFlag&&!n.imgFlag?!1:(n.shareAreaDom=e.query("#"+n.shareAreaId)[0],n.imgAreaDom=e.query("#"+n.imgAreaId)[0],!0)},r.getSelectionText=function(){return window.getSelection?window.getSelection().toString():document.selection&&document.selection.createRange?document.selection.createRange().text:""},r.setSelectionEmpty=function(){window.getSelection?window.getSelection().removeAllRanges():document.body&&document.body.createTextRange&&document.selection.empty()},r.getStatisticUrlByType=function(e,t){var n;return r.opeOfUrl("param",e,"_share")!==null?e=r.opeOfUrl("param",e,"_share",t):e.split("?").length===1?e=e+"?_share="+t:r.opeOfUrl("param",e,"_share")!==null?e=r.opeOfUrl("param",e,"_share",t):(n=e.split("#"),n[0]=n[0]+"&_share="+t,e=n.join("#")),e},r.isIE67=function(){var e=navigator.userAgent.toLowerCase(),t={expStr:/(msie)[ |\/]*(\d*[.\d*]*)/i,name:"msie"},n=e.match(t.expStr);if(n instanceof Array&&n.length>1&&n[1]===t.name)if(n[2]==="6.0"||n[2]==="7.0")return!0;return!1},r.sendStatisticInfo=function(t){var r=n.urls.statistic;e.ajax({url:r,data:t,cache:!0,dataType:"script"})},r.opeOfStr=function(t,n,r){var i=null;if(typeof t!="undefined"){var s=t.split("&");t===""&&typeof r!="undefined"?i=n+"="+r:e.each(s,function(e,o){var u=o.split("=");if(u[0]===n)return typeof r=="undefined"?i=u[1]:(s[e]=n+"="+r,i=s.join("&")),!1;e===s.length-1&&typeof r!="undefined"&&(i=t+"&"+n+"="+r)})}return i},r.opeOfHash=function(t,n,i){var s=null;if(typeof t!="undefined"){t.indexOf("#")===0&&(t=t.substr(1));var o=t.split("#");e.each(o,function(e,u){var a=r.opeOfStr(u,n);if(typeof i=="undefined"){if(a!==null)return s=a,!1}else{if(a!==null)return o[e]=r.opeOfStr(u,n,i),s="#"+o.join("#"),!1;if(a===null&&e===o.length-1)return t===""?s="#"+n+"="+i:s="#"+t+"&"+n+"="+i,!1}})}return s},r.opeOfParam=function(e,t,n){var i=null;return typeof e!="undefined"&&(e.indexOf("?")===0&&(e=e.substr(1)),typeof n=="undefined"?i=r.opeOfStr(e,t):i="?"+r.opeOfStr(e,t,n)),i},r.opeOfUrl=function(e,t,n,i){var s=null;if(typeof t!="undefined"){var o=t.indexOf("#"),u=t.indexOf("?");if(e==="hash"){o===-1&&(o=t.length);var a=t.substr(o),f=t.substring(0,o);typeof i=="undefined"?s=r.opeOfHash(a,n):s=f+r.opeOfHash(a,n,i)}else if(e==="param"){var l,a,c;u===-1&&o===-1?(l="",a="",c=t):u>-1&&o===-1?(l=t.substr(u),a="",c=t.substr(0,u)):u===-1&&o>-1?(l="",a=t.substr(o),c=t.substr(0,o)):u>o?(l="",a=t.substr(o),c=t.substr(0,o)):(l=t.substring(u,o),a=t.substr(o),c=t.substr(0,u)),typeof i=="undefined"?s=r.opeOfParam(l,n):s=c+r.opeOfParam(l,n,i)+a}}return s},r.getWeixinQRCode=function(t,r){e.ajax({url:n.urls.weixin,dataType:"jsonp",data:t,success:r})},s.init=function(e){n.init(e)&&s.eventInit()},s.shareContent=function(e){if(typeof e!="undefined"){var r="";e.title=encodeURIComponent(e.title);var i={};e.type==="sina"?(r=n.urls.sina,i.url=e.url,i.title=e.title,i.pic=e.pic,i.searchPic=!1,i.appkey="2512457640",i.ralateUid=t.params.sinaRalateUid,i.rcontent=encodeURIComponent(""),i.source="ifeng"):e.type==="qq"?(r=n.urls.qq,i.url=e.url,i.title=e.title,i.pic=e.pic,i.site=encodeURIComponent(window.location.host),i.appkey="801cf76d3cfc44ada52ec13114e84a96",i.rcontent=encodeURIComponent("")):e.type==="qqZone"&&(r=n.urls.qqZone,i.title=e.title,i.url=e.url,i.pics=e.pic);var s=[],o=new Date;o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),i.url+="?tp="+o.getTime()+"&_share_"+e.type;for(var u in i)s.push(u+"="+i[u]);r+="?"+s.join("&");var a=600,f=450,l=(window.screen.availHeight-30-f)/2,c=(window.screen.availWidth-10-a)/2,h="scrollbars=no,width="+a+",height="+f+",left="+c+",top="+l+",status=no,resizable=yes";window.open(r,"_blank",h)}},s.sendStatisticInfo=function(t){var n={};n.datatype="share",n.value=t;var i=e.query("script");n.ref="",e.each(i,function(e,t){if(t.src.indexOf("http://stadig.ifeng.com/page.js")>-1){var i=r.opeOfUrl("param",t.src,"ref");n.ref=i!==null?i:"";var s=r.opeOfUrl("param",t.src,"uid");n.uid=s!==null?s:"";var o=r.opeOfUrl("param",t.src,"sid");n.sid=s!==null?o:""}});var s=window.location.href,o=window.location.hash;r.opeOfUrl("param",s,"_share")!==null?n.uri=r.opeOfUrl("param",s,"_share",t):o===""?n.uri=s+"#_share="+t:r.opeOfUrl("hash",s,"_share")!==null?n.uri=r.opeOfUrl("hash",s,"_share",t):n.uri=r.opeOfUrl("param",s,"_share",t),n.time=(new Date).getTime(),typeof getChannelInfo!="undefined"&&(n.ci=getChannelInfo()),typeof getStaPara=="function"&&(n.pt=getStaPara()),r.sendStatisticInfo(n)},s.eventInit=function(){var t=s.process;n.contentFlag&&(e.on(e.query("."+n.conShareBtnClass),"click",function(){return t.contentShare(this),!1}),e.on("."+n.wxCloseClass,"click",function(){s.weixinShare(e.parent(e.parent(this)))})),n.selectionFlag&&(r.isIE67()&&e.css(n.selectAreaDom,{position:"relative",zoom:1}),e.on(n.selectAreaDom,"mouseover",function(){t.mouseover()}),e.on(n.selectAreaDom,"mouseout",function(e){t.mouseout(e,this)}),e.on(n.selectAreaDom,"mouseup",function(e){t.mouseup(e);if(r.startFlag&&r.endFlag&&r.moveInFlag&&r.getSelectionText()!=="")return!1}),e.on(n.selectAreaDom,"mousedown",function(e){t.hideShareArea(),t.mousedown(e)}),e.on("body","mouseup",function(){t.hideShareArea()}),e.on(n.shareAreaDom,"click",function(){return t.selectionShare(this),!1},{delegate:"."+n.selShareBtnClass})),n.imgFlag&&(e.on("."+n.imgShareScopeClass,"mouseover",function(){t.moveInImg(this)},{delegate:"img"}),e.on("."+n.imgShareScopeClass,"mouseout",function(e){t.moveOutImg(e,this)},{delegate:"img"}),e.on("body","click",function(){return t.imgShare(this),!1},{delegate:"."+n.imgShareBtnClass}))},s.weixinShare=function(t){var i=e.parent(e.parent(t)),o=e.find(i,"."+n.wxConClass)[0],u=e.find(i,"."+n.wxIframeClass)[0],a=e.query(".main"),f=e.attr(o,"data-lockFlag"),l=e.attr(o,"data-showFlag");if(f===null||f==="unlock"){e.attr(o,"data-lockFlag","lock");if(l===null||l==="hide"){s.sendStatisticInfo("weixin"),e.css(".js_titleName",{zIndex:101});var h=function(){e.addClass(a,"main_wx"),e.show(u),e.show(o),e.animate(u,{height:"100px"},400),e.animate(o,{height:"114px"},400,{callback:function(){e.animate(o,{height:"111px"},100,{callback:function(){e.animate(o,{height:"112px"},100,{callback:function(){e.css(u,{height:"100px"}),e.attr(o,"data-showFlag","show"),e.attr(o,"data-lockFlag","unlock")}})}})}})};if(r.qrCodeUrl!=="")h();else{var d={};d.url=r.getStatisticUrlByType(r.contentData.docUrl,"weixin"),r.getWeixinQRCode(d,function(t){r.qrCodeUrl=t.qrcode_url,e.attr("."+n.wxImgClass,"src",r.qrCodeUrl),h()})}}else e.attr(o,"data-lockFlag","lock"),e.css(".js_titleName",{zIndex:103}),e.animate(o,{height:"0px"},400,{callback:function(){e.attr(o,"data-showFlag","hide"),e.attr(o,"data-lockFlag","unlock"),e.hide(o)}}),e.animate(u,{height:"0px"},400,{callback:function(){e.hide(u)}}),e.removeClass(a,"main_wx")}},s.process={},s.process.imgShare=function(t){var r=e.attr(t,"data-type");if(typeof r=="undefined"||r==="")return;s.sendStatisticInfo(r);if(n.imgShareDom!==null){var i="",o=e.attr(n.imgShareDom,"alt"),u=e.attr(n.imgShareDom,"title"),a=e.attr(n.imgShareDom,"src");o!==null&&(i+=o),i===""&&u!==null&&(i+=u);var f={};f.type=r,f.pic=a!==null?a:"",f.title=i,f.url=window.location.href,s.shareContent(f)}},s.process.moveInImg=function(t){var r=t,i=function(t){var r=!1;return e.each(n.extClassArr,function(n,i){if(e.hasClass(t,i)){r=!0;return}}),r};while(!i(r)&&r)try{r=r.parentNode}catch(s){break}if(!i(r)){e.show(n.imgAreaDom),n.imgShareDom=t;var o=e.offset(t),u=e.width(t),a=e.height(t),f=e.width(n.imgAreaDom),l=e.height(n.imgAreaDom),c=o.top+(a-l-10),h=o.left+(u-f-11);e.css(n.imgAreaDom,{top:c+"px",left:h+"px"})}},s.process.moveOutImg=function(t){var r=t.relatedTarget||t.toElement;while(r!==n.imgAreaDom&&r)try{r=r.parentNode}catch(i){break}r!==n.imgAreaDom&&(e.hide(n.imgAreaDom),n.imgShareDom=null)},s.process.contentShare=function(t){var i=e.attr(t,"data-type"),o=r.contentData,u=[];if(i!=="weixin"){s.sendStatisticInfo(i);var a=600,f=450,l=(window.screen.availHeight-30-f)/2,h=(window.screen.availWidth-10-a)/2,d="scrollbars=no,width="+a+",height="+f+",left="+h+",top="+l+",status=no,resizable=yes";u.push("type="+encodeURIComponent(i)),u.push("title="+encodeURIComponent("【"+o.docName+"】"+o.summary));var v=r.getStatisticUrlByType(o.docUrl,i);u.push("url="+encodeURIComponent(v)),u.push("pic="+encodeURIComponent(o.image)),u.push("sinaRalateUid="+encodeURIComponent(n.sinaRalateUid)),window.open("http://h0.ifengimg.com/commonpage/0304/share_open.html?"+u.join("&"),"_blank",d)}else s.weixinShare(t)},s.process.selectionShare=function(t){var n=e.attr(t,"data-type"),i=r.contentData;if(typeof n=="undefined"||n==="")return;s.sendStatisticInfo(n);var o={};o.type=n,o.pic=typeof i.image!="undefined"&&i.image!==""?i.image:"",o.title=r.getSelectionText(),o.url=window.location.href,s.shareContent(o)},s.process.hideShareArea=function(){e.hide(n.shareAreaDom)},s.process.mousedown=function(e){r.startFlag=!0,e.button===0&&r.setSelectionEmpty()},s.process.mouseup=function(t){r.endFlag=!0;if(r.startFlag&&r.endFlag&&r.moveInFlag&&r.getSelectionText()!==""){var i=t||window.event,s=document.documentElement.scrollLeft||document.body.scrollLeft,o=document.documentElement.scrollTop||document.body.scrollTop,u=i.pageX||i.clientX+s,a=i.pageY||i.clientY+o;e.css(n.shareAreaDom,{top:a+10+"px",left:u-50+"px"}),e.show(n.shareAreaDom)}},s.process.mouseover=function(){r.moveInFlag=!0},s.process.mouseout=function(e,t){var n=e.relatedTarget||e.toElement;while(n!==t&&n)try{n=n.parentNode}catch(i){break}n!==t&&(r.endFlag=!1,r.startFlag=!1,r.moveInFlag=!1)},s.beforeShare=function(e){n.beforeFn=e};var o={beforeShare:s.beforeShare,init:s.init};return o});